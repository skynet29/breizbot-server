/*! jQuery Fancytree Plugin - 2.21.0 - 2017-01-15T17:21:28Z
  * https://github.com/mar10/fancytree
  * Copyright (c) 2017 Martin Wendt; Licensed MIT */
(function( factory ) {
	if ( typeof define === "function" && define.amd ) {
		define( [ "jquery" ], factory );
	} else {
		factory( jQuery );
	}
}(function( $ ) {

!function(a,b,c,d){"use strict";function e(b,c){b||(c=c?": "+c:"",a.error("Fancytree assertion failed"+c))}function f(a,c){var d,e,f=b.console?b.console[a]:null;if(f)try{f.apply(b.console,c)}catch(g){for(e="",d=0;d<c.length;d++)e+=c[d];f(e)}}function g(a){return!(!a.tree||a.statusNodeType===d)}function h(b,c,d,e){var f,g,h,i=a.map(a.trim(b).split("."),function(a){return parseInt(a,10)}),j=a.map(Array.prototype.slice.call(arguments,1),function(a){return parseInt(a,10)});for(f=0;f<j.length;f++)if(g=i[f]||0,h=j[f]||0,g!==h)return g>h;return!0}function i(a,b,c,d,e){var f=function(){var c=b[a],f=d[a],g=b.ext[e],h=function(){return c.apply(b,arguments)},i=function(a){return c.apply(b,a)};return function(){var a=b._local,c=b._super,d=b._superApply;try{return b._local=g,b._super=h,b._superApply=i,f.apply(b,arguments)}finally{b._local=a,b._super=c,b._superApply=d}}}();return f}function j(b,c,d,e){for(var f in d)"function"==typeof d[f]?"function"==typeof b[f]?b[f]=i(f,b,c,d,e):"_"===f.charAt(0)?b.ext[e][f]=i(f,b,c,d,e):a.error("Could not override tree."+f+". Use prefix '_' to create tree."+e+"._"+f):"options"!==f&&(b.ext[e][f]=d[f])}function k(b,c){return b===d?a.Deferred(function(){this.resolve()}).promise():a.Deferred(function(){this.resolveWith(b,c)}).promise()}function l(b,c){return b===d?a.Deferred(function(){this.reject()}).promise():a.Deferred(function(){this.rejectWith(b,c)}).promise()}function m(a,b){return function(){a.resolveWith(b)}}function n(b){var c=a.extend({},b.data()),d=c.json;return delete c.fancytree,delete c.uiFancytree,d&&(delete c.json,c=a.extend(c,d)),c}function o(a){return(""+a).replace(y,function(a){return B[a]})}function p(a){return(""+a).replace(z,function(a){return B[a]})}function q(a){return a=a.toLowerCase(),function(b){return b.title.toLowerCase().indexOf(a)>=0}}function r(a){var b=new RegExp("^"+a,"i");return function(a){return b.test(a.title)}}function s(b,c){var d,f,g,h;for(this.parent=b,this.tree=b.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},d=0,f=H.length;d<f;d++)g=H[d],this[g]=c[g];c.data&&a.extend(this.data,c.data);for(g in c)I[g]||a.isFunction(c[g])||K[g]||(this.data[g]=c[g]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),e(this.key,"defaultKey() must return a unique key")):this.key="_"+w._nextNodeKey++:this.key=""+this.key,c.active&&(e(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),c.selected&&(this.tree.lastSelectedNode=this),h=c.children,h?h.length?this._setChildren(h):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function t(b){this.widget=b,this.$div=b.element,this.options=b.options,this.options&&(a.isFunction(this.options.lazyload)&&!a.isFunction(this.options.lazyLoad)&&(this.options.lazyLoad=function(){return w.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),b.options.lazyload.apply(this,arguments)}),a.isFunction(this.options.loaderror)&&a.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),this.options.fx!==d&&w.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),this.options.removeNode!==d&&a.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.data=n(this.$div),this._id=a.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var c,e={tree:this};this.rootNode=new s(e,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,c=a("<ul>",{"class":"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=c,this.rootNode.ul=c[0],null==this.options.debugLevel&&(this.options.debugLevel=w.debugLevel),this.$container.attr("tabindex",this.options.tabindex),this.options.rtl&&this.$container.attr("DIR","RTL").addClass("fancytree-rtl"),this.options.aria&&(this.$container.attr("role","tree"),1!==this.options.selectMode&&this.$container.attr("aria-multiselectable",!0))}if(a.ui&&a.ui.fancytree)return void a.ui.fancytree.warn("Fancytree: ignored duplicate include");var u,v,w=null,x=new RegExp(/\.|\//),y=/[&<>"'\/]/g,z=/[<>"'\/]/g,A="$recursive_request",B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},C={16:!0,17:!0,18:!0},D={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={0:"",1:"left",2:"middle",3:"right"},F="active expanded focus folder hideCheckbox lazy selected unselectable".split(" "),G={},H="expanded extraClasses folder hideCheckbox icon key lazy refKey selected statusNodeType title tooltip unselectable".split(" "),I={},J={},K={active:!0,children:!0,data:!0,focus:!0};for(u=0;u<F.length;u++)G[F[u]]=!0;for(u=0;u<H.length;u++)v=H[u],I[v]=!0,v!==v.toLowerCase()&&(J[v.toLowerCase()]=v);e(a.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),s.prototype={_findDirectChild:function(a){var b,c,d=this.children;if(d)if("string"==typeof a){for(b=0,c=d.length;b<c;b++)if(d[b].key===a)return d[b]}else{if("number"==typeof a)return this.children[a];if(a.parent===this)return a}return null},_setChildren:function(a){e(a&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var b=0,c=a.length;b<c;b++)this.children.push(new s(this,a[b]))},addChildren:function(b,c){var d,f,g,h=null,i=[];for(a.isPlainObject(b)&&(b=[b]),this.children||(this.children=[]),d=0,f=b.length;d<f;d++)i.push(new s(this,b[d]));return h=i[0],null==c?this.children=this.children.concat(i):(c=this._findDirectChild(c),g=a.inArray(c,this.children),e(g>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[g,0].concat(i))),(!this.parent||this.parent.ul||this.tr)&&this.render(),3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===i.length?i[0]:null),h},addClass:function(a){return this.toggleClass(a,!0)},addNode:function(a,b){switch(b!==d&&"over"!==b||(b="child"),b){case"after":return this.getParent().addChildren(a,this.getNextSibling());case"before":return this.getParent().addChildren(a,this);case"firstChild":var c=this.children?this.children[0]:null;return this.addChildren(a,c);case"child":case"over":return this.addChildren(a)}e(!1,"Invalid mode: "+b)},addPagingNode:function(b,c){var d,e;if(c=c||"child",b===!1){for(d=this.children.length-1;d>=0;d--)e=this.children[d],"paging"===e.statusNodeType&&this.removeChild(e);return void(this.partload=!1)}return b=a.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},b),this.partload=!0,this.addNode(b,c)},appendSibling:function(a){return this.addNode(a,"after")},applyPatch:function(b){if(null===b)return this.remove(),k(this);var c,d,e,f={children:!0,expanded:!0,parent:!0};for(c in b)e=b[c],f[c]||a.isFunction(e)||(I[c]?this[c]=e:this.data[c]=e);return b.hasOwnProperty("children")&&(this.removeChildren(),b.children&&this._setChildren(b.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),d=b.hasOwnProperty("expanded")?this.setExpanded(b.expanded):k(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(a,b,c){return a.addNode(this.toDict(!0,c),b)},countChildren:function(a){var b,c,d,e=this.children;if(!e)return 0;if(d=e.length,a!==!1)for(b=0,c=d;b<c;b++)d+=e[b].countChildren();return d},debug:function(a){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),f("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(a){var b=a?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(b,this)},findAll:function(b){b=a.isFunction(b)?b:q(b);var c=[];return this.visit(function(a){b(a)&&c.push(a)}),c},findFirst:function(b){b=a.isFunction(b)?b:q(b);var c=null;return this.visit(function(a){if(b(a))return c=a,!1}),c},_changeSelectStatusAttrs:function(a){var b=!1;switch(a){case!1:b=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:b=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case d:b=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:e(!1,"invalid state: "+a)}return b&&this.renderStatus(),b},fixSelection3AfterClick:function(){var a=this.isSelected();this.visit(function(b){b._changeSelectStatusAttrs(a)}),this.fixSelection3FromEndNodes()},fixSelection3FromEndNodes:function(){function a(b){var c,e,f,g,h,i,j,k=b.children;if(k&&k.length){for(i=!0,j=!1,c=0,e=k.length;c<e;c++)f=k[c],g=a(f),g!==!1&&(j=!0),g!==!0&&(i=!1);h=!!i||!!j&&d}else h=!!b.selected;return b._changeSelectStatusAttrs(h),h}e(3===this.tree.options.selectMode,"expected selectMode 3"),a(this),this.visitParents(function(a){var b,c,e,f,g=a.children,h=!0,i=!1;for(b=0,c=g.length;b<c;b++)e=g[b],(e.selected||e.partsel)&&(i=!0),e.unselectable||e.selected||(h=!1);f=!!h||!!i&&d,a._changeSelectStatusAttrs(f)})},fromDict:function(b){for(var c in b)I[c]?this[c]=b[c]:"data"===c?a.extend(this.data,b.data):a.isFunction(b[c])||K[c]||(this.data[c]=b[c]);b.children&&(this.removeChildren(),this.addChildren(b.children)),this.renderTitle()},getChildren:function(){return this.hasChildren()===d?d:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return a.inArray(this,this.parent.children)},getIndexHier:function(b,c){b=b||".";var d,e=[];return a.each(this.getParentList(!1,!0),function(a,b){d=""+(b.getIndex()+1),c&&(d=("0000000"+d).substr(-c)),e.push(d)}),e.join(b)},getKeyPath:function(a){var b=[],c=this.tree.options.keyPathSeparator;return this.visitParents(function(a){a.parent&&b.unshift(a.key)},!a),c+b.join(c)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},getNextSibling:function(){if(this.parent){var a,b,c=this.parent.children;for(a=0,b=c.length-1;a<b;a++)if(c[a]===this)return c[a+1]}return null},getParent:function(){return this.parent},getParentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getPrevSibling:function(){if(this.parent){var a,b,c=this.parent.children;for(a=1,b=c.length;a<b;a++)if(c[a]===this)return c[a-1]}return null},getSelectedNodes:function(a){var b=[];return this.visit(function(c){if(c.selected&&(b.push(c),a===!0))return"skip"}),b},hasChildren:function(){return this.lazy?null==this.children?d:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode()||d):!(!this.children||!this.children.length)},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(a){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),f("info",arguments))},isActive:function(){return this.tree.activeNode===this},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a||a.tree!==this.tree)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var a=this.parent;return!a||a.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var a=this.parent;return!a||a.children[a.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||this.hasChildren()!==d},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return this.hasChildren()===d},isVisible:function(){var a,b,c=this.getParentList(!1,!1);for(a=0,b=c.length;a<b;a++)if(!c[a].expanded)return!1;return!0},lazyLoad:function(a){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(a)},load:function(a){var b,c,d=this,f=this.isExpanded();return e(this.isLazy(),"load() requires a lazy node"),a||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),c=this.tree._triggerNodeEvent("lazyLoad",this),c===!1?k(this):(e("boolean"!=typeof c,"lazyLoad event must return source in data.result"),b=this.tree._callHook("nodeLoadChildren",this,c),f?(this.expanded=!0,b.always(function(){d.render()})):b.always(function(){d.renderStatus()}),b)):k(this)},makeVisible:function(b){var c,d=this,e=[],f=new a.Deferred,g=this.getParentList(!1,!1),h=g.length,i=!(b&&b.noAnimation===!0),j=!(b&&b.scrollIntoView===!1);for(c=h-1;c>=0;c--)e.push(g[c].setExpanded(!0,b));return a.when.apply(a,e).done(function(){j?d.scrollIntoView(i).done(function(){f.resolve()}):f.resolve()}),f.promise()},moveTo:function(b,c,f){c===d||"over"===c?c="child":"firstChild"===c&&(b.children&&b.children.length?(c="before",b=b.children[0]):c="child");var g,h=this.parent,i="child"===c?b:b.parent;if(this!==b){if(this.parent?i.isDescendantOf(this)&&a.error("Cannot move a node to its own descendant"):a.error("Cannot move system root"),i!==h&&h.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===i)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else g=a.inArray(this,this.parent.children),e(g>=0,"invalid source parent"),this.parent.children.splice(g,1);if(this.parent=i,i.hasChildren())switch(c){case"child":i.children.push(this);break;case"before":g=a.inArray(b,i.children),e(g>=0,"invalid target parent"),i.children.splice(g,0,this);break;case"after":g=a.inArray(b,i.children),e(g>=0,"invalid target parent"),i.children.splice(g+1,0,this);break;default:a.error("Invalid mode "+c)}else i.children=[this];f&&b.visit(f,!0),i===h?i.triggerModifyChild("move",this):i.triggerModifyChild("add",this),this.tree!==b.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(a){a.tree=b.tree},!0)),h.isDescendantOf(i)||h.render(),i.isDescendantOf(h)||i===h||i.render()}},navigate:function(b,c){function d(d){if(d){try{d.makeVisible({scrollIntoView:!1})}catch(e){}return a(d.span).is(":visible")?c===!1?d.setFocus():d.setActive():(d.debug("Navigate: skipping hidden node"),void d.navigate(b,c))}}var e,f,g,h=!0,i=a.ui.keyCode,j=null;switch(b){case i.BACKSPACE:this.parent&&this.parent.parent&&(g=d(this.parent));break;case i.HOME:this.tree.visit(function(b){if(a(b.span).is(":visible"))return g=d(b),!1});break;case i.END:this.tree.visit(function(b){a(b.span).is(":visible")&&(g=b)}),g&&(g=d(g));break;case i.LEFT:this.expanded?(this.setExpanded(!1),g=d(this)):this.parent&&this.parent.parent&&(g=d(this.parent));break;case i.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&(g=d(this.children[0])):(this.setExpanded(),g=d(this));break;case i.UP:for(j=this.getPrevSibling();j&&!a(j.span).is(":visible");)j=j.getPrevSibling();for(;j&&j.expanded&&j.children&&j.children.length;)j=j.children[j.children.length-1];!j&&this.parent&&this.parent.parent&&(j=this.parent),g=d(j);break;case i.DOWN:if(this.expanded&&this.children&&this.children.length)j=this.children[0];else for(f=this.getParentList(!1,!0),e=f.length-1;e>=0;e--){for(j=f[e].getNextSibling();j&&!a(j.span).is(":visible");)j=j.getNextSibling();if(j)break}g=d(j);break;default:h=!1}return g||k()},remove:function(){return this.parent.removeChild(this)},removeChild:function(a){return this.tree._callHook("nodeRemoveChild",this,a)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(a){return this.toggleClass(a,!1)},render:function(a,b){return this.tree._callHook("nodeRender",this,a,b)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(b){var c,d=this.parent,f=a.inArray(this,d.children),g=this;return e(this.isPagingNode(),"replaceWith() currently requires a paging status node"),c=this.tree._callHook("nodeLoadChildren",this,b),c.done(function(a){var b=g.children;for(u=0;u<b.length;u++)b[u].parent=d;d.children.splice.apply(d.children,[f+1,0].concat(b)),g.children=null,g.remove(),d.render()}).fail(function(){g.setExpanded()}),c},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=d,this.renderStatus()},scheduleAction:function(b,c){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var d=this;switch(b){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){d.tree.debug("setTimeout: trigger expand"),d.setExpanded(!0)},c);break;case"activate":this.tree.timer=setTimeout(function(){d.tree.debug("setTimeout: trigger activate"),d.setActive(!0)},c);break;default:a.error("Invalid mode "+b)}},scrollIntoView:function(f,h){h!==d&&g(h)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),h={topNode:h});var i,j,l,m,n=a.extend({effects:f===!0?{duration:200,queue:!1}:f,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},h),o=new a.Deferred,p=this,q=a(this.span).height(),r=a(n.scrollParent),s=n.scrollOfs.top||0,t=n.scrollOfs.bottom||0,u=r.height(),v=r.scrollTop(),w=r,x=r[0]===b,y=n.topNode||null,z=null;return a(this.span).is(":visible")?(x?(j=a(this.span).offset().top,i=y&&y.span?a(y.span).offset().top:0,w=a("html,body")):(e(r[0]!==c&&r[0]!==c.body,"scrollParent should be a simple element or `window`, not document or body."),m=r.offset().top,j=a(this.span).offset().top-m+v,i=y?a(y.span).offset().top-m+v:0,l=Math.max(0,r.innerHeight()-r[0].clientHeight),u-=l),j<v+s?z=j-s:j+q>v+u-t&&(z=j+q-u+t,y&&(e(y.isRootNode()||a(y.span).is(":visible"),"topNode must be visible"),i<z&&(z=i-s))),null!==z?n.effects?(n.effects.complete=function(){o.resolveWith(p)},w.stop(!0).animate({scrollTop:z},n.effects)):(w[0].scrollTop=z,o.resolveWith(this)):o.resolveWith(this),o.promise()):(this.warn("scrollIntoView(): node is invisible."),k())},setActive:function(a,b){return this.tree._callHook("nodeSetActive",this,a,b)},setExpanded:function(a,b){return this.tree._callHook("nodeSetExpanded",this,a,b)},setFocus:function(a){return this.tree._callHook("nodeSetFocus",this,a)},setSelected:function(a){return this.tree._callHook("nodeSetSelected",this,a)},setStatus:function(a,b,c){return this.tree._callHook("nodeSetStatus",this,a,b,c)},setTitle:function(a){this.title=a,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(a,b){var c,d,e=this.children;if(e){if(a=a||function(a,b){var c=a.title.toLowerCase(),d=b.title.toLowerCase();return c===d?0:c>d?1:-1},e.sort(a),b)for(c=0,d=e.length;c<d;c++)e[c].children&&e[c].sortChildren(a,"$norender$");"$norender$"!==b&&this.render(),this.triggerModifyChild("sort")}},toDict:function(b,c){var d,e,f,g={},h=this;if(a.each(H,function(a,b){(h[b]||h[b]===!1)&&(g[b]=h[b])}),a.isEmptyObject(this.data)||(g.data=a.extend({},this.data),a.isEmptyObject(g.data)&&delete g.data),c&&c(g,h),b&&this.hasChildren())for(g.children=[],d=0,e=this.children.length;d<e;d++)f=this.children[d],f.isStatusNode()||g.children.push(f.toDict(!0,c));return g},toggleClass:function(b,c){var e,f,g=/\S+/g,h=b.match(g)||[],i=0,j=!1,k=this[this.tree.statusClassPropName],l=" "+(this.extraClasses||"")+" ";for(k&&a(k).toggleClass(b,c);e=h[i++];)if(f=l.indexOf(" "+e+" ")>=0,c=c===d?!f:!!c)f||(l+=e+" ",j=!0);else for(;l.indexOf(" "+e+" ")>-1;)l=l.replace(" "+e+" "," ");return this.extraClasses=a.trim(l),j},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},triggerModifyChild:function(b,c,d){var e,f=this.tree.options.modifyChild;f&&(c&&c.parent!==this&&a.error("childNode "+c+" is not a child of "+this),e={node:this,tree:this.tree,operation:b,childNode:c||null},d&&a.extend(e,d),f({type:"modifyChild"},e))},triggerModify:function(a,b){this.parent.triggerModifyChild(a,this,b)},visit:function(a,b){var c,d,e=!0,f=this.children;if(b===!0&&(e=a(this),e===!1||"skip"===e))return e;if(f)for(c=0,d=f.length;c<d&&(e=f[c].visit(a,!0),e!==!1);c++);return e},visitAndLoad:function(b,c,d){var e,f,g,h=this;return b&&c===!0&&(f=b(h),f===!1||"skip"===f)?d?f:k():h.children||h.lazy?(e=new a.Deferred,g=[],h.load().done(function(){for(var c=0,d=h.children.length;c<d;c++){if(f=h.children[c].visitAndLoad(b,!0,!0),f===!1){e.reject();break}"skip"!==f&&g.push(f)}a.when.apply(this,g).then(function(){e.resolve()})}),e.promise()):k()},visitParents:function(a,b){if(b&&a(this)===!1)return!1;for(var c=this.parent;c;){if(a(c)===!1)return!1;c=c.parent}return!0},warn:function(a){Array.prototype.unshift.call(arguments,this.toString()),f("warn",arguments)}},t.prototype={_makeHookContext:function(b,c,e){var f,g;return b.node!==d?(c&&b.originalEvent!==c&&a.error("invalid args"),f=b):b.tree?(g=b.tree,f={node:b,tree:g,widget:g.widget,options:g.widget.options,originalEvent:c}):b.widget?f={node:null,tree:b,widget:b.widget,options:b.widget.options,originalEvent:c}:a.error("invalid args"),e&&a.extend(f,e),f},_callHook:function(b,c,d){var e=this._makeHookContext(c),f=this[b],g=Array.prototype.slice.call(arguments,2);return a.isFunction(f)||a.error("_callHook('"+b+"') is not a function"),g.unshift(e),f.apply(this,g)},_requireExtension:function(b,c,d,f){d=!!d;var g=this._local.name,h=this.options.extensions,i=a.inArray(b,h)<a.inArray(g,h),j=c&&null==this.ext[b],k=!j&&null!=d&&d!==i;return e(g&&g!==b,"invalid or same name"),!j&&!k||(f||(j||c?(f="'"+g+"' extension requires '"+b+"'",k&&(f+=" to be registered "+(d?"before":"after")+" itself")):f="If used together, `"+b+"` must be registered "+(d?"before":"after")+" `"+g+"`"),a.error(f),!1)},activateKey:function(a){var b=this.getNodeByKey(a);return b?b.setActive():this.activeNode&&this.activeNode.setActive(!1),b},addPagingNode:function(a,b){return this.rootNode.addPagingNode(a,b)},applyPatch:function(b){var c,d,f,g,h,i,j=b.length,k=[];for(d=0;d<j;d++)f=b[d],e(2===f.length,"patchList must be an array of length-2-arrays"),g=f[0],h=f[1],i=null===g?this.rootNode:this.getNodeByKey(g),i?(c=new a.Deferred,k.push(c),i.applyPatch(h).always(m(c,i))):this.warn("could not find node with key '"+g+"'");return a.when.apply(a,k).promise()},clear:function(a){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(a){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),f("log",arguments))},enableUpdate:function(a){return a=a!==!1,!!this._enableUpdate==!!a?a:(this._enableUpdate=a,a?(this.debug("enableUpdate(true): redraw ",this._dirtyRoots),this.render()):this.debug("enableUpdate(false)..."),!a)},findAll:function(a){return this.rootNode.findAll(a)},findFirst:function(a){return this.rootNode.findFirst(a)},findNextNode:function(b,c,d){var e=null,f=c.parent.children,g=null,h=function(a,b,c){var d,e,f=a.children,g=f.length,i=f[b];if(i&&c(i)===!1)return!1;if(i&&i.children&&i.expanded&&h(i,0,c)===!1)return!1;for(d=b+1;d<g;d++)if(h(a,d,c)===!1)return!1;return e=a.parent,e?h(e,e.children.indexOf(a)+1,c):h(a,0,c)};return b="string"==typeof b?r(b):b,c=c||this.getFirstChild(),h(c.parent,f.indexOf(c),function(d){return d!==e&&(e=e||d,a(d.span).is(":visible")?(!b(d)||(g=d,g===c))&&void 0:void d.debug("quicksearch: skipping hidden node"))}),g},generateFormElements:function(b,c,d){function e(b){j.append(a("<input>",{type:"checkbox",name:g,value:b.key,checked:!0}))}d=d||{};var f,g="string"==typeof b?b:"ft_"+this._id+"[]",h="string"==typeof c?c:"ft_"+this._id+"_active",i="fancytree_result_"+this._id,j=a("#"+i),k=3===this.options.selectMode&&d.stopOnParents!==!1;j.length?j.empty():j=a("<div>",{id:i}).hide().insertAfter(this.$container),c!==!1&&this.activeNode&&j.append(a("<input>",{type:"radio",name:h,value:this.activeNode.key,checked:!0})),d.filter?this.visit(function(a){var b=d.filter(a);return"skip"===b?b:void(b!==!1&&e(a))}):b!==!1&&(f=this.getSelectedNodes(k),a.each(f,function(a,b){e(b)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(a,b){var d,e;return!b&&(d=c.getElementById(this.options.idPrefix+a))?d.ftnode?d.ftnode:null:(b=b||this.rootNode,e=null,b.visit(function(b){if(b.key===a)return e=b,!1},!0),e)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(a){return this.rootNode.getSelectedNodes(a)},hasFocus:function(){return!!this._hasFocus},info:function(a){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),f("info",arguments))},loadKeyPath:function(b,c,e){function f(a,b,d){c.call(r,b,"loading"),b.load().done(function(){r.loadKeyPath.call(r,l[a],c,b).always(m(d,r))}).fail(function(e){r.warn("loadKeyPath: error loading: "+a+" (parent: "+o+")"),c.call(r,b,"error"),d.reject()})}var g,h,i,j,k,l,n,o,p,q=this.options.keyPathSeparator,r=this;for(c=c||a.noop,a.isArray(b)||(b=[b]),l={},i=0;i<b.length;i++)for(o=e||this.rootNode,j=b[i],j.charAt(0)===q&&(j=j.substr(1)),p=j.split(q);p.length;){if(k=p.shift(),n=o._findDirectChild(k),!n){this.warn("loadKeyPath: key not found: "+k+" (parent: "+o+")"),c.call(this,k,"error");break}if(0===p.length){c.call(this,n,"ok");break}if(n.lazy&&n.hasChildren()===d){c.call(this,n,"loaded"),l[k]?l[k].push(p.join(q)):l[k]=[p.join(q)];break}c.call(this,n,"loaded"),o=n}g=[];for(k in l)n=o._findDirectChild(k),null==n&&(n=r.getNodeByKey(k)),h=new a.Deferred,g.push(h),f(k,n,h);return a.when.apply(a,g).promise()},reactivate:function(a){var b,c=this.activeNode;return c?(this.activeNode=null,b=c.setActive(!0,{noFocus:!0}),a&&c.setFocus(),b):k()},reload:function(a){return this._callHook("treeClear",this),this._callHook("treeLoad",this,a)},render:function(a,b){return this.rootNode.render(a,b)},setFocus:function(a){return this._callHook("treeSetFocus",this,a)},toDict:function(a,b){var c=this.rootNode.toDict(!0,b);return a?c:c.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(a,b,c,e){var f=this._makeHookContext(b,c,e),g=this.widget._trigger(a,c,f);return g!==!1&&f.result!==d?f.result:g},_triggerTreeEvent:function(a,b,c){var e=this._makeHookContext(this,b,c),f=this.widget._trigger(a,b,e);return f!==!1&&e.result!==d?e.result:f},visit:function(a){return this.rootNode.visit(a,!1)},warn:function(a){Array.prototype.unshift.call(arguments,this.toString()),f("warn",arguments)}},a.extend(t.prototype,{nodeClick:function(a){var b,c,d=a.targetType,e=a.node;if("expander"===d){if(e.isLoading())return void e.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",a)}else if("checkbox"===d)this._callHook("nodeToggleSelected",a),a.options.focusOnSelect&&this._callHook("nodeSetFocus",a,!0);else{if(c=!1,b=!0,e.folder)switch(a.options.clickFolderMode){case 2:c=!0,b=!1;break;case 3:b=!0,c=!0}b&&(this.nodeSetFocus(a),this._callHook("nodeSetActive",a,!0)),c&&this._callHook("nodeToggleExpanded",a)}},nodeCollapseSiblings:function(a,b){var c,d,e,f=a.node;if(f.parent)for(c=f.parent.children,d=0,e=c.length;d<e;d++)c[d]!==f&&c[d].expanded&&this._callHook("nodeSetExpanded",c[d],!1,b)},nodeDblclick:function(a){"title"===a.targetType&&4===a.options.clickFolderMode&&this._callHook("nodeToggleExpanded",a),"title"===a.targetType&&a.originalEvent.preventDefault()},nodeKeydown:function(b){var c,d,e,f,g=b.originalEvent,h=b.node,i=b.tree,j=b.options,k=g.which,l=String.fromCharCode(k),m=!(g.altKey||g.ctrlKey||g.metaKey||g.shiftKey),n=a(g.target),o=!0,p=!(g.ctrlKey||!j.autoActivate);if(h||(f=this.getActiveNode()||this.getFirstChild(),f&&(f.setFocus(),h=b.node=this.focusNode,h.debug("Keydown force focus on active node"))),j.quicksearch&&m&&/\w/.test(l)&&!D[k]&&!n.is(":input:enabled"))return d=(new Date).getTime(),d-i.lastQuicksearchTime>500&&(i.lastQuicksearchTerm=""),i.lastQuicksearchTime=d,i.lastQuicksearchTerm+=l,c=i.findNextNode(i.lastQuicksearchTerm,i.getActiveNode()),c&&c.setActive(),void g.preventDefault();switch(w.eventToString(g)){case"+":case"=":i.nodeSetExpanded(b,!0);break;case"-":i.nodeSetExpanded(b,!1);break;case"space":h.isPagingNode()?i._triggerNodeEvent("clickPaging",b,g):j.checkbox?i.nodeToggleSelected(b):i.nodeSetActive(b,!0);break;case"return":i.nodeSetActive(b,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":e=h.navigate(g.which,p,!0);break;default:o=!1}o&&g.preventDefault()},nodeLoadChildren:function(b,c){var d,f,g,h=b.tree,i=b.node,j=(new Date).getTime();return a.isFunction(c)&&(c=c.call(h,{type:"source"},b),e(!a.isFunction(c),"source callback must not return another function")),c.url&&(i._requestId&&i.warn("Recursive load request #"+j+" while #"+i._requestId+" is pending."),d=a.extend({},b.options.ajax,c),i._requestId=j,d.debugDelay?(f=d.debugDelay,a.isArray(f)&&(f=f[0]+Math.random()*(f[1]-f[0])),i.warn("nodeLoadChildren waiting debugDelay "+Math.round(f)+" ms ..."),d.debugDelay=!1,g=a.Deferred(function(b){setTimeout(function(){a.ajax(d).done(function(){b.resolveWith(this,arguments)}).fail(function(){b.rejectWith(this,arguments)})},f)})):g=a.ajax(d),c=new a.Deferred,g.done(function(d,e,f){var g,k;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof d||a.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),i._requestId&&i._requestId>j)return void c.rejectWith(this,[A]);if(b.options.postProcess){try{k=h._triggerNodeEvent("postProcess",b,b.originalEvent,{response:d,error:null,dataType:this.dataType})}catch(l){k={error:l,message:""+l,details:"postProcess failed"}}if(k.error)return g=a.isPlainObject(k.error)?k.error:{message:k.error},g=h._makeHookContext(i,null,g),void c.rejectWith(this,[g]);d=a.isArray(k)?k:d}else d&&d.hasOwnProperty("d")&&b.options.enableAspx&&(d="string"==typeof d.d?a.parseJSON(d.d):d.d);c.resolveWith(this,[d])}).fail(function(a,b,d){var e=h._makeHookContext(i,null,{error:a,args:Array.prototype.slice.call(arguments),message:d,details:a.status+": "+d});c.rejectWith(this,[e])})),a.isFunction(c.then)&&a.isFunction(c["catch"])&&(g=c,c=new a.Deferred,g.then(function(a){c.resolve(a)},function(a){c.reject(a)})),a.isFunction(c.promise)&&(h.nodeSetStatus(b,"loading"),c.done(function(a){h.nodeSetStatus(b,"ok"),i._requestId=null}).fail(function(a){var c;return a===A?void i.warn("Ignored response for obsolete load request #"+j+" (expected #"+i._requestId+")"):(a.node&&a.error&&a.message?c=a:(c=h._makeHookContext(i,null,{error:a,args:Array.prototype.slice.call(arguments),message:a?a.message||a.toString():""}),"[object Object]"===c.message&&(c.message="")),i.warn("Load children failed ("+c.message+")",c),void(h._triggerNodeEvent("loadError",c,null)!==!1&&h.nodeSetStatus(b,"error",c.message,c.details)))})),
a.when(c).done(function(b){var c;a.isPlainObject(b)&&(e(i.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),e(a.isArray(b.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),c=b,b=b.children,delete c.children,a.extend(h.data,c)),e(a.isArray(b),"expected array of children"),i._setChildren(b),h._triggerNodeEvent("loadChildren",i)})},nodeLoadKeyPath:function(a,b){},nodeRemoveChild:function(b,c){var d,f=b.node,g=a.extend({},b,{node:c}),h=f.children;return 1===h.length?(e(c===h[0],"invalid single child"),this.nodeRemoveChildren(b)):(this.activeNode&&(c===this.activeNode||this.activeNode.isDescendantOf(c))&&this.activeNode.setActive(!1),this.focusNode&&(c===this.focusNode||this.focusNode.isDescendantOf(c))&&(this.focusNode=null),this.nodeRemoveMarkup(g),this.nodeRemoveChildren(g),d=a.inArray(c,h),e(d>=0,"invalid child"),f.triggerModifyChild("remove",c),c.visit(function(a){a.parent=null},!0),this._callHook("treeRegisterNode",this,!1,c),void h.splice(d,1))},nodeRemoveChildMarkup:function(b){var c=b.node;c.ul&&(c.isRootNode()?a(c.ul).empty():(a(c.ul).remove(),c.ul=null),c.visit(function(a){a.li=a.ul=null}))},nodeRemoveChildren:function(b){var c,d=b.tree,e=b.node,f=e.children;f&&(this.activeNode&&this.activeNode.isDescendantOf(e)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(e)&&(this.focusNode=null),this.nodeRemoveChildMarkup(b),c=a.extend({},b),e.triggerModifyChild("remove",null),e.visit(function(a){a.parent=null,d._callHook("treeRegisterNode",d,!1,a)}),e.lazy?e.children=[]:e.children=null,e.isRootNode()||(e.expanded=!1),this.nodeRenderStatus(b))},nodeRemoveMarkup:function(b){var c=b.node;c.li&&(a(c.li).remove(),c.li=null),this.nodeRemoveChildMarkup(b)},nodeRender:function(b,d,f,g,h){var i,j,k,l,m,n,o,p=b.node,q=b.tree,r=b.options,s=r.aria,t=!1,u=p.parent,v=!u,w=p.children,x=null;if(q._enableUpdate!==!1&&(v||u.ul)){if(e(v||u.ul,"parent UL must exist"),v||(p.li&&(d||p.li.parentNode!==p.parent.ul)&&(p.li.parentNode===p.parent.ul?x=p.li.nextSibling:this.debug("Unlinking "+p+" (must be child of "+p.parent+")"),this.nodeRemoveMarkup(b)),p.li?this.nodeRenderStatus(b):(t=!0,p.li=c.createElement("li"),p.li.ftnode=p,p.key&&r.generateIds&&(p.li.id=r.idPrefix+p.key),p.span=c.createElement("span"),p.span.className="fancytree-node",s&&a(p.li).attr("aria-labelledby","ftal_"+r.idPrefix+p.key),p.li.appendChild(p.span),this.nodeRenderTitle(b),r.createNode&&r.createNode.call(q,{type:"createNode"},b)),r.renderNode&&r.renderNode.call(q,{type:"renderNode"},b)),w){if(v||p.expanded||f===!0){for(p.ul||(p.ul=c.createElement("ul"),(g!==!0||h)&&p.expanded||(p.ul.style.display="none"),s&&a(p.ul).attr("role","group"),p.li?p.li.appendChild(p.ul):p.tree.$div.append(p.ul)),l=0,m=w.length;l<m;l++)o=a.extend({},b,{node:w[l]}),this.nodeRender(o,d,f,!1,!0);for(i=p.ul.firstChild;i;)k=i.ftnode,k&&k.parent!==p?(p.debug("_fixParent: remove missing "+k,i),n=i.nextSibling,i.parentNode.removeChild(i),i=n):i=i.nextSibling;for(i=p.ul.firstChild,l=0,m=w.length-1;l<m;l++)j=w[l],k=i.ftnode,j!==k?p.ul.insertBefore(j.li,k.li):i=i.nextSibling}}else p.ul&&(this.warn("remove child markup for "+p),this.nodeRemoveChildMarkup(b));v||t&&u.ul.insertBefore(p.li,x)}},nodeRenderTitle:function(b,c){var e,f,g,h,i,j,k=b.node,l=b.tree,m=b.options,n=m.aria,q=k.getLevel(),r=[];c!==d&&(k.title=c),k.span&&l._enableUpdate!==!1&&(q<m.minExpandLevel?(k.lazy||(k.expanded=!0),q>1&&(n?r.push("<span role='button' class='fancytree-expander fancytree-expander-fixed'></span>"):r.push("<span class='fancytree-expander fancytree-expander-fixed''></span>"))):n?r.push("<span role='button' class='fancytree-expander'></span>"):r.push("<span class='fancytree-expander'></span>"),m.checkbox&&k.hideCheckbox!==!0&&!k.isStatusNode()&&(n?r.push("<span role='checkbox' class='fancytree-checkbox'></span>"):r.push("<span class='fancytree-checkbox'></span>")),k.data.iconClass!==d&&(k.icon?a.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(k.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),k.icon=k.data.iconClass)),a.isFunction(m.icon)?(f=m.icon.call(l,{type:"icon"},b),null==f&&(f=k.icon)):f=null!=k.icon?k.icon:m.icon,null==f?f=!0:"boolean"!=typeof f&&(f=""+f),f!==!1&&(h=n?" role='img'":"","string"==typeof f?x.test(f)?(f="/"===f.charAt(0)?f:(m.imagePath||"")+f,r.push("<img src='"+f+"' class='fancytree-icon' alt='' />")):r.push("<span "+h+" class='fancytree-custom-icon "+f+"'></span>"):r.push("<span "+h+" class='fancytree-icon'></span>")),g="",m.renderTitle&&(g=m.renderTitle.call(l,{type:"renderTitle"},b)||""),g||(k.tooltip?j=k.tooltip:m.tooltip&&(j=m.tooltip===!0?k.title:m.tooltip.call(l,k)),j=j?" title='"+p(j)+"'":"",e=n?" id='ftal_"+m.idPrefix+k.key+"'":"",h=n?" role='treeitem'":"",i=m.titlesTabbable?" tabindex='0'":"",g="<span "+h+" class='fancytree-title'"+e+j+i+">"+(m.escapeTitles?o(k.title):k.title)+"</span>"),r.push(g),k.span.innerHTML=r.join(""),this.nodeRenderStatus(b),m.enhanceTitle&&(b.$title=a(">span.fancytree-title",k.span),g=m.enhanceTitle.call(l,{type:"enhanceTitle"},b)||""))},nodeRenderStatus:function(b){var c=b.node,d=b.tree,e=b.options,f=c.hasChildren(),g=c.isLastSibling(),h=e.aria,i=a(c.span).find(".fancytree-title"),j=e._classNames,k=[],l=c[d.statusClassPropName];l&&d._enableUpdate!==!1&&(k.push(j.node),d.activeNode===c&&k.push(j.active),d.focusNode===c&&k.push(j.focused),c.expanded?(k.push(j.expanded),h&&i.attr("aria-expanded",!0)):h&&(f?i.attr("aria-expanded",!1):i.removeAttr("aria-expanded")),c.folder&&k.push(j.folder),f!==!1&&k.push(j.hasChildren),g&&k.push(j.lastsib),c.lazy&&null==c.children&&k.push(j.lazy),c.partload&&k.push(j.partload),c.partsel&&k.push(j.partsel),c.unselectable&&k.push(j.unselectable),c._isLoading&&k.push(j.loading),c._error&&k.push(j.error),c.statusNodeType&&k.push(j.statusNodePrefix+c.statusNodeType),c.selected?(k.push(j.selected),h&&i.attr("aria-selected",!0)):h&&i.attr("aria-selected",!1),c.extraClasses&&k.push(c.extraClasses),f===!1?k.push(j.combinedExpanderPrefix+"n"+(g?"l":"")):k.push(j.combinedExpanderPrefix+(c.expanded?"e":"c")+(c.lazy&&null==c.children?"d":"")+(g?"l":"")),k.push(j.combinedIconPrefix+(c.expanded?"e":"c")+(c.folder?"f":"")),l.className=k.join(" "),c.li&&(c.li.className=g?j.lastsib:""))},nodeSetActive:function(b,c,d){d=d||{};var f,g=b.node,h=b.tree,i=b.options,j=d.noEvents===!0,m=d.noFocus===!0,n=g===h.activeNode;return c=c!==!1,n===c?k(g):c&&!j&&this._triggerNodeEvent("beforeActivate",g,b.originalEvent)===!1?l(g,["rejected"]):(c?(h.activeNode&&(e(h.activeNode!==g,"node was active (inconsistency)"),f=a.extend({},b,{node:h.activeNode}),h.nodeSetActive(f,!1),e(null===h.activeNode,"deactivate was out of sync?")),i.activeVisible&&g.makeVisible({scrollIntoView:m&&null==h.focusNode}),h.activeNode=g,h.nodeRenderStatus(b),m||h.nodeSetFocus(b),j||h._triggerNodeEvent("activate",g,b.originalEvent)):(e(h.activeNode===g,"node was not active (inconsistency)"),h.activeNode=null,this.nodeRenderStatus(b),j||b.tree._triggerNodeEvent("deactivate",g,b.originalEvent)),k(g))},nodeSetExpanded:function(b,c,e){e=e||{};var f,g,h,i,j,m,n=b.node,o=b.tree,p=b.options,q=e.noAnimation===!0,r=e.noEvents===!0;if(c=c!==!1,n.expanded&&c||!n.expanded&&!c)return k(n);if(c&&!n.lazy&&!n.hasChildren())return k(n);if(!c&&n.getLevel()<p.minExpandLevel)return l(n,["locked"]);if(!r&&this._triggerNodeEvent("beforeExpand",n,b.originalEvent)===!1)return l(n,["rejected"]);if(q||n.isVisible()||(q=e.noAnimation=!0),g=new a.Deferred,c&&!n.expanded&&p.autoCollapse){j=n.getParentList(!1,!0),m=p.autoCollapse;try{for(p.autoCollapse=!1,h=0,i=j.length;h<i;h++)this._callHook("nodeCollapseSiblings",j[h],e)}finally{p.autoCollapse=m}}return g.done(function(){var a=n.getLastChild();c&&p.autoScroll&&!q&&a?a.scrollIntoView(!0,{topNode:n}).always(function(){r||b.tree._triggerNodeEvent(c?"expand":"collapse",b)}):r||b.tree._triggerNodeEvent(c?"expand":"collapse",b)}),f=function(d){var e,f,g=p.toggleEffect;if(n.expanded=c,o._callHook("nodeRender",b,!1,!1,!0),n.ul)if(e="none"!==n.ul.style.display,f=!!n.expanded,e===f)n.warn("nodeSetExpanded: UL.style.display already set");else{if(g&&!q)return void a(n.ul).toggle(g.effect,g.options,g.duration,function(){d()});n.ul.style.display=n.expanded||!parent?"":"none"}d()},c&&n.lazy&&n.hasChildren()===d?n.load().done(function(){g.notifyWith&&g.notifyWith(n,["loaded"]),f(function(){g.resolveWith(n)})}).fail(function(a){f(function(){g.rejectWith(n,["load failed ("+a+")"])})}):f(function(){g.resolveWith(n)}),g.promise()},nodeSetFocus:function(b,d){var e,f=b.tree,g=b.node,h=f.options,i=!!b.originalEvent&&a(b.originalEvent.target).is(":input");if(d=d!==!1,f.focusNode){if(f.focusNode===g&&d)return;e=a.extend({},b,{node:f.focusNode}),f.focusNode=null,this._triggerNodeEvent("blur",e),this._callHook("nodeRenderStatus",e)}d&&(this.hasFocus()||(g.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",b,!0,{calledByNode:!0})),g.makeVisible({scrollIntoView:!1}),f.focusNode=g,h.titlesTabbable?i||a(g.span).find(".fancytree-title").focus():0===a(c.activeElement).closest(".fancytree-container").length&&a(f.$container).focus(),h.aria&&a(f.$container).attr("aria-activedescendant","ftal_"+h.idPrefix+g.key),this._triggerNodeEvent("focus",b),h.autoScroll&&g.scrollIntoView(),this._callHook("nodeRenderStatus",b))},nodeSetSelected:function(a,b){var c=a.node,d=a.tree,e=a.options;if(b=b!==!1,!c.unselectable){if(c.selected&&b||!c.selected&&!b)return!!c.selected;if(this._triggerNodeEvent("beforeSelect",c,a.originalEvent)===!1)return!!c.selected;b&&1===e.selectMode?d.lastSelectedNode&&d.lastSelectedNode.setSelected(!1):3===e.selectMode&&(c.selected=b,c.fixSelection3AfterClick()),c.selected=b,this.nodeRenderStatus(a),d.lastSelectedNode=b?c:null,d._triggerNodeEvent("select",a)}},nodeSetStatus:function(b,c,d,e){function f(){var a=h.children?h.children[0]:null;if(a&&a.isStatusNode()){try{h.ul&&(h.ul.removeChild(a.li),a.li=null)}catch(b){}1===h.children.length?h.children=[]:h.children.shift()}}function g(b,c){var d=h.children?h.children[0]:null;return d&&d.isStatusNode()?(a.extend(d,b),d.statusNodeType=c,i._callHook("nodeRenderTitle",d)):(h._setChildren([b]),h.children[0].statusNodeType=c,i.render()),h.children[0]}var h=b.node,i=b.tree;switch(c){case"ok":f(),h._isLoading=!1,h._error=null,h.renderStatus();break;case"loading":h.parent||g({title:i.options.strings.loading+(d?" ("+d+")":""),checkbox:!1,tooltip:e},c),h._isLoading=!0,h._error=null,h.renderStatus();break;case"error":g({title:i.options.strings.loadError+(d?" ("+d+")":""),checkbox:!1,tooltip:e},c),h._isLoading=!1,h._error={message:d,details:e},h.renderStatus();break;case"nodata":g({title:i.options.strings.noData,checkbox:!1,tooltip:e},c),h._isLoading=!1,h._error=null,h.renderStatus();break;default:a.error("invalid node status "+c)}},nodeToggleExpanded:function(a){return this.nodeSetExpanded(a,!a.node.expanded)},nodeToggleSelected:function(a){return this.nodeSetSelected(a,!a.node.selected)},treeClear:function(a){var b=a.tree;b.activeNode=null,b.focusNode=null,b.$div.find(">ul.fancytree-container").empty(),b.rootNode.children=null},treeCreate:function(a){},treeDestroy:function(a){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden")},treeInit:function(a){this.treeLoad(a)},treeLoad:function(b,c){var d,f,g,h,i=b.tree,j=b.widget.element,k=a.extend({},b,{node:this.rootNode});if(i.rootNode.children&&this.treeClear(b),c=c||this.options.source)"string"==typeof c&&a.error("Not implemented");else switch(f=j.data("type")||"html"){case"html":g=j.find(">ul:first"),g.addClass("ui-fancytree-source ui-helper-hidden"),c=a.ui.fancytree.parseHtml(g),this.data=a.extend(this.data,n(g));break;case"json":c=a.parseJSON(j.text()),j.contents().filter(function(){return 3===this.nodeType}).remove(),a.isPlainObject(c)&&(e(a.isArray(c.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),d=c,c=c.children,delete d.children,a.extend(i.data,d));break;default:a.error("Invalid data-type: "+f)}return h=this.nodeLoadChildren(k,c).done(function(){i.render(),3===b.options.selectMode&&i.rootNode.fixSelection3FromEndNodes(),i.activeNode&&i.options.activeVisible&&i.activeNode.makeVisible(),i._triggerTreeEvent("init",null,{status:!0})}).fail(function(){i.render(),i._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(a,b,c){},treeSetFocus:function(b,c,d){c=c!==!1,c!==this.hasFocus()&&(this._hasFocus=c,!c&&this.focusNode?this.focusNode.setFocus(!1):!c||d&&d.calledByNode||a(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",c),this._triggerTreeEvent(c?"focusTree":"blurTree"),c&&!this.activeNode&&this.getFirstChild()&&this.getFirstChild().setFocus())},treeSetOption:function(b,c,d){var e=b.tree,f=!0,g=!1;switch(c){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":e._callHook("treeCreate",e),g=!0;break;case"escapeTitles":case"tooltip":g=!0;break;case"rtl":d===!1?e.$container.attr("DIR",null).removeClass("fancytree-rtl"):e.$container.attr("DIR","RTL").addClass("fancytree-rtl"),g=!0;break;case"source":f=!1,e._callHook("treeLoad",e,d),g=!0}e.debug("set option "+c+"="+d+" <"+typeof d+">"),f&&(this.widget._super?this.widget._super.call(this.widget,c,d):a.Widget.prototype._setOption.call(this.widget,c,d)),g&&e.render(!0,!1)}}),a.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!1,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading&#8230;",loadError:"Load error!",moreData:"More&#8230;",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,_classNames:{node:"fancytree-node",folder:"fancytree-folder",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new t(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var b,c,f,g=this.options,h=g.extensions,i=this.tree;for(f=0;f<h.length;f++)c=h[f],b=a.ui.fancytree._extensions[c],b||a.error("Could not apply extension '"+c+"' (it is not registered, did you forget to include it?)"),this.tree.options[c]=a.extend(!0,{},b.options,this.tree.options[c]),e(this.tree.ext[c]===d,"Extension name must not exist as Fancytree.ext attribute: '"+c+"'"),this.tree.ext[c]={},j(this.tree,i,b,c),i=b;g.icons!==d&&(g.icon!==!0?a.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),g.icon=g.icons)),g.iconClass!==d&&(g.icon?a.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),g.icon=g.iconClass)),g.tabbable!==d&&(g.tabindex=g.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+g.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(a,b){return this.tree._callHook("treeSetOption",this.tree,a,b)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),a.Widget.prototype.destroy.call(this)},_unbind:function(){var b=this.tree._ns;this.element.unbind(b),this.tree.$container.unbind(b),a(c).unbind(b)},_bind:function(){var a=this,b=this.options,c=this.tree,d=c._ns;this._unbind(),c.$container.on("focusin"+d+" focusout"+d,function(a){var b=w.getNode(a),d="focusin"===a.type;b?c._callHook("nodeSetFocus",c._makeHookContext(b,a),d):c._callHook("treeSetFocus",c,d)}).on("selectstart"+d,"span.fancytree-title",function(a){a.preventDefault()}).on("keydown"+d,function(a){if(b.disabled||b.keyboard===!1)return!0;var d,e=c.focusNode,f=c._makeHookContext(e||c,a),g=c.phase;try{return c.phase="userEvent",d=e?c._triggerNodeEvent("keydown",e,a):c._triggerTreeEvent("keydown",a),"preventNav"===d?d=!0:d!==!1&&(d=c._callHook("nodeKeydown",f)),d}finally{c.phase=g}}).on("click"+d+" dblclick"+d,function(c){if(b.disabled)return!0;var d,e=w.getEventTarget(c),f=e.node,g=a.tree,h=g.phase;if(!f)return!0;d=g._makeHookContext(f,c);try{switch(g.phase="userEvent",c.type){case"click":return d.targetType=e.type,f.isPagingNode()?g._triggerNodeEvent("clickPaging",d,c)===!0:g._triggerNodeEvent("click",d,c)!==!1&&g._callHook("nodeClick",d);case"dblclick":return d.targetType=e.type,g._triggerNodeEvent("dblclick",d,c)!==!1&&g._callHook("nodeDblclick",d)}}finally{g.phase=h}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(a){return this.tree.getNodeByKey(a)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),w=a.ui.fancytree,a.extend(a.ui.fancytree,{version:"2.21.0",buildType: "production",debugLevel: 1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:t,_FancytreeNodeClass:s,jquerySupports:{positionMyOfs:h(a.ui.version,1,9)},assert:function(a,b){return e(a,b)},debounce:function(a,b,c,d){var e;return 3===arguments.length&&"boolean"!=typeof c&&(d=c,c=!1),function(){var f=arguments;d=d||this,c&&!e&&b.apply(d,f),clearTimeout(e),e=setTimeout(function(){c||b.apply(d,f),e=null},a)}},debug:function(b){a.ui.fancytree.debugLevel>=2&&f("log",arguments)},error:function(a){f("error",arguments)},escapeHtml:o,fixPositionOptions:function(b){if((b.offset||(""+b.my+b.at).indexOf("%")>=0)&&a.error("expected new position syntax (but '%' is not supported)"),!a.ui.fancytree.jquerySupports.positionMyOfs){var c=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(b.my),d=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(b.at),e=(c[2]?+c[2]:0)+(d[2]?+d[2]:0),f=(c[4]?+c[4]:0)+(d[4]?+d[4]:0);b=a.extend({},b,{my:c[1]+" "+c[3],at:d[1]+" "+d[3]}),(e||f)&&(b.offset=""+e+" "+f)}return b},getEventTargetType:function(a){return this.getEventTarget(a).type},getEventTarget:function(b){var c=b&&b.target?b.target.className:"",e={node:this.getNode(b.target),type:d};return/\bfancytree-title\b/.test(c)?e.type="title":/\bfancytree-expander\b/.test(c)?e.type=e.node.hasChildren()===!1?"prefix":"expander":/\bfancytree-checkbox\b/.test(c)||/\bfancytree-radio\b/.test(c)?e.type="checkbox":/\bfancytree-icon\b/.test(c)?e.type="icon":/\bfancytree-node\b/.test(c)?e.type="title":b&&b.target&&a(b.target).closest(".fancytree-title").length&&(e.type="title"),e},getNode:function(a){if(a instanceof s)return a;for(a.selector!==d?a=a[0]:a.originalEvent!==d&&(a=a.target);a;){if(a.ftnode)return a.ftnode;a=a.parentNode}return null},getTree:function(b){var c;return b instanceof t?b:(b===d&&(b=0),"number"==typeof b?b=a(".fancytree-container").eq(b):"string"==typeof b?b=a(b).eq(0):b.selector!==d?b=b.eq(0):b.originalEvent!==d&&(b=a(b.target)),b=b.closest(":ui-fancytree"),c=b.data("ui-fancytree")||b.data("fancytree"),c?c.tree:null)},eventToString:function(a){var b=a.which,c=a.type,d=[];return a.altKey&&d.push("alt"),a.ctrlKey&&d.push("ctrl"),a.metaKey&&d.push("meta"),a.shiftKey&&d.push("shift"),"click"===c||"dblclick"===c?d.push(E[a.button]+c):C[b]||d.push(D[b]||String.fromCharCode(b).toLowerCase()),d.join("+")},info:function(b){a.ui.fancytree.debugLevel>=1&&f("info",arguments)},keyEventToString:function(a){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(a)},overrideMethod:function(b,c,d){var e,f=b[c]||a.noop;b[c]=function(){try{return e=this._super,this._super=f,d.apply(this,arguments)}finally{this._super=e}}},parseHtml:function(b){var c,e,f,g,h,i,j,k,l=b.find(">li"),m=[];return l.each(function(){var l,o,p=a(this),q=p.find(">span:first",this),r=q.length?null:p.find(">a:first"),s={tooltip:null,data:{}};for(q.length?s.title=q.html():r&&r.length?(s.title=r.html(),s.data.href=r.attr("href"),s.data.target=r.attr("target"),s.tooltip=r.attr("title")):(s.title=p.html(),h=s.title.search(/<ul/i),h>=0&&(s.title=s.title.substring(0,h))),s.title=a.trim(s.title),g=0,i=F.length;g<i;g++)s[F[g]]=d;for(c=this.className.split(" "),f=[],g=0,i=c.length;g<i;g++)e=c[g],G[e]?s[e]=!0:f.push(e);if(s.extraClasses=f.join(" "),j=p.attr("title"),j&&(s.tooltip=j),j=p.attr("id"),j&&(s.key=j),l=n(p),l&&!a.isEmptyObject(l)){for(o in J)l.hasOwnProperty(o)&&(l[J[o]]=l[o],delete l[o]);for(g=0,i=H.length;g<i;g++)j=H[g],k=l[j],null!=k&&(delete l[j],s[j]=k);a.extend(s.data,l)}b=p.find(">ul:first"),b.length?s.children=a.ui.fancytree.parseHtml(b):s.children=s.lazy?d:null,m.push(s)}),m},registerExtension:function(b){e(null!=b.name,"extensions must have a `name` property."),e(null!=b.version,"extensions must have a `version` property."),a.ui.fancytree._extensions[b.name]=b},unescapeHtml:function(a){var b=c.createElement("div");return b.innerHTML=a,0===b.childNodes.length?"":b.childNodes[0].nodeValue},warn:function(a){f("warn",arguments)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.childcounter.min.js' */
!function(a,b){"use strict";a.ui.fancytree._FancytreeClass.prototype.countSelected=function(a){var b=this;b.options;return b.getSelectedNodes(a).length},a.ui.fancytree._FancytreeNodeClass.prototype.updateCounters=function(){var b=this,c=a("span.fancytree-childcounter",b.span),d=b.tree.options.childcounter,e=b.countChildren(d.deep);b.data.childCounter=e,!e&&d.hideZeros||b.isExpanded()&&d.hideExpanded?c.remove():(c.length||(c=a("<span class='fancytree-childcounter'/>").appendTo(a("span.fancytree-icon",b.span))),c.text(e)),!d.deep||b.isTopLevel()||b.isRoot()||b.parent.updateCounters()},a.ui.fancytree.prototype.widgetMethod1=function(a){this.tree;return a},a.ui.fancytree.registerExtension({name:"childcounter",version:"2.21.0",options:{deep:!0,hideZeros:!0,hideExpanded:!1},foo:42,_appendCounter:function(a){},treeInit:function(a){a.options,a.options.childcounter;this._superApply(arguments),this.$container.addClass("fancytree-ext-childcounter")},treeDestroy:function(a){this._superApply(arguments)},nodeRenderTitle:function(b,c){var d=b.node,e=b.options.childcounter,f=null==d.data.childCounter?d.countChildren(e.deep):+d.data.childCounter;this._superApply(arguments),!f&&e.hideZeros||d.isExpanded()&&e.hideExpanded||a("span.fancytree-icon",d.span).append(a("<span class='fancytree-childcounter'/>").text(f))},nodeSetExpanded:function(a,b,c){var d=a.tree;a.node;return this._superApply(arguments).always(function(){d.nodeRenderTitle(a)})}})}(jQuery);

/*! Extension 'jquery.fancytree.clones.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){b||(c=c?": "+c:"",a.error("Assertion failed"+c))}function f(a,b){var c;for(c=a.length-1;c>=0;c--)if(a[c]===b)return a.splice(c,1),!0;return!1}function g(a,b,c){for(var d,e,f=3&a.length,g=a.length-f,h=c,i=3432918353,j=461845907,k=0;k<g;)e=255&a.charCodeAt(k)|(255&a.charCodeAt(++k))<<8|(255&a.charCodeAt(++k))<<16|(255&a.charCodeAt(++k))<<24,++k,e=(65535&e)*i+(((e>>>16)*i&65535)<<16)&4294967295,e=e<<15|e>>>17,e=(65535&e)*j+(((e>>>16)*j&65535)<<16)&4294967295,h^=e,h=h<<13|h>>>19,d=5*(65535&h)+((5*(h>>>16)&65535)<<16)&4294967295,h=(65535&d)+27492+(((d>>>16)+58964&65535)<<16);switch(e=0,f){case 3:e^=(255&a.charCodeAt(k+2))<<16;case 2:e^=(255&a.charCodeAt(k+1))<<8;case 1:e^=255&a.charCodeAt(k),e=(65535&e)*i+(((e>>>16)*i&65535)<<16)&4294967295,e=e<<15|e>>>17,e=(65535&e)*j+(((e>>>16)*j&65535)<<16)&4294967295,h^=e}return h^=a.length,h^=h>>>16,h=2246822507*(65535&h)+((2246822507*(h>>>16)&65535)<<16)&4294967295,h^=h>>>13,h=3266489909*(65535&h)+((3266489909*(h>>>16)&65535)<<16)&4294967295,h^=h>>>16,b?("0000000"+(h>>>0).toString(16)).substr(-8):h>>>0}function h(b){var c,d=a.map(b.getParentList(!1,!0),function(a){return a.refKey||a.key});return d=d.join("/"),c="id_"+g(d,!0)}a.ui.fancytree._FancytreeNodeClass.prototype.getCloneList=function(b){var c,d=this.tree,e=d.refMap[this.refKey]||null,f=d.keyMap;return e&&(c=this.key,b?e=a.map(e,function(a){return f[a]}):(e=a.map(e,function(a){return a===c?null:f[a]}),e.length<1&&(e=null))),e},a.ui.fancytree._FancytreeNodeClass.prototype.isClone=function(){var a=this.refKey||null,b=a&&this.tree.refMap[a]||null;return!!(b&&b.length>1)},a.ui.fancytree._FancytreeNodeClass.prototype.reRegister=function(b,c){b=null==b?null:""+b,c=null==c?null:""+c;var d=this.tree,e=this.key,f=this.refKey,g=d.keyMap,h=d.refMap,i=h[f]||null,j=!1;return null!=b&&b!==this.key&&(g[b]&&a.error("[ext-clones] reRegister("+b+"): already exists: "+this),delete g[e],g[b]=this,i&&(h[f]=a.map(i,function(a){return a===e?b:a})),this.key=b,j=!0),null!=c&&c!==this.refKey&&(i&&(1===i.length?delete h[f]:h[f]=a.map(i,function(a){return a===e?null:a})),h[c]?h[c].append(b):h[c]=[this.key],this.refKey=c,j=!0),j},a.ui.fancytree._FancytreeNodeClass.prototype.setRefKey=function(a){return this.reRegister(null,a)},a.ui.fancytree._FancytreeClass.prototype.getNodesByRef=function(b,c){var d=this.keyMap,e=this.refMap[b]||null;return e&&(e=c?a.map(e,function(a){var b=d[a];return b.isDescendantOf(c)?b:null}):a.map(e,function(a){return d[a]}),e.length<1&&(e=null)),e},a.ui.fancytree._FancytreeClass.prototype.changeRefKey=function(a,b){var c,d,e=this.keyMap,f=this.refMap[a]||null;if(f){for(c=0;c<f.length;c++)d=e[f[c]],d.refKey=b;delete this.refMap[a],this.refMap[b]=f}},a.ui.fancytree.registerExtension({name:"clones",version:"2.21.0",options:{highlightActiveClones:!0,highlightClones:!1},treeCreate:function(a){this._superApply(arguments),a.tree.refMap={},a.tree.keyMap={}},treeInit:function(a){this.$container.addClass("fancytree-ext-clones"),e(null==a.options.defaultKey),a.options.defaultKey=function(a){return h(a)},this._superApply(arguments)},treeClear:function(a){return a.tree.refMap={},a.tree.keyMap={},this._superApply(arguments)},treeRegisterNode:function(b,c,d){var g,h,i=b.tree,j=i.keyMap,k=i.refMap,l=d.key,m=d&&null!=d.refKey?""+d.refKey:null;return d.isStatusNode()?this._superApply(arguments):(c?(null!=j[d.key]&&a.error("clones.treeRegisterNode: node.key already exists: "+d),j[l]=d,m&&(g=k[m],g?(g.push(l),2===g.length&&b.options.clones.highlightClones&&j[g[0]].renderStatus()):k[m]=[l])):(null==j[l]&&a.error("clones.treeRegisterNode: node.key not registered: "+d.key),delete j[l],m&&(g=k[m],g&&(h=g.length,h<=1?(e(1===h),e(g[0]===l),delete k[m]):(f(g,l),2===h&&b.options.clones.highlightClones&&j[g[0]].renderStatus())))),this._superApply(arguments))},nodeRenderStatus:function(b){var c,d,e=b.node;return d=this._superApply(arguments),b.options.clones.highlightClones&&(c=a(e[b.tree.statusClassPropName]),c.length&&e.isClone()&&c.addClass("fancytree-clone")),d},nodeSetActive:function(b,c){var d,e=b.tree.statusClassPropName,f=b.node;return d=this._superApply(arguments),b.options.clones.highlightActiveClones&&f.isClone()&&a.each(f.getCloneList(!0),function(b,d){a(d[e]).toggleClass("fancytree-active-clone",c!==!1)}),d}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.dnd.min.js' */
!function(a,b,c,d){"use strict";function e(a){return 0===a?"":a>0?"+"+a:""+a}function f(){h||(a.ui.plugin.add("draggable","connectToFancytree",{start:function(b,c){var d=a(this).data("ui-draggable")||a(this).data("draggable"),e=c.helper.data("ftSourceNode")||null;if(e)return d.offset.click.top=-2,d.offset.click.left=16,e.tree.ext.dnd._onDragEvent("start",e,null,b,c,d)},drag:function(b,c){var d,e,f,g=a(this).data("ui-draggable")||a(this).data("draggable"),h=c.helper.data("ftSourceNode")||null,i=c.helper.data("ftTargetNode")||null,j=a.ui.fancytree.getNode(b.target),k=h&&h.tree.options.dnd;return b.target&&!j&&(e=a(b.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length>0)?(f=h||i||a.ui.fancytree,void f.debug("Drag event over helper: ignored.")):(c.helper.data("ftTargetNode",j),k&&k.updateHelper&&(d=h.tree._makeHookContext(h,b,{otherNode:j,ui:c,draggable:g,dropMarker:a("#fancytree-drop-marker")}),k.updateHelper.call(h.tree,h,d)),i&&i!==j&&i.tree.ext.dnd._onDragEvent("leave",i,h,b,c,g),void(j&&j.tree.options.dnd.dragDrop&&(j===i?j.tree.ext.dnd._onDragEvent("over",j,h,b,c,g):(j.tree.ext.dnd._onDragEvent("enter",j,h,b,c,g),j.tree.ext.dnd._onDragEvent("over",j,h,b,c,g)))))},stop:function(b,c){var d,e=a(this).data("ui-draggable")||a(this).data("draggable"),f=c.helper.data("ftSourceNode")||null,g=c.helper.data("ftTargetNode")||null,h="mouseup"===b.type&&1===b.which;h||(d=f||g||a.ui.fancytree,d.debug("Drag was cancelled")),g&&(h&&g.tree.ext.dnd._onDragEvent("drop",g,f,b,c,e),g.tree.ext.dnd._onDragEvent("leave",g,f,b,c,e)),f&&f.tree.ext.dnd._onDragEvent("stop",f,null,b,c,e)}}),h=!0)}function g(b){var c=b.options.dnd||null,d=b.options.glyph||null;c&&f(),c&&c.dragStart&&b.widget.element.draggable(a.extend({addClasses:!1,appendTo:b.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(b){var c,e,f,g=a.ui.fancytree.getNode(b.target);return g?(f=g.tree.options.dnd,e=a(g.span),c=a("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(e.find("span.fancytree-title").clone()),c.data("ftSourceNode",g),d&&c.find(".fancytree-drag-helper-img").addClass(d.map.dragHelper),f.initHelper&&f.initHelper.call(g.tree,g,{node:g,tree:g.tree,originalEvent:b,ui:{helper:c}}),c):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(a,b){var c=b.helper.data("ftSourceNode");return!!c}},b.options.dnd.draggable)),c&&c.dragDrop&&b.widget.element.droppable(a.extend({addClasses:!1,tolerance:"intersect",greedy:!1},b.options.dnd.droppable))}var h=!1,i="fancytree-drop-accept",j="fancytree-drop-after",k="fancytree-drop-before",l="fancytree-drop-over",m="fancytree-drop-reject",n="fancytree-drop-target";a.ui.fancytree.registerExtension({name:"dnd",version:"2.21.0",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(b){var c=b.tree;this._superApply(arguments),c.options.dnd.dragStart&&c.$container.on("mousedown",function(c){if(b.options.dnd.focusOnClick){var d=a.ui.fancytree.getNode(c);d&&d.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){a(c.target).closest(":tabbable").focus()},10)}}),g(c)},_setDndStatus:function(b,c,d,f,g){var h,o="center",p=this._local,q=this.options.glyph||null,r=b?a(b.span):null,s=a(c.span),t=s.find(">span.fancytree-title");if(p.$dropMarker||(p.$dropMarker=a("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(a(this.$div).parent()),q&&p.$dropMarker.addClass(q.map.dropMarker)),"after"===f||"before"===f||"over"===f){switch(h=-24,f){case"before":o="top",h-=16;break;case"after":o="bottom",h-=16}p.$dropMarker.toggleClass(j,"after"===f).toggleClass(l,"over"===f).toggleClass(k,"before"===f).show().position(a.ui.fancytree.fixPositionOptions({my:"left"+e(h)+" center",at:"left "+o,of:t}))}else p.$dropMarker.hide();r&&r.toggleClass(i,g===!0).toggleClass(m,g===!1),s.toggleClass(n,"after"===f||"before"===f||"over"===f).toggleClass(j,"after"===f).toggleClass(k,"before"===f).toggleClass(i,g===!0).toggleClass(m,g===!1),d.toggleClass(i,g===!0).toggleClass(m,g===!1)},_onDragEvent:function(b,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s=this.options,t=s.dnd,u=this._makeHookContext(e,g,{otherNode:f,ui:h,draggable:i}),v=null,w=this,x=a(e.span);switch(t.smartRevert&&(i.options.revert="invalid"),b){case"start":e.isStatusNode()?v=!1:t.dragStart&&(v=t.dragStart(e,u)),v===!1?(this.debug("tree.dragStart() cancelled"),h.helper.trigger("mouseup").hide()):(t.smartRevert&&(m=e[u.tree.nodeContainerAttrName].getBoundingClientRect(),l=a(i.options.appendTo)[0].getBoundingClientRect(),i.originalPosition.left=Math.max(0,m.left-l.left),i.originalPosition.top=Math.max(0,m.top-l.top)),x.addClass("fancytree-drag-source"),a(c).on("keydown.fancytree-dnd,mousedown.fancytree-dnd",function(b){"keydown"===b.type&&b.which===a.ui.keyCode.ESCAPE?w.ext.dnd._cancelDrag():"mousedown"===b.type&&w.ext.dnd._cancelDrag()}));break;case"enter":r=(!t.preventRecursiveMoves||!e.isDescendantOf(f))&&(t.dragEnter?t.dragEnter(e,u):null),v=!!r&&(a.isArray(r)?{over:a.inArray("over",r)>=0,before:a.inArray("before",r)>=0,after:a.inArray("after",r)>=0}:{over:r===!0||"over"===r,before:r===!0||"before"===r,after:r===!0||"after"===r}),h.helper.data("enterResponse",v);break;case"over":p=h.helper.data("enterResponse"),q=null,p===!1||("string"==typeof p?q=p:(k=x.offset(),n={x:g.pageX-k.left,y:g.pageY-k.top},o={x:n.x/x.width(),y:n.y/x.height()},p.after&&o.y>.75?q="after":!p.over&&p.after&&o.y>.5?q="after":p.before&&o.y<=.25?q="before":!p.over&&p.before&&o.y<=.5?q="before":p.over&&(q="over"),t.preventVoidMoves&&(e===f?(this.debug("    drop over source node prevented"),q=null):"before"===q&&f&&e===f.getNextSibling()?(this.debug("    drop after source node prevented"),q=null):"after"===q&&f&&e===f.getPrevSibling()?(this.debug("    drop before source node prevented"),q=null):"over"===q&&f&&f.parent===e&&f.isLastSibling()&&(this.debug("    drop last child over own parent prevented"),q=null)),h.helper.data("hitMode",q))),"before"===q||"after"===q||!t.autoExpandMS||e.hasChildren()===!1||e.expanded||t.dragExpand&&t.dragExpand(e,u)===!1||e.scheduleAction("expand",t.autoExpandMS),q&&t.dragOver&&(u.hitMode=q,v=t.dragOver(e,u)),j=v!==!1&&null!==q,t.smartRevert&&(i.options.revert=!j),this._local._setDndStatus(f,e,h.helper,q,j);break;case"drop":q=h.helper.data("hitMode"),q&&t.dragDrop&&(u.hitMode=q,t.dragDrop(e,u));break;case"leave":e.scheduleAction("cancel"),h.helper.data("enterResponse",null),h.helper.data("hitMode",null),this._local._setDndStatus(f,e,h.helper,"out",d),t.dragLeave&&t.dragLeave(e,u);break;case"stop":x.removeClass("fancytree-drag-source"),a(c).off(".fancytree-dnd"),t.dragStop&&t.dragStop(e,u);break;default:a.error("Unsupported drag event: "+b)}return v},_cancelDrag:function(){var b=a.ui.ddmanager.current;b&&b.cancel()}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.edit.min.js' */
!function(a,b,c,d){"use strict";var e=/Mac/.test(navigator.platform),f=a.ui.fancytree.escapeHtml,g=a.ui.fancytree.unescapeHtml;a.ui.fancytree._FancytreeNodeClass.prototype.editStart=function(){var b,d=this,e=this.tree,f=e.ext.edit,h=e.options.edit,i=a(".fancytree-title",d.span),j={node:d,tree:e,options:e.options,isNew:a(d[e.statusClassPropName]).hasClass("fancytree-edit-new"),orgTitle:d.title,input:null,dirty:!1};return h.beforeEdit.call(d,{type:"beforeEdit"},j)!==!1&&(a.ui.fancytree.assert(!f.currentNode,"recursive edit"),f.currentNode=this,f.eventData=j,e.widget._unbind(),a(c).on("mousedown.fancytree-edit",function(b){a(b.target).hasClass("fancytree-edit-input")||d.editEnd(!0,b)}),b=a("<input />",{"class":"fancytree-edit-input",type:"text",value:e.options.escapeTitles?j.orgTitle:g(j.orgTitle)}),f.eventData.input=b,null!=h.adjustWidthOfs&&b.width(i.width()+h.adjustWidthOfs),null!=h.inputCss&&b.css(h.inputCss),i.html(b),b.focus().change(function(a){b.addClass("fancytree-edit-dirty")}).keydown(function(b){switch(b.which){case a.ui.keyCode.ESCAPE:d.editEnd(!1,b);break;case a.ui.keyCode.ENTER:return d.editEnd(!0,b),!1}b.stopPropagation()}).blur(function(a){return d.editEnd(!0,a)}),void h.edit.call(d,{type:"edit"},j))},a.ui.fancytree._FancytreeNodeClass.prototype.editEnd=function(b,d){var e,g=this,h=this.tree,i=h.ext.edit,j=i.eventData,k=h.options.edit,l=a(".fancytree-title",g.span),m=l.find("input.fancytree-edit-input");return k.trim&&m.val(a.trim(m.val())),e=m.val(),j.dirty=e!==g.title,j.originalEvent=d,b===!1?j.save=!1:j.isNew?j.save=""!==e:j.save=j.dirty&&""!==e,k.beforeClose.call(g,{type:"beforeClose"},j)!==!1&&((!j.save||k.save.call(g,{type:"save"},j)!==!1)&&(m.removeClass("fancytree-edit-dirty").unbind(),a(c).off(".fancytree-edit"),j.save?(g.setTitle(h.options.escapeTitles?e:f(e)),g.setFocus()):j.isNew?(g.remove(),g=j.node=null,i.relatedNode.setFocus()):(g.renderTitle(),g.setFocus()),i.eventData=null,i.currentNode=null,i.relatedNode=null,h.widget._bind(),a(h.$container).focus(),j.input=null,k.close.call(g,{type:"close"},j),!0))},a.ui.fancytree._FancytreeNodeClass.prototype.editCreateNode=function(b,c){var d,e=this.tree,f=this;return b=b||"child",null==c?c={title:""}:"string"==typeof c?c={title:c}:a.ui.fancytree.assert(a.isPlainObject(c)),"child"!==b||this.isExpanded()||this.hasChildren()===!1?(d=this.addNode(c,b),d.match=!0,a(d[e.statusClassPropName]).removeClass("fancytree-hide").addClass("fancytree-match"),void d.makeVisible().done(function(){a(d[e.statusClassPropName]).addClass("fancytree-edit-new"),f.tree.ext.edit.relatedNode=f,d.editStart()})):void this.setExpanded().done(function(){f.editCreateNode(b,c)})},a.ui.fancytree._FancytreeClass.prototype.isEditing=function(){return this.ext.edit?this.ext.edit.currentNode:null},a.ui.fancytree._FancytreeNodeClass.prototype.isEditing=function(){return!!this.tree.ext.edit&&this.tree.ext.edit.currentNode===this},a.ui.fancytree.registerExtension({name:"edit",version:"2.21.0",options:{adjustWidthOfs:4,allowEmpty:!1,inputCss:{minWidth:"3em"},triggerStart:["f2","shift+click","mac+enter"],trim:!0,beforeClose:a.noop,beforeEdit:a.noop,close:a.noop,edit:a.noop,save:a.noop},currentNode:null,treeInit:function(a){this._superApply(arguments),this.$container.addClass("fancytree-ext-edit")},nodeClick:function(b){return a.inArray("shift+click",b.options.edit.triggerStart)>=0&&b.originalEvent.shiftKey?(b.node.editStart(),!1):this._superApply(arguments)},nodeDblclick:function(b){return a.inArray("dblclick",b.options.edit.triggerStart)>=0?(b.node.editStart(),!1):this._superApply(arguments)},nodeKeydown:function(b){switch(b.originalEvent.which){case 113:if(a.inArray("f2",b.options.edit.triggerStart)>=0)return b.node.editStart(),!1;break;case a.ui.keyCode.ENTER:if(a.inArray("mac+enter",b.options.edit.triggerStart)>=0&&e)return b.node.editStart(),!1}return this._superApply(arguments)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.filter.min.js' */
!function(a,b,c,d){"use strict";function e(a){return(a+"").replace(/([.?*+\^\$\[\]\\(){}|-])/g,"\\$1")}function f(b){return b.indexOf(">")>=0?a("<div/>").html(b).text():b}var g="__not_found__",h=a.ui.fancytree.escapeHtml;a.ui.fancytree._FancytreeClass.prototype._applyFilterImpl=function(b,c,d){var i,j,k,l,m=0,n=this.options,o=n.escapeTitles,p=n.autoCollapse,q=a.extend({},n.filter,d),r="hide"===q.mode,s=!!q.leavesOnly&&!c;return"string"==typeof b&&(i=q.fuzzy?b.split("").reduce(function(a,b){return a+"[^"+b+"]*"+b}):e(b),k=new RegExp(".*"+i+".*","i"),l=new RegExp(e(b),"gi"),b=function(a){var b,c=o?a.title:f(a.title),d=!!k.test(c);return d&&q.highlight&&(b=o?h(a.title):c,a.titleWithHighlight=b.replace(l,function(a){return"<mark>"+a+"</mark>"})),d}),this.enableFilter=!0,this.lastFilterArgs=arguments,this.$div.addClass("fancytree-ext-filter"),r?this.$div.addClass("fancytree-ext-filter-hide"):this.$div.addClass("fancytree-ext-filter-dimm"),this.$div.toggleClass("fancytree-ext-filter-hide-expanders",!!q.hideExpanders),this.visit(function(a){delete a.match,delete a.titleWithHighlight,a.subMatchCount=0}),j=this.getRootNode()._findDirectChild(g),j&&j.remove(),n.autoCollapse=!1,this.visit(function(a){if(!s||null==a.children){var d=b(a),e=!1;if("skip"===d)return a.visit(function(a){a.match=!1},!0),"skip";d||!c&&"branch"!==d||!a.parent.match||(d=!0,e=!0),d&&(m++,a.match=!0,a.visitParents(function(a){a.subMatchCount+=1,!q.autoExpand||e||a.expanded||(a.setExpanded(!0,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),a._filterAutoExpanded=!0)}))}}),n.autoCollapse=p,0===m&&q.nodata&&r&&(j=q.nodata,a.isFunction(j)&&(j=j()),j===!0?j={}:"string"==typeof j&&(j={title:j}),j=a.extend({statusNodeType:"nodata",key:g,title:this.options.strings.noData},j),this.getRootNode().addNode(j).match=!0),this.render(),m},a.ui.fancytree._FancytreeClass.prototype.filterNodes=function(a,b){return"boolean"==typeof b&&(b={leavesOnly:b},this.warn("Fancytree.filterNodes() leavesOnly option is deprecated since 2.9.0 / 2015-04-19. Use opts.leavesOnly instead.")),this._applyFilterImpl(a,!1,b)},a.ui.fancytree._FancytreeClass.prototype.applyFilter=function(a){return this.warn("Fancytree.applyFilter() is deprecated since 2.1.0 / 2014-05-29. Use .filterNodes() instead."),this.filterNodes.apply(this,arguments)},a.ui.fancytree._FancytreeClass.prototype.filterBranches=function(a,b){return this._applyFilterImpl(a,!0,b)},a.ui.fancytree._FancytreeClass.prototype.clearFilter=function(){var b,c=this.getRootNode()._findDirectChild(g),d=this.options.escapeTitles,e=this.options.enhanceTitle;c&&c.remove(),this.visit(function(c){c.match&&(b=a(">span.fancytree-title",c.span),d?b.text(c.title):b.html(c.title),e&&e({type:"enhanceTitle"},{node:c,$title:b})),delete c.match,delete c.subMatchCount,delete c.titleWithHighlight,c.$subMatchBadge&&(c.$subMatchBadge.remove(),delete c.$subMatchBadge),c._filterAutoExpanded&&c.expanded&&c.setExpanded(!1,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),delete c._filterAutoExpanded}),this.enableFilter=!1,this.lastFilterArgs=null,this.$div.removeClass("fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide"),this.render()},a.ui.fancytree._FancytreeClass.prototype.isFilterActive=function(){return!!this.enableFilter},a.ui.fancytree._FancytreeNodeClass.prototype.isMatched=function(){return!(this.tree.enableFilter&&!this.match)},a.ui.fancytree.registerExtension({name:"filter",version:"2.21.0",options:{autoApply:!0,autoExpand:!1,counter:!0,fuzzy:!1,hideExpandedCounter:!0,hideExpanders:!1,highlight:!0,leavesOnly:!1,nodata:!0,mode:"dimm"},nodeLoadChildren:function(a,b){return this._superApply(arguments).done(function(){a.tree.enableFilter&&a.tree.lastFilterArgs&&a.options.filter.autoApply&&a.tree._applyFilterImpl.apply(a.tree,a.tree.lastFilterArgs)})},nodeSetExpanded:function(a,b,c){return delete a.node._filterAutoExpanded,!b&&a.options.filter.hideExpandedCounter&&a.node.$subMatchBadge&&a.node.$subMatchBadge.show(),this._superApply(arguments)},nodeRenderStatus:function(b){var c,d=b.node,e=b.tree,f=b.options.filter,g=a("span.fancytree-title",d.span),h=a(d[e.statusClassPropName]),i=b.options.enhanceTitle,j=b.options.escapeTitles;return c=this._superApply(arguments),h.length&&e.enableFilter?(h.toggleClass("fancytree-match",!!d.match).toggleClass("fancytree-submatch",!!d.subMatchCount).toggleClass("fancytree-hide",!(d.match||d.subMatchCount)),!f.counter||!d.subMatchCount||d.isExpanded()&&f.hideExpandedCounter?d.$subMatchBadge&&d.$subMatchBadge.hide():(d.$subMatchBadge||(d.$subMatchBadge=a("<span class='fancytree-childcounter'/>"),a("span.fancytree-icon, span.fancytree-custom-icon",d.span).append(d.$subMatchBadge)),d.$subMatchBadge.show().text(d.subMatchCount)),d.isEditing&&d.isEditing.call(d)||(d.titleWithHighlight?g.html(d.titleWithHighlight):j?g.text(d.title):g.html(d.title),i&&i({type:"enhanceTitle"},{node:d,$title:g})),c):c}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.glyph.min.js' */
!function(a,b,c,d){"use strict";function e(a,b){return a.map[b]}a.ui.fancytree.registerExtension({name:"glyph",version:"2.21.0",options:{map:{checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",nodata:"icon-meh",noExpander:"",dragHelper:"icon-caret-right",dropMarker:"icon-caret-right",doc:"icon-file-alt",docOpen:"icon-file-alt",loading:"icon-refresh icon-spin",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"}},treeInit:function(a){var b=a.tree;this._superApply(arguments),b.$container.addClass("fancytree-ext-glyph")},nodeRenderStatus:function(b){var c,d,f,g=b.node,h=a(g.span),i=b.options.glyph,j=i.map;return d=this._superApply(arguments),g.isRoot()?d:(f=h.children("span.fancytree-expander").get(0),f&&(c=g.expanded&&g.hasChildren()?"expanderOpen":g.isUndefined()?"expanderLazy":g.hasChildren()?"expanderClosed":"noExpander",f.className="fancytree-expander "+j[c]),f=g.tr?a("td",g.tr).find("span.fancytree-checkbox").get(0):h.children("span.fancytree-checkbox").get(0),f&&(c=g.selected?"checkboxSelected":g.partsel?"checkboxUnknown":"checkbox",f.className="fancytree-checkbox "+j[c]),f=h.children("span.fancytree-icon").get(0),f&&(c=g.statusNodeType?e(i,g.statusNodeType):g.folder?g.expanded&&g.hasChildren()?e(i,"folderOpen"):e(i,"folder"):g.expanded?e(i,"docOpen"):e(i,"doc"),f.className="fancytree-icon "+c),d)},nodeSetStatus:function(b,c,d,f){var g,h,i=b.options.glyph,j=b.node;return g=this._superApply(arguments),"error"!==c&&"loading"!==c&&"nodata"!==c||(j.parent?(h=a("span.fancytree-expander",j.span).get(0),h&&(h.className="fancytree-expander "+e(i,c))):(h=a(".fancytree-statusnode-"+c,j[this.nodeContainerAttrName]).find("span.fancytree-icon").get(0),h&&(h.className="fancytree-icon "+e(i,c)))),g}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.gridnav.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){var d,e=c.get(0),f=0;return b.children().each(function(){return this!==e&&(d=a(this).prop("colspan"),void(f+=d?d:1))}),f}function f(b,c){var d,e=null,f=0;return b.children().each(function(){return f>=c?(e=a(this),!1):(d=a(this).prop("colspan"),void(f+=d?d:1))}),e}function g(a,b){var c,d,g=a.closest("td"),i=null;switch(b){case h.LEFT:i=g.prev();break;case h.RIGHT:i=g.next();break;case h.UP:case h.DOWN:for(c=g.parent(),d=e(c,g);;){if(c=b===h.UP?c.prev():c.next(),!c.length)break;if(!c.is(":hidden")&&(i=f(c,d),i&&i.find(":input,a").length))break}}return i}var h=a.ui.keyCode,i={text:[h.UP,h.DOWN],checkbox:[h.UP,h.DOWN,h.LEFT,h.RIGHT],link:[h.UP,h.DOWN,h.LEFT,h.RIGHT],radiobutton:[h.UP,h.DOWN,h.LEFT,h.RIGHT],"select-one":[h.LEFT,h.RIGHT],"select-multiple":[h.LEFT,h.RIGHT]};a.ui.fancytree.registerExtension({name:"gridnav",version:"2.21.0",options:{autofocusInput:!1,handleCursorKeys:!0},treeInit:function(b){this._requireExtension("table",!0,!0),this._superApply(arguments),this.$container.addClass("fancytree-ext-gridnav"),this.$container.on("focusin",function(c){var d,e=a.ui.fancytree.getNode(c.target);e&&!e.isActive()&&(d=b.tree._makeHookContext(e,c),b.tree._callHook("nodeSetActive",d,!0))})},nodeSetActive:function(b,c){var d,e=b.options.gridnav,f=b.node,g=b.originalEvent||{},h=a(g.target).is(":input");c=c!==!1,this._superApply(arguments),c&&(b.options.titlesTabbable?(h||(a(f.span).find("span.fancytree-title").focus(),f.setFocus()),b.tree.$container.attr("tabindex","-1")):e.autofocusInput&&!h&&(d=a(f.tr||f.span),d.find(":input:enabled:first").focus()))},nodeKeydown:function(b){var c,d,e,f=b.options.gridnav,h=b.originalEvent,j=a(h.target);return j.is(":input:enabled")?c=j.prop("type"):j.is("a")&&(c="link"),c&&f.handleCursorKeys?(d=i[c],!(d&&a.inArray(h.which,d)>=0&&(e=g(j,h.which),e&&e.length))||(e.find(":input:enabled,a").focus(),!1)):this._superApply(arguments)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.persist.min.js' */
!function(a,b,c,d){"use strict";function e(b,c,d,f,g){var h,i,j,l,m=!1,n=[],o=[];for(d=d||[],g=g||a.Deferred(),h=0,j=d.length;h<j;h++)i=d[h],l=b.getNodeByKey(i),l?f&&l.isUndefined()?(m=!0,b.debug("_loadLazyNodes: "+l+" is lazy: loading..."),"expand"===f?n.push(l.setExpanded()):n.push(l.load())):(b.debug("_loadLazyNodes: "+l+" already loaded."),l.setExpanded()):(o.push(i),b.debug("_loadLazyNodes: "+l+" was not yet found."));return a.when.apply(a,n).always(function(){if(m&&o.length>0)e(b,c,o,f,g);else{if(o.length)for(b.warn("_loadLazyNodes: could not load those keys: ",o),h=0,j=o.length;h<j;h++)i=d[h],c._appendKey(k,d[h],!1);g.resolve()}}),g}var f,g,h,i=a.ui.fancytree.assert,j="active",k="expanded",l="focus",m="selected";"function"==typeof Cookies?(h=Cookies.set,f=Cookies.get,g=Cookies.remove):(h=f=a.cookie,g=a.removeCookie),a.ui.fancytree._FancytreeClass.prototype.clearCookies=function(a){var b=this.ext.persist,c=b.cookiePrefix;a=a||"active expanded focus selected",a.indexOf(j)>=0&&b._data(c+j,null),a.indexOf(k)>=0&&b._data(c+k,null),a.indexOf(l)>=0&&b._data(c+l,null),a.indexOf(m)>=0&&b._data(c+m,null)},a.ui.fancytree._FancytreeClass.prototype.getPersistData=function(){var a=this.ext.persist,b=a.cookiePrefix,c=a.cookieDelimiter,d={};return d[j]=a._data(b+j),d[k]=(a._data(b+k)||"").split(c),d[m]=(a._data(b+m)||"").split(c),d[l]=a._data(b+l),d},a.ui.fancytree.registerExtension({name:"persist",version:"2.21.0",options:{cookieDelimiter:"~",cookiePrefix:d,cookie:{raw:!1,expires:"",path:"",domain:"",secure:!1},expandLazy:!1,fireActivate:!0,overrideSource:!0,store:"auto",types:"active expanded focus selected"},_data:function(a,b){var c=this._local.localStorage;return b===d?c?c.getItem(a):f(a):void(null===b?c?c.removeItem(a):g(a):c?c.setItem(a,b):h(a,b,this.options.persist.cookie))},_appendKey:function(b,c,d){c=""+c;var e=this._local,f=this.options.persist,g=f.cookieDelimiter,h=e.cookiePrefix+b,i=e._data(h),j=i?i.split(g):[],k=a.inArray(c,j);k>=0&&j.splice(k,1),d&&j.push(c),e._data(h,j.join(g))},treeInit:function(c){var g=c.tree,h=c.options,n=this._local,o=this.options.persist;return i("auto"!==o.store&&"cookie"!==o.store||f,"Missing required plugin for 'persist' extension: js.cookie.js or jquery.cookie.js"),n.cookiePrefix=o.cookiePrefix||"fancytree-"+g._id+"-",n.storeActive=o.types.indexOf(j)>=0,n.storeExpanded=o.types.indexOf(k)>=0,n.storeSelected=o.types.indexOf(m)>=0,n.storeFocus=o.types.indexOf(l)>=0,"cookie"!==o.store&&b.localStorage?n.localStorage="local"===o.store?b.localStorage:b.sessionStorage:n.localStorage=null,g.$div.bind("fancytreeinit",function(b){if(g._triggerTreeEvent("beforeRestore",null,{})!==!1){var c,f,i,p,q,r=n._data(n.cookiePrefix+l),s=o.fireActivate===!1;c=n._data(n.cookiePrefix+k),p=c&&c.split(o.cookieDelimiter),f=n.storeExpanded?e(g,n,p,!!o.expandLazy&&"expand",null):(new a.Deferred).resolve(),f.done(function(){if(n.storeSelected){if(c=n._data(n.cookiePrefix+m))for(p=c.split(o.cookieDelimiter),i=0;i<p.length;i++)q=g.getNodeByKey(p[i]),q?(q.selected===d||o.overrideSource&&q.selected===!1)&&(q.selected=!0,q.renderStatus()):n._appendKey(m,p[i],!1);3===g.options.selectMode&&g.visit(function(a){if(a.selected)return a.fixSelection3AfterClick(),"skip"})}n.storeActive&&(c=n._data(n.cookiePrefix+j),!c||!h.persist.overrideSource&&g.activeNode||(q=g.getNodeByKey(c),q&&(q.debug("persist: set active",c),q.setActive(!0,{noFocus:!0,noEvents:s})))),n.storeFocus&&r&&(q=g.getNodeByKey(r),q&&(g.options.titlesTabbable?a(q.span).find(".fancytree-title").focus():a(g.$container).focus())),g._triggerTreeEvent("restore",null,{})})}}),this._superApply(arguments)},nodeSetActive:function(a,b,c){var d,e=this._local;return b=b!==!1,d=this._superApply(arguments),e.storeActive&&e._data(e.cookiePrefix+j,this.activeNode?this.activeNode.key:null),d},nodeSetExpanded:function(a,b,c){var d,e=a.node,f=this._local;return b=b!==!1,d=this._superApply(arguments),f.storeExpanded&&f._appendKey(k,e.key,b),d},nodeSetFocus:function(a,b){var c,d=this._local;return b=b!==!1,c=this._superApply(arguments),d.storeFocus&&d._data(d.cookiePrefix+l,this.focusNode?this.focusNode.key:null),c},nodeSetSelected:function(b,c){var d,e,f=b.tree,g=b.node,h=this._local;return c=c!==!1,d=this._superApply(arguments),h.storeSelected&&(3===f.options.selectMode?(e=a.map(f.getSelectedNodes(!0),function(a){return a.key}),e=e.join(b.options.persist.cookieDelimiter),h._data(h.cookiePrefix+m,e)):h._appendKey(m,g.key,g.selected)),d}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.table.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){c=c||"",b||a.error("Assertion failed "+c)}function f(a,b){a.insertBefore(b,a.firstChild)}function g(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function h(a,b){a.visit(function(a){var c=a.tr;if(c&&(c.style.display=a.hide||!b?"none":""),!a.expanded)return"skip"})}function i(b){var c,d,f,g=b.parent,h=g?g.children:null;if(h&&h.length>1&&h[0]!==b)for(c=a.inArray(b,h),f=h[c-1],e(f.tr);f.children&&(d=f.children[f.children.length-1],d.tr);)f=d;else f=g;return f}a.ui.fancytree.registerExtension({name:"table",version:"2.21.0",options:{checkboxColumnIdx:null,indentation:16,nodeColumnIdx:0},treeInit:function(b){var d,f,g,h,i,j=b.tree,k=b.options,l=k.table,m=j.widget.element;if(null!=l.customStatus&&(null!=k.renderStatusColumns?a.error("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' only instead."):(j.warn("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' instead."),k.renderStatusColumns=l.customStatus)),k.renderStatusColumns&&k.renderStatusColumns===!0&&(k.renderStatusColumns=k.renderColumns),m.addClass("fancytree-container fancytree-ext-table"),j.tbody=m.find(">tbody")[0],i=a(j.tbody),f=a("thead >tr:last >th",m).length,h=i.children("tr:first"),h.length)g=h.children("td").length,f&&g!==f&&(j.warn("Column count mismatch between thead ("+f+") and tbody ("+g+"): using tbody."),f=g),h=h.clone();else for(e(f>=1,"Need either <thead> or <tbody> with <td> elements to determine column count."),h=a("<tr />"),d=0;d<f;d++)h.append("<td />");h.find(">td").eq(l.nodeColumnIdx).html("<span class='fancytree-node' />"),k.aria&&(h.attr("role","row"),h.find("td").attr("role","gridcell")),j.rowFragment=c.createDocumentFragment(),j.rowFragment.appendChild(h.get(0)),i.empty(),j.statusClassPropName="tr",j.ariaPropName="tr",this.nodeContainerAttrName="tr",j.$container=m,this._superApply(arguments),a(j.rootNode.ul).remove(),j.rootNode.ul=null,this.$container.attr("tabindex",k.tabindex),k.aria&&j.$container.attr("role","treegrid").attr("aria-readonly",!0)},nodeRemoveChildMarkup:function(b){var c=b.node;c.visit(function(b){b.tr&&(a(b.tr).remove(),b.tr=null)})},nodeRemoveMarkup:function(b){var c=b.node;c.tr&&(a(c.tr).remove(),c.tr=null),this.nodeRemoveChildMarkup(b)},nodeRender:function(b,c,d,j,k){var l,m,n,o,p,q,r,s,t=b.tree,u=b.node,v=b.options,w=!u.parent;if(t._enableUpdate!==!1){if(k||(b.hasCollapsedParents=u.parent&&!u.parent.expanded),!w)if(u.tr&&c&&this.nodeRemoveMarkup(b),u.tr)c?this.nodeRenderTitle(b):this.nodeRenderStatus(b);else{if(b.hasCollapsedParents&&!d)return void u.debug("nodeRender ignored due to unrendered parent");p=t.rowFragment.firstChild.cloneNode(!0),q=i(u),e(q),j===!0&&k?p.style.display="none":d&&b.hasCollapsedParents&&(p.style.display="none"),q.tr?g(q.tr,p):(e(!q.parent,"prev. row must have a tr, or be system root"),f(t.tbody,p)),u.tr=p,u.key&&v.generateIds&&(u.tr.id=v.idPrefix+u.key),u.tr.ftnode=u,v.aria&&a(u.tr).attr("aria-labelledby","ftal_"+u.key),u.span=a("span.fancytree-node",u.tr).get(0),this.nodeRenderTitle(b),v.createNode&&v.createNode.call(t,{type:"createNode"},b)}if(v.renderNode&&v.renderNode.call(t,{type:"renderNode"},b),l=u.children,l&&(w||d||u.expanded))for(n=0,o=l.length;n<o;n++)s=a.extend({},b,{node:l[n]}),s.hasCollapsedParents=s.hasCollapsedParents||!u.expanded,this.nodeRender(s,c,d,j,!0);l&&!k&&(r=u.tr||null,m=t.tbody.firstChild,u.visit(function(a){if(a.tr){if(a.parent.expanded||"none"===a.tr.style.display||(a.tr.style.display="none",h(a,!1)),a.tr.previousSibling!==r){u.debug("_fixOrder: mismatch at node: "+a);var b=r?r.nextSibling:m;t.tbody.insertBefore(a.tr,b)}r=a.tr}}))}},nodeRenderTitle:function(b,c){var d,e,f=b.node,g=b.options,h=f.isStatusNode();return e=this._superApply(arguments),f.isRootNode()?e:(g.checkbox&&!h&&null!=g.table.checkboxColumnIdx&&(d=a("span.fancytree-checkbox",f.span),a(f.tr).find("td").eq(+g.table.checkboxColumnIdx).html(d)),this.nodeRenderStatus(b),h?g.renderStatusColumns&&g.renderStatusColumns.call(b.tree,{type:"renderStatusColumns"},b):g.renderColumns&&g.renderColumns.call(b.tree,{type:"renderColumns"},b),e)},nodeRenderStatus:function(b){var c,d=b.node,e=b.options;this._superApply(arguments),a(d.tr).removeClass("fancytree-node"),c=(d.getLevel()-1)*e.table.indentation,a(d.span).css({paddingLeft:c+"px"})},nodeSetExpanded:function(b,c,d){function e(a){h(b.node,c),a?c&&b.options.autoScroll&&!d.noAnimation&&b.node.hasChildren()?b.node.getLastChild().scrollIntoView(!0,{topNode:b.node}).always(function(){d.noEvents||b.tree._triggerNodeEvent(c?"expand":"collapse",b),f.resolveWith(b.node)}):(d.noEvents||b.tree._triggerNodeEvent(c?"expand":"collapse",b),f.resolveWith(b.node)):(d.noEvents||b.tree._triggerNodeEvent(c?"expand":"collapse",b),f.rejectWith(b.node))}if(c=c!==!1,b.node.expanded&&c||!b.node.expanded&&!c)return this._superApply(arguments);var f=new a.Deferred,g=a.extend({},d,{noEvents:!0,noAnimation:!0});return d=d||{},this._super(b,c,g).done(function(){e(!0)}).fail(function(){e(!1)}),f.promise()},nodeSetStatus:function(b,c,d,e){if("ok"===c){var f=b.node,g=f.children?f.children[0]:null;g&&g.isStatusNode()&&a(g.tr).remove()}return this._superApply(arguments)},treeClear:function(a){return this.nodeRemoveChildMarkup(this._makeHookContext(this.rootNode)),this._superApply(arguments)},treeDestroy:function(a){this.$container.find("tbody").empty(),this.$source&&this.$source.removeClass("ui-helper-hidden")}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.themeroller.min.js' */
!function(a,b,c,d){"use strict";a.ui.fancytree.registerExtension({name:"themeroller",version:"2.21.0",options:{activeClass:"ui-state-active",addClass:"ui-corner-all",focusClass:"ui-state-focus",hoverClass:"ui-state-hover",selectedClass:"ui-state-highlight"},treeInit:function(b){var c=b.widget.element,d=b.options.themeroller;this._superApply(arguments),"TABLE"===c[0].nodeName?(c.addClass("ui-widget ui-corner-all"),c.find(">thead tr").addClass("ui-widget-header"),c.find(">tbody").addClass("ui-widget-conent")):c.addClass("ui-widget ui-widget-content ui-corner-all"),c.delegate(".fancytree-node","mouseenter mouseleave",function(b){var c=a.ui.fancytree.getNode(b.target),e="mouseenter"===b.type;a(c.tr?c.tr:c.span).toggleClass(d.hoverClass+" "+d.addClass,e)})},treeDestroy:function(a){this._superApply(arguments),a.widget.element.removeClass("ui-widget ui-widget-content ui-corner-all")},nodeRenderStatus:function(b){var c={},d=b.node,e=a(d.tr?d.tr:d.span),f=b.options.themeroller;this._superApply(arguments),c[f.activeClass]=!1,c[f.focusClass]=!1,c[f.selectedClass]=!1,d.isActive()&&(c[f.activeClass]=!0),d.hasFocus()&&(c[f.focusClass]=!0),d.isSelected()&&!d.isActive()&&(c[f.selectedClass]=!0),e.toggleClass(f.activeClass,c[f.activeClass]),e.toggleClass(f.focusClass,c[f.focusClass]),e.toggleClass(f.selectedClass,c[f.selectedClass]),e.addClass(f.addClass)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.wide.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){b="fancytree-style-"+b;var d=a("#"+b);if(!c)return d.remove(),null;d.length||(d=a("<style />").attr("id",b).addClass("fancytree-style").prop("type","text/css").appendTo("head"));try{d.html(c)}catch(e){d[0].styleSheet.cssText=c}return d}function f(a,b,c,d,e){var f,g="#"+a+" span.fancytree-level-",h=[];for(f=0;f<b;f++)h.push(g+(f+1)+" span.fancytree-title { padding-left: "+(f*c+d)+e+"; }");return h.push("#"+a+" div.ui-effects-wrapper ul li span.fancytree-title { padding-left: 3px; position: static; width: auto; }"),h.join("\n")}var g=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;a.ui.fancytree.registerExtension({name:"wide",version:"2.21.0",options:{iconWidth:null,iconSpacing:null,levelOfs:null},treeCreate:function(b){this._superApply(arguments),this.$container.addClass("fancytree-ext-wide");var c,d,h,i,j,k=b.options.wide,l=a("<li id='fancytreeTemp'><span class='fancytree-node'><span class='fancytree-icon' /><span class='fancytree-title' /></span><ul />").appendTo(b.tree.$container),m=l.find(".fancytree-icon"),n=l.find("ul"),o=k.iconSpacing||m.css("margin-left"),p=k.iconWidth||m.css("width"),q=k.levelOfs||n.css("padding-left");l.remove(),h=o.match(g)[2],o=parseFloat(o,10),i=p.match(g)[2],p=parseFloat(p,10),j=q.match(g)[2],h===i&&j===i||a.error("iconWidth, iconSpacing, and levelOfs must have the same css measure unit"),this._local.measureUnit=i,this._local.levelOfs=parseFloat(q),this._local.lineOfs=(1+(b.options.checkbox?1:0)+(b.options.icon===!1?0:1))*(p+o)+o,this._local.maxDepth=10,c=this.$container.uniqueId().attr("id"),d=f(c,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.measureUnit),e(c,d)},treeDestroy:function(a){return e(this.$container.attr("id"),null),this._superApply(arguments)},nodeRenderStatus:function(b){var c,d,g,h=b.node,i=h.getLevel();return g=this._superApply(arguments),i>this._local.maxDepth&&(c=this.$container.attr("id"),this._local.maxDepth*=2,h.debug("Define global ext-wide css up to level "+this._local.maxDepth),d=f(c,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.measureUnit),e(c,d)),a(h.span).addClass("fancytree-level-"+i),g}})}(jQuery,window,document);
}));

/**!
 * jquery.fancytree.contextmenu.js
 * 3rd party jQuery Context menu extension for jQuery Fancytree
 *
 * Authors: Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://medialize.github.com/jQuery-contextMenu/
 *
 * Copyright (c) 2012, Martin Wendt (http://wwWendt.de)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://code.google.com/p/fancytree/wiki/LicenseInfe
 */
(function($, document) {
	"use strict";

	var initContextMenu = function(tree, selector, menu, actions) {
		tree.$container.on("mousedown.contextMenu", function(event) {
			var node = $.ui.fancytree.getNode(event);

			if(node) {
        $.contextMenu("destroy", "." + selector);

				node.setFocus(true);
				node.setActive(true);

				$.contextMenu({
					selector: "." + selector,
					build: function($trigger, e) {
						node = $.ui.fancytree.getNode($trigger);

						var menuItems = { };
						if($.isFunction(menu)) {
							menuItems = menu(node);
						} else if($.isPlainObject(menu)) {
							menuItems = menu;
						}

						return {
							callback: function(action, options) {
								if($.isFunction(actions)) {
									actions(node, action, options);
								} else if($.isPlainObject(actions)) {
									if(actions.hasOwnProperty(action) && $.isFunction(actions[action])) {
										actions[action](node, options);
									}
								}
							},
							items: menuItems
						};
					}
				});
			}
		});
	};

	$.ui.fancytree.registerExtension({
		name: "contextMenu",
		version: "1.0",
		contextMenu: {
      selector: "fancytree-title",
			menu: {},
			actions: {}
		},
		treeInit: function(ctx) {
			this._superApply(arguments);
			initContextMenu(ctx.tree,
                      ctx.options.contextMenu.selector || "fancytree-title",
                      ctx.options.contextMenu.menu,
                      ctx.options.contextMenu.actions);
		}
	});
}(jQuery, document));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5mYW5jeXRyZWUtYWxsLm1pbi5qcyIsImpxdWVyeS5mYW5jeXRyZWUuY29udGV4dE1lbnUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJ0cmVlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIGpRdWVyeSBGYW5jeXRyZWUgUGx1Z2luIC0gMi4yMS4wIC0gMjAxNy0wMS0xNVQxNzoyMToyOFpcbiAgKiBodHRwczovL2dpdGh1Yi5jb20vbWFyMTAvZmFuY3l0cmVlXG4gICogQ29weXJpZ2h0IChjKSAyMDE3IE1hcnRpbiBXZW5kdDsgTGljZW5zZWQgTUlUICovXG4oZnVuY3Rpb24oIGZhY3RvcnkgKSB7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cdFx0ZGVmaW5lKCBbIFwianF1ZXJ5XCIgXSwgZmFjdG9yeSApO1xuXHR9IGVsc2Uge1xuXHRcdGZhY3RvcnkoIGpRdWVyeSApO1xuXHR9XG59KGZ1bmN0aW9uKCAkICkge1xuXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGMpe2J8fChjPWM/XCI6IFwiK2M6XCJcIixhLmVycm9yKFwiRmFuY3l0cmVlIGFzc2VydGlvbiBmYWlsZWRcIitjKSl9ZnVuY3Rpb24gZihhLGMpe3ZhciBkLGUsZj1iLmNvbnNvbGU/Yi5jb25zb2xlW2FdOm51bGw7aWYoZil0cnl7Zi5hcHBseShiLmNvbnNvbGUsYyl9Y2F0Y2goZyl7Zm9yKGU9XCJcIixkPTA7ZDxjLmxlbmd0aDtkKyspZSs9Y1tkXTtmKGUpfX1mdW5jdGlvbiBnKGEpe3JldHVybiEoIWEudHJlZXx8YS5zdGF0dXNOb2RlVHlwZT09PWQpfWZ1bmN0aW9uIGgoYixjLGQsZSl7dmFyIGYsZyxoLGk9YS5tYXAoYS50cmltKGIpLnNwbGl0KFwiLlwiKSxmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9KSxqPWEubWFwKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9KTtmb3IoZj0wO2Y8ai5sZW5ndGg7ZisrKWlmKGc9aVtmXXx8MCxoPWpbZl18fDAsZyE9PWgpcmV0dXJuIGc+aDtyZXR1cm4hMH1mdW5jdGlvbiBpKGEsYixjLGQsZSl7dmFyIGY9ZnVuY3Rpb24oKXt2YXIgYz1iW2FdLGY9ZFthXSxnPWIuZXh0W2VdLGg9ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShiLGFyZ3VtZW50cyl9LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuYXBwbHkoYixhKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9Yi5fbG9jYWwsYz1iLl9zdXBlcixkPWIuX3N1cGVyQXBwbHk7dHJ5e3JldHVybiBiLl9sb2NhbD1nLGIuX3N1cGVyPWgsYi5fc3VwZXJBcHBseT1pLGYuYXBwbHkoYixhcmd1bWVudHMpfWZpbmFsbHl7Yi5fbG9jYWw9YSxiLl9zdXBlcj1jLGIuX3N1cGVyQXBwbHk9ZH19fSgpO3JldHVybiBmfWZ1bmN0aW9uIGooYixjLGQsZSl7Zm9yKHZhciBmIGluIGQpXCJmdW5jdGlvblwiPT10eXBlb2YgZFtmXT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBiW2ZdP2JbZl09aShmLGIsYyxkLGUpOlwiX1wiPT09Zi5jaGFyQXQoMCk/Yi5leHRbZV1bZl09aShmLGIsYyxkLGUpOmEuZXJyb3IoXCJDb3VsZCBub3Qgb3ZlcnJpZGUgdHJlZS5cIitmK1wiLiBVc2UgcHJlZml4ICdfJyB0byBjcmVhdGUgdHJlZS5cIitlK1wiLl9cIitmKTpcIm9wdGlvbnNcIiE9PWYmJihiLmV4dFtlXVtmXT1kW2ZdKX1mdW5jdGlvbiBrKGIsYyl7cmV0dXJuIGI9PT1kP2EuRGVmZXJyZWQoZnVuY3Rpb24oKXt0aGlzLnJlc29sdmUoKX0pLnByb21pc2UoKTphLkRlZmVycmVkKGZ1bmN0aW9uKCl7dGhpcy5yZXNvbHZlV2l0aChiLGMpfSkucHJvbWlzZSgpfWZ1bmN0aW9uIGwoYixjKXtyZXR1cm4gYj09PWQ/YS5EZWZlcnJlZChmdW5jdGlvbigpe3RoaXMucmVqZWN0KCl9KS5wcm9taXNlKCk6YS5EZWZlcnJlZChmdW5jdGlvbigpe3RoaXMucmVqZWN0V2l0aChiLGMpfSkucHJvbWlzZSgpfWZ1bmN0aW9uIG0oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthLnJlc29sdmVXaXRoKGIpfX1mdW5jdGlvbiBuKGIpe3ZhciBjPWEuZXh0ZW5kKHt9LGIuZGF0YSgpKSxkPWMuanNvbjtyZXR1cm4gZGVsZXRlIGMuZmFuY3l0cmVlLGRlbGV0ZSBjLnVpRmFuY3l0cmVlLGQmJihkZWxldGUgYy5qc29uLGM9YS5leHRlbmQoYyxkKSksY31mdW5jdGlvbiBvKGEpe3JldHVybihcIlwiK2EpLnJlcGxhY2UoeSxmdW5jdGlvbihhKXtyZXR1cm4gQlthXX0pfWZ1bmN0aW9uIHAoYSl7cmV0dXJuKFwiXCIrYSkucmVwbGFjZSh6LGZ1bmN0aW9uKGEpe3JldHVybiBCW2FdfSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gYT1hLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7cmV0dXJuIGIudGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGEpPj0wfX1mdW5jdGlvbiByKGEpe3ZhciBiPW5ldyBSZWdFeHAoXCJeXCIrYSxcImlcIik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoYS50aXRsZSl9fWZ1bmN0aW9uIHMoYixjKXt2YXIgZCxmLGcsaDtmb3IodGhpcy5wYXJlbnQ9Yix0aGlzLnRyZWU9Yi50cmVlLHRoaXMudWw9bnVsbCx0aGlzLmxpPW51bGwsdGhpcy5zdGF0dXNOb2RlVHlwZT1udWxsLHRoaXMuX2lzTG9hZGluZz0hMSx0aGlzLl9lcnJvcj1udWxsLHRoaXMuZGF0YT17fSxkPTAsZj1ILmxlbmd0aDtkPGY7ZCsrKWc9SFtkXSx0aGlzW2ddPWNbZ107Yy5kYXRhJiZhLmV4dGVuZCh0aGlzLmRhdGEsYy5kYXRhKTtmb3IoZyBpbiBjKUlbZ118fGEuaXNGdW5jdGlvbihjW2ddKXx8S1tnXXx8KHRoaXMuZGF0YVtnXT1jW2ddKTtudWxsPT10aGlzLmtleT90aGlzLnRyZWUub3B0aW9ucy5kZWZhdWx0S2V5Pyh0aGlzLmtleT10aGlzLnRyZWUub3B0aW9ucy5kZWZhdWx0S2V5KHRoaXMpLGUodGhpcy5rZXksXCJkZWZhdWx0S2V5KCkgbXVzdCByZXR1cm4gYSB1bmlxdWUga2V5XCIpKTp0aGlzLmtleT1cIl9cIit3Ll9uZXh0Tm9kZUtleSsrOnRoaXMua2V5PVwiXCIrdGhpcy5rZXksYy5hY3RpdmUmJihlKG51bGw9PT10aGlzLnRyZWUuYWN0aXZlTm9kZSxcIm9ubHkgb25lIGFjdGl2ZSBub2RlIGFsbG93ZWRcIiksdGhpcy50cmVlLmFjdGl2ZU5vZGU9dGhpcyksYy5zZWxlY3RlZCYmKHRoaXMudHJlZS5sYXN0U2VsZWN0ZWROb2RlPXRoaXMpLGg9Yy5jaGlsZHJlbixoP2gubGVuZ3RoP3RoaXMuX3NldENoaWxkcmVuKGgpOnRoaXMuY2hpbGRyZW49dGhpcy5sYXp5P1tdOm51bGw6dGhpcy5jaGlsZHJlbj1udWxsLHRoaXMudHJlZS5fY2FsbEhvb2soXCJ0cmVlUmVnaXN0ZXJOb2RlXCIsdGhpcy50cmVlLCEwLHRoaXMpfWZ1bmN0aW9uIHQoYil7dGhpcy53aWRnZXQ9Yix0aGlzLiRkaXY9Yi5lbGVtZW50LHRoaXMub3B0aW9ucz1iLm9wdGlvbnMsdGhpcy5vcHRpb25zJiYoYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5sYXp5bG9hZCkmJiFhLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLmxhenlMb2FkKSYmKHRoaXMub3B0aW9ucy5sYXp5TG9hZD1mdW5jdGlvbigpe3JldHVybiB3Lndhcm4oXCJUaGUgJ2xhenlsb2FkJyBldmVudCBpcyBkZXByZWNhdGVkIHNpbmNlIDIwMTQtMDItMjUuIFVzZSAnbGF6eUxvYWQnICh3aXRoIHVwcGVyY2FzZSBMKSBpbnN0ZWFkLlwiKSxiLm9wdGlvbnMubGF6eWxvYWQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5sb2FkZXJyb3IpJiZhLmVycm9yKFwiVGhlICdsb2FkZXJyb3InIGV2ZW50IHdhcyByZW5hbWVkIHNpbmNlIDIwMTQtMDctMDMuIFVzZSAnbG9hZEVycm9yJyAod2l0aCB1cHBlcmNhc2UgRSkgaW5zdGVhZC5cIiksdGhpcy5vcHRpb25zLmZ4IT09ZCYmdy53YXJuKFwiVGhlICdmeCcgb3B0aW9uIHdhcyByZXBsYWNlZCBieSAndG9nZ2xlRWZmZWN0JyBzaW5jZSAyMDE0LTExLTMwLlwiKSx0aGlzLm9wdGlvbnMucmVtb3ZlTm9kZSE9PWQmJmEuZXJyb3IoXCJUaGUgJ3JlbW92ZU5vZGUnIGV2ZW50IHdhcyByZXBsYWNlZCBieSAnbW9kaWZ5Q2hpbGQnIHNpbmNlIDIuMjAgKDIwMTYtMDktMTApLlwiKSksdGhpcy5leHQ9e30sdGhpcy5kYXRhPW4odGhpcy4kZGl2KSx0aGlzLl9pZD1hLnVpLmZhbmN5dHJlZS5fbmV4dElkKyssdGhpcy5fbnM9XCIuZmFuY3l0cmVlLVwiK3RoaXMuX2lkLHRoaXMuYWN0aXZlTm9kZT1udWxsLHRoaXMuZm9jdXNOb2RlPW51bGwsdGhpcy5faGFzRm9jdXM9bnVsbCx0aGlzLl9lbmFibGVVcGRhdGU9ITAsdGhpcy5sYXN0U2VsZWN0ZWROb2RlPW51bGwsdGhpcy5zeXN0ZW1Gb2N1c0VsZW1lbnQ9bnVsbCx0aGlzLmxhc3RRdWlja3NlYXJjaFRlcm09XCJcIix0aGlzLmxhc3RRdWlja3NlYXJjaFRpbWU9MCx0aGlzLnN0YXR1c0NsYXNzUHJvcE5hbWU9XCJzcGFuXCIsdGhpcy5hcmlhUHJvcE5hbWU9XCJsaVwiLHRoaXMubm9kZUNvbnRhaW5lckF0dHJOYW1lPVwibGlcIix0aGlzLiRkaXYuZmluZChcIj51bC5mYW5jeXRyZWUtY29udGFpbmVyXCIpLnJlbW92ZSgpO3ZhciBjLGU9e3RyZWU6dGhpc307dGhpcy5yb290Tm9kZT1uZXcgcyhlLHt0aXRsZTpcInJvb3RcIixrZXk6XCJyb290X1wiK3RoaXMuX2lkLGNoaWxkcmVuOm51bGwsZXhwYW5kZWQ6ITB9KSx0aGlzLnJvb3ROb2RlLnBhcmVudD1udWxsLGM9YShcIjx1bD5cIix7XCJjbGFzc1wiOlwidWktZmFuY3l0cmVlIGZhbmN5dHJlZS1jb250YWluZXIgZmFuY3l0cmVlLXBsYWluXCJ9KS5hcHBlbmRUbyh0aGlzLiRkaXYpLHRoaXMuJGNvbnRhaW5lcj1jLHRoaXMucm9vdE5vZGUudWw9Y1swXSxudWxsPT10aGlzLm9wdGlvbnMuZGVidWdMZXZlbCYmKHRoaXMub3B0aW9ucy5kZWJ1Z0xldmVsPXcuZGVidWdMZXZlbCksdGhpcy4kY29udGFpbmVyLmF0dHIoXCJ0YWJpbmRleFwiLHRoaXMub3B0aW9ucy50YWJpbmRleCksdGhpcy5vcHRpb25zLnJ0bCYmdGhpcy4kY29udGFpbmVyLmF0dHIoXCJESVJcIixcIlJUTFwiKS5hZGRDbGFzcyhcImZhbmN5dHJlZS1ydGxcIiksdGhpcy5vcHRpb25zLmFyaWEmJih0aGlzLiRjb250YWluZXIuYXR0cihcInJvbGVcIixcInRyZWVcIiksMSE9PXRoaXMub3B0aW9ucy5zZWxlY3RNb2RlJiZ0aGlzLiRjb250YWluZXIuYXR0cihcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCIsITApKX1pZihhLnVpJiZhLnVpLmZhbmN5dHJlZSlyZXR1cm4gdm9pZCBhLnVpLmZhbmN5dHJlZS53YXJuKFwiRmFuY3l0cmVlOiBpZ25vcmVkIGR1cGxpY2F0ZSBpbmNsdWRlXCIpO3ZhciB1LHYsdz1udWxsLHg9bmV3IFJlZ0V4cCgvXFwufFxcLy8pLHk9L1smPD5cIidcXC9dL2csej0vWzw+XCInXFwvXS9nLEE9XCIkcmVjdXJzaXZlX3JlcXVlc3RcIixCPXtcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiMzOTtcIixcIi9cIjpcIiYjeDJGO1wifSxDPXsxNjohMCwxNzohMCwxODohMH0sRD17ODpcImJhY2tzcGFjZVwiLDk6XCJ0YWJcIiwxMDpcInJldHVyblwiLDEzOlwicmV0dXJuXCIsMTk6XCJwYXVzZVwiLDIwOlwiY2Fwc2xvY2tcIiwyNzpcImVzY1wiLDMyOlwic3BhY2VcIiwzMzpcInBhZ2V1cFwiLDM0OlwicGFnZWRvd25cIiwzNTpcImVuZFwiLDM2OlwiaG9tZVwiLDM3OlwibGVmdFwiLDM4OlwidXBcIiwzOTpcInJpZ2h0XCIsNDA6XCJkb3duXCIsNDU6XCJpbnNlcnRcIiw0NjpcImRlbFwiLDU5OlwiO1wiLDYxOlwiPVwiLDk2OlwiMFwiLDk3OlwiMVwiLDk4OlwiMlwiLDk5OlwiM1wiLDEwMDpcIjRcIiwxMDE6XCI1XCIsMTAyOlwiNlwiLDEwMzpcIjdcIiwxMDQ6XCI4XCIsMTA1OlwiOVwiLDEwNjpcIipcIiwxMDc6XCIrXCIsMTA5OlwiLVwiLDExMDpcIi5cIiwxMTE6XCIvXCIsMTEyOlwiZjFcIiwxMTM6XCJmMlwiLDExNDpcImYzXCIsMTE1OlwiZjRcIiwxMTY6XCJmNVwiLDExNzpcImY2XCIsMTE4OlwiZjdcIiwxMTk6XCJmOFwiLDEyMDpcImY5XCIsMTIxOlwiZjEwXCIsMTIyOlwiZjExXCIsMTIzOlwiZjEyXCIsMTQ0OlwibnVtbG9ja1wiLDE0NTpcInNjcm9sbFwiLDE3MzpcIi1cIiwxODY6XCI7XCIsMTg3OlwiPVwiLDE4ODpcIixcIiwxODk6XCItXCIsMTkwOlwiLlwiLDE5MTpcIi9cIiwxOTI6XCJgXCIsMjE5OlwiW1wiLDIyMDpcIlxcXFxcIiwyMjE6XCJdXCIsMjIyOlwiJ1wifSxFPXswOlwiXCIsMTpcImxlZnRcIiwyOlwibWlkZGxlXCIsMzpcInJpZ2h0XCJ9LEY9XCJhY3RpdmUgZXhwYW5kZWQgZm9jdXMgZm9sZGVyIGhpZGVDaGVja2JveCBsYXp5IHNlbGVjdGVkIHVuc2VsZWN0YWJsZVwiLnNwbGl0KFwiIFwiKSxHPXt9LEg9XCJleHBhbmRlZCBleHRyYUNsYXNzZXMgZm9sZGVyIGhpZGVDaGVja2JveCBpY29uIGtleSBsYXp5IHJlZktleSBzZWxlY3RlZCBzdGF0dXNOb2RlVHlwZSB0aXRsZSB0b29sdGlwIHVuc2VsZWN0YWJsZVwiLnNwbGl0KFwiIFwiKSxJPXt9LEo9e30sSz17YWN0aXZlOiEwLGNoaWxkcmVuOiEwLGRhdGE6ITAsZm9jdXM6ITB9O2Zvcih1PTA7dTxGLmxlbmd0aDt1KyspR1tGW3VdXT0hMDtmb3IodT0wO3U8SC5sZW5ndGg7dSsrKXY9SFt1XSxJW3ZdPSEwLHYhPT12LnRvTG93ZXJDYXNlKCkmJihKW3YudG9Mb3dlckNhc2UoKV09dik7ZShhLnVpLFwiRmFuY3l0cmVlIHJlcXVpcmVzIGpRdWVyeSBVSSAoaHR0cDovL2pxdWVyeXVpLmNvbSlcIikscy5wcm90b3R5cGU9e19maW5kRGlyZWN0Q2hpbGQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMuY2hpbGRyZW47aWYoZClpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7Zm9yKGI9MCxjPWQubGVuZ3RoO2I8YztiKyspaWYoZFtiXS5rZXk9PT1hKXJldHVybiBkW2JdfWVsc2V7aWYoXCJudW1iZXJcIj09dHlwZW9mIGEpcmV0dXJuIHRoaXMuY2hpbGRyZW5bYV07aWYoYS5wYXJlbnQ9PT10aGlzKXJldHVybiBhfXJldHVybiBudWxsfSxfc2V0Q2hpbGRyZW46ZnVuY3Rpb24oYSl7ZShhJiYoIXRoaXMuY2hpbGRyZW58fDA9PT10aGlzLmNoaWxkcmVuLmxlbmd0aCksXCJvbmx5IGluaXQgc3VwcG9ydGVkXCIpLHRoaXMuY2hpbGRyZW49W107Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMuY2hpbGRyZW4ucHVzaChuZXcgcyh0aGlzLGFbYl0pKX0sYWRkQ2hpbGRyZW46ZnVuY3Rpb24oYixjKXt2YXIgZCxmLGcsaD1udWxsLGk9W107Zm9yKGEuaXNQbGFpbk9iamVjdChiKSYmKGI9W2JdKSx0aGlzLmNoaWxkcmVufHwodGhpcy5jaGlsZHJlbj1bXSksZD0wLGY9Yi5sZW5ndGg7ZDxmO2QrKylpLnB1c2gobmV3IHModGhpcyxiW2RdKSk7cmV0dXJuIGg9aVswXSxudWxsPT1jP3RoaXMuY2hpbGRyZW49dGhpcy5jaGlsZHJlbi5jb25jYXQoaSk6KGM9dGhpcy5fZmluZERpcmVjdENoaWxkKGMpLGc9YS5pbkFycmF5KGMsdGhpcy5jaGlsZHJlbiksZShnPj0wLFwiaW5zZXJ0QmVmb3JlIG11c3QgYmUgYW4gZXhpc3RpbmcgY2hpbGRcIiksdGhpcy5jaGlsZHJlbi5zcGxpY2UuYXBwbHkodGhpcy5jaGlsZHJlbixbZywwXS5jb25jYXQoaSkpKSwoIXRoaXMucGFyZW50fHx0aGlzLnBhcmVudC51bHx8dGhpcy50cikmJnRoaXMucmVuZGVyKCksMz09PXRoaXMudHJlZS5vcHRpb25zLnNlbGVjdE1vZGUmJnRoaXMuZml4U2VsZWN0aW9uM0Zyb21FbmROb2RlcygpLHRoaXMudHJpZ2dlck1vZGlmeUNoaWxkKFwiYWRkXCIsMT09PWkubGVuZ3RoP2lbMF06bnVsbCksaH0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudG9nZ2xlQ2xhc3MoYSwhMCl9LGFkZE5vZGU6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYiE9PWQmJlwib3ZlclwiIT09Ynx8KGI9XCJjaGlsZFwiKSxiKXtjYXNlXCJhZnRlclwiOnJldHVybiB0aGlzLmdldFBhcmVudCgpLmFkZENoaWxkcmVuKGEsdGhpcy5nZXROZXh0U2libGluZygpKTtjYXNlXCJiZWZvcmVcIjpyZXR1cm4gdGhpcy5nZXRQYXJlbnQoKS5hZGRDaGlsZHJlbihhLHRoaXMpO2Nhc2VcImZpcnN0Q2hpbGRcIjp2YXIgYz10aGlzLmNoaWxkcmVuP3RoaXMuY2hpbGRyZW5bMF06bnVsbDtyZXR1cm4gdGhpcy5hZGRDaGlsZHJlbihhLGMpO2Nhc2VcImNoaWxkXCI6Y2FzZVwib3ZlclwiOnJldHVybiB0aGlzLmFkZENoaWxkcmVuKGEpfWUoITEsXCJJbnZhbGlkIG1vZGU6IFwiK2IpfSxhZGRQYWdpbmdOb2RlOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZTtpZihjPWN8fFwiY2hpbGRcIixiPT09ITEpe2ZvcihkPXRoaXMuY2hpbGRyZW4ubGVuZ3RoLTE7ZD49MDtkLS0pZT10aGlzLmNoaWxkcmVuW2RdLFwicGFnaW5nXCI9PT1lLnN0YXR1c05vZGVUeXBlJiZ0aGlzLnJlbW92ZUNoaWxkKGUpO3JldHVybiB2b2lkKHRoaXMucGFydGxvYWQ9ITEpfXJldHVybiBiPWEuZXh0ZW5kKHt0aXRsZTp0aGlzLnRyZWUub3B0aW9ucy5zdHJpbmdzLm1vcmVEYXRhLHN0YXR1c05vZGVUeXBlOlwicGFnaW5nXCIsaWNvbjohMX0sYiksdGhpcy5wYXJ0bG9hZD0hMCx0aGlzLmFkZE5vZGUoYixjKX0sYXBwZW5kU2libGluZzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGROb2RlKGEsXCJhZnRlclwiKX0sYXBwbHlQYXRjaDpmdW5jdGlvbihiKXtpZihudWxsPT09YilyZXR1cm4gdGhpcy5yZW1vdmUoKSxrKHRoaXMpO3ZhciBjLGQsZSxmPXtjaGlsZHJlbjohMCxleHBhbmRlZDohMCxwYXJlbnQ6ITB9O2ZvcihjIGluIGIpZT1iW2NdLGZbY118fGEuaXNGdW5jdGlvbihlKXx8KElbY10/dGhpc1tjXT1lOnRoaXMuZGF0YVtjXT1lKTtyZXR1cm4gYi5oYXNPd25Qcm9wZXJ0eShcImNoaWxkcmVuXCIpJiYodGhpcy5yZW1vdmVDaGlsZHJlbigpLGIuY2hpbGRyZW4mJnRoaXMuX3NldENoaWxkcmVuKGIuY2hpbGRyZW4pKSx0aGlzLmlzVmlzaWJsZSgpJiYodGhpcy5yZW5kZXJUaXRsZSgpLHRoaXMucmVuZGVyU3RhdHVzKCkpLGQ9Yi5oYXNPd25Qcm9wZXJ0eShcImV4cGFuZGVkXCIpP3RoaXMuc2V0RXhwYW5kZWQoYi5leHBhbmRlZCk6ayh0aGlzKX0sY29sbGFwc2VTaWJsaW5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZUNvbGxhcHNlU2libGluZ3NcIix0aGlzKX0sY29weVRvOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5hZGROb2RlKHRoaXMudG9EaWN0KCEwLGMpLGIpfSxjb3VudENoaWxkcmVuOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXMuY2hpbGRyZW47aWYoIWUpcmV0dXJuIDA7aWYoZD1lLmxlbmd0aCxhIT09ITEpZm9yKGI9MCxjPWQ7YjxjO2IrKylkKz1lW2JdLmNvdW50Q2hpbGRyZW4oKTtyZXR1cm4gZH0sZGVidWc6ZnVuY3Rpb24oYSl7dGhpcy50cmVlLm9wdGlvbnMuZGVidWdMZXZlbD49MiYmKEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLHRoaXMudG9TdHJpbmcoKSksZihcImxvZ1wiLGFyZ3VtZW50cykpfSxkaXNjYXJkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2FybihcIkZhbmN5dHJlZU5vZGUuZGlzY2FyZCgpIGlzIGRlcHJlY2F0ZWQgc2luY2UgMjAxNC0wMi0xNi4gVXNlIC5yZXNldExhenkoKSBpbnN0ZWFkLlwiKSx0aGlzLnJlc2V0TGF6eSgpfSxkaXNjYXJkTWFya3VwOmZ1bmN0aW9uKGEpe3ZhciBiPWE/XCJub2RlUmVtb3ZlTWFya3VwXCI6XCJub2RlUmVtb3ZlQ2hpbGRNYXJrdXBcIjt0aGlzLnRyZWUuX2NhbGxIb29rKGIsdGhpcyl9LGZpbmRBbGw6ZnVuY3Rpb24oYil7Yj1hLmlzRnVuY3Rpb24oYik/YjpxKGIpO3ZhciBjPVtdO3JldHVybiB0aGlzLnZpc2l0KGZ1bmN0aW9uKGEpe2IoYSkmJmMucHVzaChhKX0pLGN9LGZpbmRGaXJzdDpmdW5jdGlvbihiKXtiPWEuaXNGdW5jdGlvbihiKT9iOnEoYik7dmFyIGM9bnVsbDtyZXR1cm4gdGhpcy52aXNpdChmdW5jdGlvbihhKXtpZihiKGEpKXJldHVybiBjPWEsITF9KSxjfSxfY2hhbmdlU2VsZWN0U3RhdHVzQXR0cnM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7c3dpdGNoKGEpe2Nhc2UhMTpiPXRoaXMuc2VsZWN0ZWR8fHRoaXMucGFydHNlbCx0aGlzLnNlbGVjdGVkPSExLHRoaXMucGFydHNlbD0hMTticmVhaztjYXNlITA6Yj0hdGhpcy5zZWxlY3RlZHx8IXRoaXMucGFydHNlbCx0aGlzLnNlbGVjdGVkPSEwLHRoaXMucGFydHNlbD0hMDticmVhaztjYXNlIGQ6Yj10aGlzLnNlbGVjdGVkfHwhdGhpcy5wYXJ0c2VsLHRoaXMuc2VsZWN0ZWQ9ITEsdGhpcy5wYXJ0c2VsPSEwO2JyZWFrO2RlZmF1bHQ6ZSghMSxcImludmFsaWQgc3RhdGU6IFwiK2EpfXJldHVybiBiJiZ0aGlzLnJlbmRlclN0YXR1cygpLGJ9LGZpeFNlbGVjdGlvbjNBZnRlckNsaWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pc1NlbGVjdGVkKCk7dGhpcy52aXNpdChmdW5jdGlvbihiKXtiLl9jaGFuZ2VTZWxlY3RTdGF0dXNBdHRycyhhKX0pLHRoaXMuZml4U2VsZWN0aW9uM0Zyb21FbmROb2RlcygpfSxmaXhTZWxlY3Rpb24zRnJvbUVuZE5vZGVzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXt2YXIgYyxlLGYsZyxoLGksaixrPWIuY2hpbGRyZW47aWYoayYmay5sZW5ndGgpe2ZvcihpPSEwLGo9ITEsYz0wLGU9ay5sZW5ndGg7YzxlO2MrKylmPWtbY10sZz1hKGYpLGchPT0hMSYmKGo9ITApLGchPT0hMCYmKGk9ITEpO2g9ISFpfHwhIWomJmR9ZWxzZSBoPSEhYi5zZWxlY3RlZDtyZXR1cm4gYi5fY2hhbmdlU2VsZWN0U3RhdHVzQXR0cnMoaCksaH1lKDM9PT10aGlzLnRyZWUub3B0aW9ucy5zZWxlY3RNb2RlLFwiZXhwZWN0ZWQgc2VsZWN0TW9kZSAzXCIpLGEodGhpcyksdGhpcy52aXNpdFBhcmVudHMoZnVuY3Rpb24oYSl7dmFyIGIsYyxlLGYsZz1hLmNoaWxkcmVuLGg9ITAsaT0hMTtmb3IoYj0wLGM9Zy5sZW5ndGg7YjxjO2IrKyllPWdbYl0sKGUuc2VsZWN0ZWR8fGUucGFydHNlbCkmJihpPSEwKSxlLnVuc2VsZWN0YWJsZXx8ZS5zZWxlY3RlZHx8KGg9ITEpO2Y9ISFofHwhIWkmJmQsYS5fY2hhbmdlU2VsZWN0U3RhdHVzQXR0cnMoZil9KX0sZnJvbURpY3Q6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpSVtjXT90aGlzW2NdPWJbY106XCJkYXRhXCI9PT1jP2EuZXh0ZW5kKHRoaXMuZGF0YSxiLmRhdGEpOmEuaXNGdW5jdGlvbihiW2NdKXx8S1tjXXx8KHRoaXMuZGF0YVtjXT1iW2NdKTtiLmNoaWxkcmVuJiYodGhpcy5yZW1vdmVDaGlsZHJlbigpLHRoaXMuYWRkQ2hpbGRyZW4oYi5jaGlsZHJlbikpLHRoaXMucmVuZGVyVGl0bGUoKX0sZ2V0Q2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNDaGlsZHJlbigpPT09ZD9kOnRoaXMuY2hpbGRyZW59LGdldEZpcnN0Q2hpbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlbj90aGlzLmNoaWxkcmVuWzBdOm51bGx9LGdldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIGEuaW5BcnJheSh0aGlzLHRoaXMucGFyZW50LmNoaWxkcmVuKX0sZ2V0SW5kZXhIaWVyOmZ1bmN0aW9uKGIsYyl7Yj1ifHxcIi5cIjt2YXIgZCxlPVtdO3JldHVybiBhLmVhY2godGhpcy5nZXRQYXJlbnRMaXN0KCExLCEwKSxmdW5jdGlvbihhLGIpe2Q9XCJcIisoYi5nZXRJbmRleCgpKzEpLGMmJihkPShcIjAwMDAwMDBcIitkKS5zdWJzdHIoLWMpKSxlLnB1c2goZCl9KSxlLmpvaW4oYil9LGdldEtleVBhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzLnRyZWUub3B0aW9ucy5rZXlQYXRoU2VwYXJhdG9yO3JldHVybiB0aGlzLnZpc2l0UGFyZW50cyhmdW5jdGlvbihhKXthLnBhcmVudCYmYi51bnNoaWZ0KGEua2V5KX0sIWEpLGMrYi5qb2luKGMpfSxnZXRMYXN0Q2hpbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlbj90aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoLTFdOm51bGx9LGdldExldmVsOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnBhcmVudDtiOylhKyssYj1iLnBhcmVudDtyZXR1cm4gYX0sZ2V0TmV4dFNpYmxpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudCl7dmFyIGEsYixjPXRoaXMucGFyZW50LmNoaWxkcmVuO2ZvcihhPTAsYj1jLmxlbmd0aC0xO2E8YjthKyspaWYoY1thXT09PXRoaXMpcmV0dXJuIGNbYSsxXX1yZXR1cm4gbnVsbH0sZ2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50fSxnZXRQYXJlbnRMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9Yj90aGlzOnRoaXMucGFyZW50O2Q7KShhfHxkLnBhcmVudCkmJmMudW5zaGlmdChkKSxkPWQucGFyZW50O3JldHVybiBjfSxnZXRQcmV2U2libGluZzpmdW5jdGlvbigpe2lmKHRoaXMucGFyZW50KXt2YXIgYSxiLGM9dGhpcy5wYXJlbnQuY2hpbGRyZW47Zm9yKGE9MSxiPWMubGVuZ3RoO2E8YjthKyspaWYoY1thXT09PXRoaXMpcmV0dXJuIGNbYS0xXX1yZXR1cm4gbnVsbH0sZ2V0U2VsZWN0ZWROb2RlczpmdW5jdGlvbihhKXt2YXIgYj1bXTtyZXR1cm4gdGhpcy52aXNpdChmdW5jdGlvbihjKXtpZihjLnNlbGVjdGVkJiYoYi5wdXNoKGMpLGE9PT0hMCkpcmV0dXJuXCJza2lwXCJ9KSxifSxoYXNDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhenk/bnVsbD09dGhpcy5jaGlsZHJlbj9kOjAhPT10aGlzLmNoaWxkcmVuLmxlbmd0aCYmKDEhPT10aGlzLmNoaWxkcmVuLmxlbmd0aHx8IXRoaXMuY2hpbGRyZW5bMF0uaXNTdGF0dXNOb2RlKCl8fGQpOiEoIXRoaXMuY2hpbGRyZW58fCF0aGlzLmNoaWxkcmVuLmxlbmd0aCl9LGhhc0ZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5oYXNGb2N1cygpJiZ0aGlzLnRyZWUuZm9jdXNOb2RlPT09dGhpc30saW5mbzpmdW5jdGlvbihhKXt0aGlzLnRyZWUub3B0aW9ucy5kZWJ1Z0xldmVsPj0xJiYoQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsdGhpcy50b1N0cmluZygpKSxmKFwiaW5mb1wiLGFyZ3VtZW50cykpfSxpc0FjdGl2ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuYWN0aXZlTm9kZT09PXRoaXN9LGlzQ2hpbGRPZjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50PT09YX0saXNEZXNjZW5kYW50T2Y6ZnVuY3Rpb24oYSl7aWYoIWF8fGEudHJlZSE9PXRoaXMudHJlZSlyZXR1cm4hMTtmb3IodmFyIGI9dGhpcy5wYXJlbnQ7Yjspe2lmKGI9PT1hKXJldHVybiEwO2I9Yi5wYXJlbnR9cmV0dXJuITF9LGlzRXhwYW5kZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZXhwYW5kZWR9LGlzRmlyc3RTaWJsaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJlbnQ7cmV0dXJuIWF8fGEuY2hpbGRyZW5bMF09PT10aGlzfSxpc0ZvbGRlcjpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5mb2xkZXJ9LGlzTGFzdFNpYmxpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcmVudDtyZXR1cm4hYXx8YS5jaGlsZHJlblthLmNoaWxkcmVuLmxlbmd0aC0xXT09PXRoaXN9LGlzTGF6eTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5sYXp5fSxpc0xvYWRlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmxhenl8fHRoaXMuaGFzQ2hpbGRyZW4oKSE9PWR9LGlzTG9hZGluZzpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5faXNMb2FkaW5nfSxpc1Jvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1Jvb3ROb2RlKCl9LGlzUGFydGxvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMucGFydGxvYWR9LGlzUm9vdE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLnJvb3ROb2RlPT09dGhpc30saXNTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5zZWxlY3RlZH0saXNTdGF0dXNOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnN0YXR1c05vZGVUeXBlfSxpc1BhZ2luZ05vZGU6ZnVuY3Rpb24oKXtyZXR1cm5cInBhZ2luZ1wiPT09dGhpcy5zdGF0dXNOb2RlVHlwZX0saXNUb3BMZXZlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUucm9vdE5vZGU9PT10aGlzLnBhcmVudH0saXNVbmRlZmluZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNDaGlsZHJlbigpPT09ZH0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuZ2V0UGFyZW50TGlzdCghMSwhMSk7Zm9yKGE9MCxiPWMubGVuZ3RoO2E8YjthKyspaWYoIWNbYV0uZXhwYW5kZWQpcmV0dXJuITE7cmV0dXJuITB9LGxhenlMb2FkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndhcm4oXCJGYW5jeXRyZWVOb2RlLmxhenlMb2FkKCkgaXMgZGVwcmVjYXRlZCBzaW5jZSAyMDE0LTAyLTE2LiBVc2UgLmxvYWQoKSBpbnN0ZWFkLlwiKSx0aGlzLmxvYWQoYSl9LGxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMsZj10aGlzLmlzRXhwYW5kZWQoKTtyZXR1cm4gZSh0aGlzLmlzTGF6eSgpLFwibG9hZCgpIHJlcXVpcmVzIGEgbGF6eSBub2RlXCIpLGF8fHRoaXMuaXNVbmRlZmluZWQoKT8odGhpcy5pc0xvYWRlZCgpJiZ0aGlzLnJlc2V0TGF6eSgpLGM9dGhpcy50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KFwibGF6eUxvYWRcIix0aGlzKSxjPT09ITE/ayh0aGlzKTooZShcImJvb2xlYW5cIiE9dHlwZW9mIGMsXCJsYXp5TG9hZCBldmVudCBtdXN0IHJldHVybiBzb3VyY2UgaW4gZGF0YS5yZXN1bHRcIiksYj10aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZUxvYWRDaGlsZHJlblwiLHRoaXMsYyksZj8odGhpcy5leHBhbmRlZD0hMCxiLmFsd2F5cyhmdW5jdGlvbigpe2QucmVuZGVyKCl9KSk6Yi5hbHdheXMoZnVuY3Rpb24oKXtkLnJlbmRlclN0YXR1cygpfSksYikpOmsodGhpcyl9LG1ha2VWaXNpYmxlOmZ1bmN0aW9uKGIpe3ZhciBjLGQ9dGhpcyxlPVtdLGY9bmV3IGEuRGVmZXJyZWQsZz10aGlzLmdldFBhcmVudExpc3QoITEsITEpLGg9Zy5sZW5ndGgsaT0hKGImJmIubm9BbmltYXRpb249PT0hMCksaj0hKGImJmIuc2Nyb2xsSW50b1ZpZXc9PT0hMSk7Zm9yKGM9aC0xO2M+PTA7Yy0tKWUucHVzaChnW2NdLnNldEV4cGFuZGVkKCEwLGIpKTtyZXR1cm4gYS53aGVuLmFwcGx5KGEsZSkuZG9uZShmdW5jdGlvbigpe2o/ZC5zY3JvbGxJbnRvVmlldyhpKS5kb25lKGZ1bmN0aW9uKCl7Zi5yZXNvbHZlKCl9KTpmLnJlc29sdmUoKX0pLGYucHJvbWlzZSgpfSxtb3ZlVG86ZnVuY3Rpb24oYixjLGYpe2M9PT1kfHxcIm92ZXJcIj09PWM/Yz1cImNoaWxkXCI6XCJmaXJzdENoaWxkXCI9PT1jJiYoYi5jaGlsZHJlbiYmYi5jaGlsZHJlbi5sZW5ndGg/KGM9XCJiZWZvcmVcIixiPWIuY2hpbGRyZW5bMF0pOmM9XCJjaGlsZFwiKTt2YXIgZyxoPXRoaXMucGFyZW50LGk9XCJjaGlsZFwiPT09Yz9iOmIucGFyZW50O2lmKHRoaXMhPT1iKXtpZih0aGlzLnBhcmVudD9pLmlzRGVzY2VuZGFudE9mKHRoaXMpJiZhLmVycm9yKFwiQ2Fubm90IG1vdmUgYSBub2RlIHRvIGl0cyBvd24gZGVzY2VuZGFudFwiKTphLmVycm9yKFwiQ2Fubm90IG1vdmUgc3lzdGVtIHJvb3RcIiksaSE9PWgmJmgudHJpZ2dlck1vZGlmeUNoaWxkKFwicmVtb3ZlXCIsdGhpcyksMT09PXRoaXMucGFyZW50LmNoaWxkcmVuLmxlbmd0aCl7aWYodGhpcy5wYXJlbnQ9PT1pKXJldHVybjt0aGlzLnBhcmVudC5jaGlsZHJlbj10aGlzLnBhcmVudC5sYXp5P1tdOm51bGwsdGhpcy5wYXJlbnQuZXhwYW5kZWQ9ITF9ZWxzZSBnPWEuaW5BcnJheSh0aGlzLHRoaXMucGFyZW50LmNoaWxkcmVuKSxlKGc+PTAsXCJpbnZhbGlkIHNvdXJjZSBwYXJlbnRcIiksdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGcsMSk7aWYodGhpcy5wYXJlbnQ9aSxpLmhhc0NoaWxkcmVuKCkpc3dpdGNoKGMpe2Nhc2VcImNoaWxkXCI6aS5jaGlsZHJlbi5wdXNoKHRoaXMpO2JyZWFrO2Nhc2VcImJlZm9yZVwiOmc9YS5pbkFycmF5KGIsaS5jaGlsZHJlbiksZShnPj0wLFwiaW52YWxpZCB0YXJnZXQgcGFyZW50XCIpLGkuY2hpbGRyZW4uc3BsaWNlKGcsMCx0aGlzKTticmVhaztjYXNlXCJhZnRlclwiOmc9YS5pbkFycmF5KGIsaS5jaGlsZHJlbiksZShnPj0wLFwiaW52YWxpZCB0YXJnZXQgcGFyZW50XCIpLGkuY2hpbGRyZW4uc3BsaWNlKGcrMSwwLHRoaXMpO2JyZWFrO2RlZmF1bHQ6YS5lcnJvcihcIkludmFsaWQgbW9kZSBcIitjKX1lbHNlIGkuY2hpbGRyZW49W3RoaXNdO2YmJmIudmlzaXQoZiwhMCksaT09PWg/aS50cmlnZ2VyTW9kaWZ5Q2hpbGQoXCJtb3ZlXCIsdGhpcyk6aS50cmlnZ2VyTW9kaWZ5Q2hpbGQoXCJhZGRcIix0aGlzKSx0aGlzLnRyZWUhPT1iLnRyZWUmJih0aGlzLndhcm4oXCJDcm9zcy10cmVlIG1vdmVUbyBpcyBleHBlcmltYW50YWwhXCIpLHRoaXMudmlzaXQoZnVuY3Rpb24oYSl7YS50cmVlPWIudHJlZX0sITApKSxoLmlzRGVzY2VuZGFudE9mKGkpfHxoLnJlbmRlcigpLGkuaXNEZXNjZW5kYW50T2YoaCl8fGk9PT1ofHxpLnJlbmRlcigpfX0sbmF2aWdhdGU6ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGQpe2lmKGQpe3RyeXtkLm1ha2VWaXNpYmxlKHtzY3JvbGxJbnRvVmlldzohMX0pfWNhdGNoKGUpe31yZXR1cm4gYShkLnNwYW4pLmlzKFwiOnZpc2libGVcIik/Yz09PSExP2Quc2V0Rm9jdXMoKTpkLnNldEFjdGl2ZSgpOihkLmRlYnVnKFwiTmF2aWdhdGU6IHNraXBwaW5nIGhpZGRlbiBub2RlXCIpLHZvaWQgZC5uYXZpZ2F0ZShiLGMpKX19dmFyIGUsZixnLGg9ITAsaT1hLnVpLmtleUNvZGUsaj1udWxsO3N3aXRjaChiKXtjYXNlIGkuQkFDS1NQQUNFOnRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5wYXJlbnQmJihnPWQodGhpcy5wYXJlbnQpKTticmVhaztjYXNlIGkuSE9NRTp0aGlzLnRyZWUudmlzaXQoZnVuY3Rpb24oYil7aWYoYShiLnNwYW4pLmlzKFwiOnZpc2libGVcIikpcmV0dXJuIGc9ZChiKSwhMX0pO2JyZWFrO2Nhc2UgaS5FTkQ6dGhpcy50cmVlLnZpc2l0KGZ1bmN0aW9uKGIpe2EoYi5zcGFuKS5pcyhcIjp2aXNpYmxlXCIpJiYoZz1iKX0pLGcmJihnPWQoZykpO2JyZWFrO2Nhc2UgaS5MRUZUOnRoaXMuZXhwYW5kZWQ/KHRoaXMuc2V0RXhwYW5kZWQoITEpLGc9ZCh0aGlzKSk6dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LnBhcmVudCYmKGc9ZCh0aGlzLnBhcmVudCkpO2JyZWFrO2Nhc2UgaS5SSUdIVDp0aGlzLmV4cGFuZGVkfHwhdGhpcy5jaGlsZHJlbiYmIXRoaXMubGF6eT90aGlzLmNoaWxkcmVuJiZ0aGlzLmNoaWxkcmVuLmxlbmd0aCYmKGc9ZCh0aGlzLmNoaWxkcmVuWzBdKSk6KHRoaXMuc2V0RXhwYW5kZWQoKSxnPWQodGhpcykpO2JyZWFrO2Nhc2UgaS5VUDpmb3Ioaj10aGlzLmdldFByZXZTaWJsaW5nKCk7aiYmIWEoai5zcGFuKS5pcyhcIjp2aXNpYmxlXCIpOylqPWouZ2V0UHJldlNpYmxpbmcoKTtmb3IoO2omJmouZXhwYW5kZWQmJmouY2hpbGRyZW4mJmouY2hpbGRyZW4ubGVuZ3RoOylqPWouY2hpbGRyZW5bai5jaGlsZHJlbi5sZW5ndGgtMV07IWomJnRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5wYXJlbnQmJihqPXRoaXMucGFyZW50KSxnPWQoaik7YnJlYWs7Y2FzZSBpLkRPV046aWYodGhpcy5leHBhbmRlZCYmdGhpcy5jaGlsZHJlbiYmdGhpcy5jaGlsZHJlbi5sZW5ndGgpaj10aGlzLmNoaWxkcmVuWzBdO2Vsc2UgZm9yKGY9dGhpcy5nZXRQYXJlbnRMaXN0KCExLCEwKSxlPWYubGVuZ3RoLTE7ZT49MDtlLS0pe2ZvcihqPWZbZV0uZ2V0TmV4dFNpYmxpbmcoKTtqJiYhYShqLnNwYW4pLmlzKFwiOnZpc2libGVcIik7KWo9ai5nZXROZXh0U2libGluZygpO2lmKGopYnJlYWt9Zz1kKGopO2JyZWFrO2RlZmF1bHQ6aD0hMX1yZXR1cm4gZ3x8aygpfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyl9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVJlbW92ZUNoaWxkXCIsdGhpcyxhKX0scmVtb3ZlQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVSZW1vdmVDaGlsZHJlblwiLHRoaXMpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50b2dnbGVDbGFzcyhhLCExKX0scmVuZGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlUmVuZGVyXCIsdGhpcyxhLGIpfSxyZW5kZXJUaXRsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVJlbmRlclRpdGxlXCIsdGhpcyl9LHJlbmRlclN0YXR1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVJlbmRlclN0YXR1c1wiLHRoaXMpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihiKXt2YXIgYyxkPXRoaXMucGFyZW50LGY9YS5pbkFycmF5KHRoaXMsZC5jaGlsZHJlbiksZz10aGlzO3JldHVybiBlKHRoaXMuaXNQYWdpbmdOb2RlKCksXCJyZXBsYWNlV2l0aCgpIGN1cnJlbnRseSByZXF1aXJlcyBhIHBhZ2luZyBzdGF0dXMgbm9kZVwiKSxjPXRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlTG9hZENoaWxkcmVuXCIsdGhpcyxiKSxjLmRvbmUoZnVuY3Rpb24oYSl7dmFyIGI9Zy5jaGlsZHJlbjtmb3IodT0wO3U8Yi5sZW5ndGg7dSsrKWJbdV0ucGFyZW50PWQ7ZC5jaGlsZHJlbi5zcGxpY2UuYXBwbHkoZC5jaGlsZHJlbixbZisxLDBdLmNvbmNhdChiKSksZy5jaGlsZHJlbj1udWxsLGcucmVtb3ZlKCksZC5yZW5kZXIoKX0pLmZhaWwoZnVuY3Rpb24oKXtnLnNldEV4cGFuZGVkKCl9KSxjfSxyZXNldExhenk6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNoaWxkcmVuKCksdGhpcy5leHBhbmRlZD0hMSx0aGlzLmxhenk9ITAsdGhpcy5jaGlsZHJlbj1kLHRoaXMucmVuZGVyU3RhdHVzKCl9LHNjaGVkdWxlQWN0aW9uOmZ1bmN0aW9uKGIsYyl7dGhpcy50cmVlLnRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy50cmVlLnRpbWVyKSx0aGlzLnRyZWUudGltZXI9bnVsbDt2YXIgZD10aGlzO3N3aXRjaChiKXtjYXNlXCJjYW5jZWxcIjpicmVhaztjYXNlXCJleHBhbmRcIjp0aGlzLnRyZWUudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2QudHJlZS5kZWJ1ZyhcInNldFRpbWVvdXQ6IHRyaWdnZXIgZXhwYW5kXCIpLGQuc2V0RXhwYW5kZWQoITApfSxjKTticmVhaztjYXNlXCJhY3RpdmF0ZVwiOnRoaXMudHJlZS50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC50cmVlLmRlYnVnKFwic2V0VGltZW91dDogdHJpZ2dlciBhY3RpdmF0ZVwiKSxkLnNldEFjdGl2ZSghMCl9LGMpO2JyZWFrO2RlZmF1bHQ6YS5lcnJvcihcIkludmFsaWQgbW9kZSBcIitiKX19LHNjcm9sbEludG9WaWV3OmZ1bmN0aW9uKGYsaCl7aCE9PWQmJmcoaCkmJih0aGlzLndhcm4oXCJzY3JvbGxJbnRvVmlldygpIHdpdGggJ3RvcE5vZGUnIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIDIwMTQtMDUtMDguIFVzZSAnb3B0aW9ucy50b3BOb2RlJyBpbnN0ZWFkLlwiKSxoPXt0b3BOb2RlOmh9KTt2YXIgaSxqLGwsbSxuPWEuZXh0ZW5kKHtlZmZlY3RzOmY9PT0hMD97ZHVyYXRpb246MjAwLHF1ZXVlOiExfTpmLHNjcm9sbE9mczp0aGlzLnRyZWUub3B0aW9ucy5zY3JvbGxPZnMsc2Nyb2xsUGFyZW50OnRoaXMudHJlZS5vcHRpb25zLnNjcm9sbFBhcmVudHx8dGhpcy50cmVlLiRjb250YWluZXIsdG9wTm9kZTpudWxsfSxoKSxvPW5ldyBhLkRlZmVycmVkLHA9dGhpcyxxPWEodGhpcy5zcGFuKS5oZWlnaHQoKSxyPWEobi5zY3JvbGxQYXJlbnQpLHM9bi5zY3JvbGxPZnMudG9wfHwwLHQ9bi5zY3JvbGxPZnMuYm90dG9tfHwwLHU9ci5oZWlnaHQoKSx2PXIuc2Nyb2xsVG9wKCksdz1yLHg9clswXT09PWIseT1uLnRvcE5vZGV8fG51bGwsej1udWxsO3JldHVybiBhKHRoaXMuc3BhbikuaXMoXCI6dmlzaWJsZVwiKT8oeD8oaj1hKHRoaXMuc3Bhbikub2Zmc2V0KCkudG9wLGk9eSYmeS5zcGFuP2EoeS5zcGFuKS5vZmZzZXQoKS50b3A6MCx3PWEoXCJodG1sLGJvZHlcIikpOihlKHJbMF0hPT1jJiZyWzBdIT09Yy5ib2R5LFwic2Nyb2xsUGFyZW50IHNob3VsZCBiZSBhIHNpbXBsZSBlbGVtZW50IG9yIGB3aW5kb3dgLCBub3QgZG9jdW1lbnQgb3IgYm9keS5cIiksbT1yLm9mZnNldCgpLnRvcCxqPWEodGhpcy5zcGFuKS5vZmZzZXQoKS50b3AtbSt2LGk9eT9hKHkuc3Bhbikub2Zmc2V0KCkudG9wLW0rdjowLGw9TWF0aC5tYXgoMCxyLmlubmVySGVpZ2h0KCktclswXS5jbGllbnRIZWlnaHQpLHUtPWwpLGo8ditzP3o9ai1zOmorcT52K3UtdCYmKHo9aitxLXUrdCx5JiYoZSh5LmlzUm9vdE5vZGUoKXx8YSh5LnNwYW4pLmlzKFwiOnZpc2libGVcIiksXCJ0b3BOb2RlIG11c3QgYmUgdmlzaWJsZVwiKSxpPHomJih6PWktcykpKSxudWxsIT09ej9uLmVmZmVjdHM/KG4uZWZmZWN0cy5jb21wbGV0ZT1mdW5jdGlvbigpe28ucmVzb2x2ZVdpdGgocCl9LHcuc3RvcCghMCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOnp9LG4uZWZmZWN0cykpOih3WzBdLnNjcm9sbFRvcD16LG8ucmVzb2x2ZVdpdGgodGhpcykpOm8ucmVzb2x2ZVdpdGgodGhpcyksby5wcm9taXNlKCkpOih0aGlzLndhcm4oXCJzY3JvbGxJbnRvVmlldygpOiBub2RlIGlzIGludmlzaWJsZS5cIiksaygpKX0sc2V0QWN0aXZlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlU2V0QWN0aXZlXCIsdGhpcyxhLGIpfSxzZXRFeHBhbmRlZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVNldEV4cGFuZGVkXCIsdGhpcyxhLGIpfSxzZXRGb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVTZXRGb2N1c1wiLHRoaXMsYSl9LHNldFNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVNldFNlbGVjdGVkXCIsdGhpcyxhKX0sc2V0U3RhdHVzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVTZXRTdGF0dXNcIix0aGlzLGEsYixjKX0sc2V0VGl0bGU6ZnVuY3Rpb24oYSl7dGhpcy50aXRsZT1hLHRoaXMucmVuZGVyVGl0bGUoKSx0aGlzLnRyaWdnZXJNb2RpZnkoXCJyZW5hbWVcIil9LHNvcnRDaGlsZHJlbjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLmNoaWxkcmVuO2lmKGUpe2lmKGE9YXx8ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRpdGxlLnRvTG93ZXJDYXNlKCksZD1iLnRpdGxlLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGM9PT1kPzA6Yz5kPzE6LTF9LGUuc29ydChhKSxiKWZvcihjPTAsZD1lLmxlbmd0aDtjPGQ7YysrKWVbY10uY2hpbGRyZW4mJmVbY10uc29ydENoaWxkcmVuKGEsXCIkbm9yZW5kZXIkXCIpO1wiJG5vcmVuZGVyJFwiIT09YiYmdGhpcy5yZW5kZXIoKSx0aGlzLnRyaWdnZXJNb2RpZnlDaGlsZChcInNvcnRcIil9fSx0b0RpY3Q6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZz17fSxoPXRoaXM7aWYoYS5lYWNoKEgsZnVuY3Rpb24oYSxiKXsoaFtiXXx8aFtiXT09PSExKSYmKGdbYl09aFtiXSl9KSxhLmlzRW1wdHlPYmplY3QodGhpcy5kYXRhKXx8KGcuZGF0YT1hLmV4dGVuZCh7fSx0aGlzLmRhdGEpLGEuaXNFbXB0eU9iamVjdChnLmRhdGEpJiZkZWxldGUgZy5kYXRhKSxjJiZjKGcsaCksYiYmdGhpcy5oYXNDaGlsZHJlbigpKWZvcihnLmNoaWxkcmVuPVtdLGQ9MCxlPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2Q8ZTtkKyspZj10aGlzLmNoaWxkcmVuW2RdLGYuaXNTdGF0dXNOb2RlKCl8fGcuY2hpbGRyZW4ucHVzaChmLnRvRGljdCghMCxjKSk7cmV0dXJuIGd9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGIsYyl7dmFyIGUsZixnPS9cXFMrL2csaD1iLm1hdGNoKGcpfHxbXSxpPTAsaj0hMSxrPXRoaXNbdGhpcy50cmVlLnN0YXR1c0NsYXNzUHJvcE5hbWVdLGw9XCIgXCIrKHRoaXMuZXh0cmFDbGFzc2VzfHxcIlwiKStcIiBcIjtmb3IoayYmYShrKS50b2dnbGVDbGFzcyhiLGMpO2U9aFtpKytdOylpZihmPWwuaW5kZXhPZihcIiBcIitlK1wiIFwiKT49MCxjPWM9PT1kPyFmOiEhYylmfHwobCs9ZStcIiBcIixqPSEwKTtlbHNlIGZvcig7bC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPi0xOylsPWwucmVwbGFjZShcIiBcIitlK1wiIFwiLFwiIFwiKTtyZXR1cm4gdGhpcy5leHRyYUNsYXNzZXM9YS50cmltKGwpLGp9LHRvZ2dsZUV4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlVG9nZ2xlRXhwYW5kZWRcIix0aGlzKX0sdG9nZ2xlU2VsZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVUb2dnbGVTZWxlY3RlZFwiLHRoaXMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiPEZhbmN5dHJlZU5vZGUoI1wiK3RoaXMua2V5K1wiLCAnXCIrdGhpcy50aXRsZStcIicpPlwifSx0cmlnZ2VyTW9kaWZ5Q2hpbGQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlLGY9dGhpcy50cmVlLm9wdGlvbnMubW9kaWZ5Q2hpbGQ7ZiYmKGMmJmMucGFyZW50IT09dGhpcyYmYS5lcnJvcihcImNoaWxkTm9kZSBcIitjK1wiIGlzIG5vdCBhIGNoaWxkIG9mIFwiK3RoaXMpLGU9e25vZGU6dGhpcyx0cmVlOnRoaXMudHJlZSxvcGVyYXRpb246YixjaGlsZE5vZGU6Y3x8bnVsbH0sZCYmYS5leHRlbmQoZSxkKSxmKHt0eXBlOlwibW9kaWZ5Q2hpbGRcIn0sZSkpfSx0cmlnZ2VyTW9kaWZ5OmZ1bmN0aW9uKGEsYil7dGhpcy5wYXJlbnQudHJpZ2dlck1vZGlmeUNoaWxkKGEsdGhpcyxiKX0sdmlzaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9ITAsZj10aGlzLmNoaWxkcmVuO2lmKGI9PT0hMCYmKGU9YSh0aGlzKSxlPT09ITF8fFwic2tpcFwiPT09ZSkpcmV0dXJuIGU7aWYoZilmb3IoYz0wLGQ9Zi5sZW5ndGg7YzxkJiYoZT1mW2NdLnZpc2l0KGEsITApLGUhPT0hMSk7YysrKTtyZXR1cm4gZX0sdmlzaXRBbmRMb2FkOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD10aGlzO3JldHVybiBiJiZjPT09ITAmJihmPWIoaCksZj09PSExfHxcInNraXBcIj09PWYpP2Q/ZjprKCk6aC5jaGlsZHJlbnx8aC5sYXp5PyhlPW5ldyBhLkRlZmVycmVkLGc9W10saC5sb2FkKCkuZG9uZShmdW5jdGlvbigpe2Zvcih2YXIgYz0wLGQ9aC5jaGlsZHJlbi5sZW5ndGg7YzxkO2MrKyl7aWYoZj1oLmNoaWxkcmVuW2NdLnZpc2l0QW5kTG9hZChiLCEwLCEwKSxmPT09ITEpe2UucmVqZWN0KCk7YnJlYWt9XCJza2lwXCIhPT1mJiZnLnB1c2goZil9YS53aGVuLmFwcGx5KHRoaXMsZykudGhlbihmdW5jdGlvbigpe2UucmVzb2x2ZSgpfSl9KSxlLnByb21pc2UoKSk6aygpfSx2aXNpdFBhcmVudHM6ZnVuY3Rpb24oYSxiKXtpZihiJiZhKHRoaXMpPT09ITEpcmV0dXJuITE7Zm9yKHZhciBjPXRoaXMucGFyZW50O2M7KXtpZihhKGMpPT09ITEpcmV0dXJuITE7Yz1jLnBhcmVudH1yZXR1cm4hMH0sd2FybjpmdW5jdGlvbihhKXtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyx0aGlzLnRvU3RyaW5nKCkpLGYoXCJ3YXJuXCIsYXJndW1lbnRzKX19LHQucHJvdG90eXBlPXtfbWFrZUhvb2tDb250ZXh0OmZ1bmN0aW9uKGIsYyxlKXt2YXIgZixnO3JldHVybiBiLm5vZGUhPT1kPyhjJiZiLm9yaWdpbmFsRXZlbnQhPT1jJiZhLmVycm9yKFwiaW52YWxpZCBhcmdzXCIpLGY9Yik6Yi50cmVlPyhnPWIudHJlZSxmPXtub2RlOmIsdHJlZTpnLHdpZGdldDpnLndpZGdldCxvcHRpb25zOmcud2lkZ2V0Lm9wdGlvbnMsb3JpZ2luYWxFdmVudDpjfSk6Yi53aWRnZXQ/Zj17bm9kZTpudWxsLHRyZWU6Yix3aWRnZXQ6Yi53aWRnZXQsb3B0aW9uczpiLndpZGdldC5vcHRpb25zLG9yaWdpbmFsRXZlbnQ6Y306YS5lcnJvcihcImludmFsaWQgYXJnc1wiKSxlJiZhLmV4dGVuZChmLGUpLGZ9LF9jYWxsSG9vazpmdW5jdGlvbihiLGMsZCl7dmFyIGU9dGhpcy5fbWFrZUhvb2tDb250ZXh0KGMpLGY9dGhpc1tiXSxnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gYS5pc0Z1bmN0aW9uKGYpfHxhLmVycm9yKFwiX2NhbGxIb29rKCdcIitiK1wiJykgaXMgbm90IGEgZnVuY3Rpb25cIiksZy51bnNoaWZ0KGUpLGYuYXBwbHkodGhpcyxnKX0sX3JlcXVpcmVFeHRlbnNpb246ZnVuY3Rpb24oYixjLGQsZil7ZD0hIWQ7dmFyIGc9dGhpcy5fbG9jYWwubmFtZSxoPXRoaXMub3B0aW9ucy5leHRlbnNpb25zLGk9YS5pbkFycmF5KGIsaCk8YS5pbkFycmF5KGcsaCksaj1jJiZudWxsPT10aGlzLmV4dFtiXSxrPSFqJiZudWxsIT1kJiZkIT09aTtyZXR1cm4gZShnJiZnIT09YixcImludmFsaWQgb3Igc2FtZSBuYW1lXCIpLCFqJiYha3x8KGZ8fChqfHxjPyhmPVwiJ1wiK2crXCInIGV4dGVuc2lvbiByZXF1aXJlcyAnXCIrYitcIidcIixrJiYoZis9XCIgdG8gYmUgcmVnaXN0ZXJlZCBcIisoZD9cImJlZm9yZVwiOlwiYWZ0ZXJcIikrXCIgaXRzZWxmXCIpKTpmPVwiSWYgdXNlZCB0b2dldGhlciwgYFwiK2IrXCJgIG11c3QgYmUgcmVnaXN0ZXJlZCBcIisoZD9cImJlZm9yZVwiOlwiYWZ0ZXJcIikrXCIgYFwiK2crXCJgXCIpLGEuZXJyb3IoZiksITEpfSxhY3RpdmF0ZUtleTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE5vZGVCeUtleShhKTtyZXR1cm4gYj9iLnNldEFjdGl2ZSgpOnRoaXMuYWN0aXZlTm9kZSYmdGhpcy5hY3RpdmVOb2RlLnNldEFjdGl2ZSghMSksYn0sYWRkUGFnaW5nTm9kZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnJvb3ROb2RlLmFkZFBhZ2luZ05vZGUoYSxiKX0sYXBwbHlQYXRjaDpmdW5jdGlvbihiKXt2YXIgYyxkLGYsZyxoLGksaj1iLmxlbmd0aCxrPVtdO2ZvcihkPTA7ZDxqO2QrKylmPWJbZF0sZSgyPT09Zi5sZW5ndGgsXCJwYXRjaExpc3QgbXVzdCBiZSBhbiBhcnJheSBvZiBsZW5ndGgtMi1hcnJheXNcIiksZz1mWzBdLGg9ZlsxXSxpPW51bGw9PT1nP3RoaXMucm9vdE5vZGU6dGhpcy5nZXROb2RlQnlLZXkoZyksaT8oYz1uZXcgYS5EZWZlcnJlZCxrLnB1c2goYyksaS5hcHBseVBhdGNoKGgpLmFsd2F5cyhtKGMsaSkpKTp0aGlzLndhcm4oXCJjb3VsZCBub3QgZmluZCBub2RlIHdpdGgga2V5ICdcIitnK1wiJ1wiKTtyZXR1cm4gYS53aGVuLmFwcGx5KGEsaykucHJvbWlzZSgpfSxjbGVhcjpmdW5jdGlvbihhKXt0aGlzLl9jYWxsSG9vayhcInRyZWVDbGVhclwiLHRoaXMpfSxjb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3ROb2RlLmNvdW50Q2hpbGRyZW4oKX0sZGVidWc6ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zLmRlYnVnTGV2ZWw+PTImJihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyx0aGlzLnRvU3RyaW5nKCkpLGYoXCJsb2dcIixhcmd1bWVudHMpKX0sZW5hYmxlVXBkYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhPWEhPT0hMSwhIXRoaXMuX2VuYWJsZVVwZGF0ZT09ISFhP2E6KHRoaXMuX2VuYWJsZVVwZGF0ZT1hLGE/KHRoaXMuZGVidWcoXCJlbmFibGVVcGRhdGUodHJ1ZSk6IHJlZHJhdyBcIix0aGlzLl9kaXJ0eVJvb3RzKSx0aGlzLnJlbmRlcigpKTp0aGlzLmRlYnVnKFwiZW5hYmxlVXBkYXRlKGZhbHNlKS4uLlwiKSwhYSl9LGZpbmRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucm9vdE5vZGUuZmluZEFsbChhKX0sZmluZEZpcnN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJvb3ROb2RlLmZpbmRGaXJzdChhKX0sZmluZE5leHROb2RlOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1udWxsLGY9Yy5wYXJlbnQuY2hpbGRyZW4sZz1udWxsLGg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLmNoaWxkcmVuLGc9Zi5sZW5ndGgsaT1mW2JdO2lmKGkmJmMoaSk9PT0hMSlyZXR1cm4hMTtpZihpJiZpLmNoaWxkcmVuJiZpLmV4cGFuZGVkJiZoKGksMCxjKT09PSExKXJldHVybiExO2ZvcihkPWIrMTtkPGc7ZCsrKWlmKGgoYSxkLGMpPT09ITEpcmV0dXJuITE7cmV0dXJuIGU9YS5wYXJlbnQsZT9oKGUsZS5jaGlsZHJlbi5pbmRleE9mKGEpKzEsYyk6aChhLDAsYyl9O3JldHVybiBiPVwic3RyaW5nXCI9PXR5cGVvZiBiP3IoYik6YixjPWN8fHRoaXMuZ2V0Rmlyc3RDaGlsZCgpLGgoYy5wYXJlbnQsZi5pbmRleE9mKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBkIT09ZSYmKGU9ZXx8ZCxhKGQuc3BhbikuaXMoXCI6dmlzaWJsZVwiKT8oIWIoZCl8fChnPWQsZz09PWMpKSYmdm9pZCAwOnZvaWQgZC5kZWJ1ZyhcInF1aWNrc2VhcmNoOiBza2lwcGluZyBoaWRkZW4gbm9kZVwiKSl9KSxnfSxnZW5lcmF0ZUZvcm1FbGVtZW50czpmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShiKXtqLmFwcGVuZChhKFwiPGlucHV0PlwiLHt0eXBlOlwiY2hlY2tib3hcIixuYW1lOmcsdmFsdWU6Yi5rZXksY2hlY2tlZDohMH0pKX1kPWR8fHt9O3ZhciBmLGc9XCJzdHJpbmdcIj09dHlwZW9mIGI/YjpcImZ0X1wiK3RoaXMuX2lkK1wiW11cIixoPVwic3RyaW5nXCI9PXR5cGVvZiBjP2M6XCJmdF9cIit0aGlzLl9pZCtcIl9hY3RpdmVcIixpPVwiZmFuY3l0cmVlX3Jlc3VsdF9cIit0aGlzLl9pZCxqPWEoXCIjXCIraSksaz0zPT09dGhpcy5vcHRpb25zLnNlbGVjdE1vZGUmJmQuc3RvcE9uUGFyZW50cyE9PSExO2oubGVuZ3RoP2ouZW1wdHkoKTpqPWEoXCI8ZGl2PlwiLHtpZDppfSkuaGlkZSgpLmluc2VydEFmdGVyKHRoaXMuJGNvbnRhaW5lciksYyE9PSExJiZ0aGlzLmFjdGl2ZU5vZGUmJmouYXBwZW5kKGEoXCI8aW5wdXQ+XCIse3R5cGU6XCJyYWRpb1wiLG5hbWU6aCx2YWx1ZTp0aGlzLmFjdGl2ZU5vZGUua2V5LGNoZWNrZWQ6ITB9KSksZC5maWx0ZXI/dGhpcy52aXNpdChmdW5jdGlvbihhKXt2YXIgYj1kLmZpbHRlcihhKTtyZXR1cm5cInNraXBcIj09PWI/Yjp2b2lkKGIhPT0hMSYmZShhKSl9KTpiIT09ITEmJihmPXRoaXMuZ2V0U2VsZWN0ZWROb2RlcyhrKSxhLmVhY2goZixmdW5jdGlvbihhLGIpe2UoYil9KSl9LGdldEFjdGl2ZU5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVOb2RlfSxnZXRGaXJzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE5vZGUuZ2V0Rmlyc3RDaGlsZCgpfSxnZXRGb2N1c05vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb2N1c05vZGV9LGdldE5vZGVCeUtleTpmdW5jdGlvbihhLGIpe3ZhciBkLGU7cmV0dXJuIWImJihkPWMuZ2V0RWxlbWVudEJ5SWQodGhpcy5vcHRpb25zLmlkUHJlZml4K2EpKT9kLmZ0bm9kZT9kLmZ0bm9kZTpudWxsOihiPWJ8fHRoaXMucm9vdE5vZGUsZT1udWxsLGIudmlzaXQoZnVuY3Rpb24oYil7aWYoYi5rZXk9PT1hKXJldHVybiBlPWIsITF9LCEwKSxlKX0sZ2V0Um9vdE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Tm9kZX0sZ2V0U2VsZWN0ZWROb2RlczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yb290Tm9kZS5nZXRTZWxlY3RlZE5vZGVzKGEpfSxoYXNGb2N1czpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5faGFzRm9jdXN9LGluZm86ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zLmRlYnVnTGV2ZWw+PTEmJihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyx0aGlzLnRvU3RyaW5nKCkpLGYoXCJpbmZvXCIsYXJndW1lbnRzKSl9LGxvYWRLZXlQYXRoOmZ1bmN0aW9uKGIsYyxlKXtmdW5jdGlvbiBmKGEsYixkKXtjLmNhbGwocixiLFwibG9hZGluZ1wiKSxiLmxvYWQoKS5kb25lKGZ1bmN0aW9uKCl7ci5sb2FkS2V5UGF0aC5jYWxsKHIsbFthXSxjLGIpLmFsd2F5cyhtKGQscikpfSkuZmFpbChmdW5jdGlvbihlKXtyLndhcm4oXCJsb2FkS2V5UGF0aDogZXJyb3IgbG9hZGluZzogXCIrYStcIiAocGFyZW50OiBcIitvK1wiKVwiKSxjLmNhbGwocixiLFwiZXJyb3JcIiksZC5yZWplY3QoKX0pfXZhciBnLGgsaSxqLGssbCxuLG8scCxxPXRoaXMub3B0aW9ucy5rZXlQYXRoU2VwYXJhdG9yLHI9dGhpcztmb3IoYz1jfHxhLm5vb3AsYS5pc0FycmF5KGIpfHwoYj1bYl0pLGw9e30saT0wO2k8Yi5sZW5ndGg7aSsrKWZvcihvPWV8fHRoaXMucm9vdE5vZGUsaj1iW2ldLGouY2hhckF0KDApPT09cSYmKGo9ai5zdWJzdHIoMSkpLHA9ai5zcGxpdChxKTtwLmxlbmd0aDspe2lmKGs9cC5zaGlmdCgpLG49by5fZmluZERpcmVjdENoaWxkKGspLCFuKXt0aGlzLndhcm4oXCJsb2FkS2V5UGF0aDoga2V5IG5vdCBmb3VuZDogXCIraytcIiAocGFyZW50OiBcIitvK1wiKVwiKSxjLmNhbGwodGhpcyxrLFwiZXJyb3JcIik7YnJlYWt9aWYoMD09PXAubGVuZ3RoKXtjLmNhbGwodGhpcyxuLFwib2tcIik7YnJlYWt9aWYobi5sYXp5JiZuLmhhc0NoaWxkcmVuKCk9PT1kKXtjLmNhbGwodGhpcyxuLFwibG9hZGVkXCIpLGxba10/bFtrXS5wdXNoKHAuam9pbihxKSk6bFtrXT1bcC5qb2luKHEpXTticmVha31jLmNhbGwodGhpcyxuLFwibG9hZGVkXCIpLG89bn1nPVtdO2ZvcihrIGluIGwpbj1vLl9maW5kRGlyZWN0Q2hpbGQoayksbnVsbD09biYmKG49ci5nZXROb2RlQnlLZXkoaykpLGg9bmV3IGEuRGVmZXJyZWQsZy5wdXNoKGgpLGYoayxuLGgpO3JldHVybiBhLndoZW4uYXBwbHkoYSxnKS5wcm9taXNlKCl9LHJlYWN0aXZhdGU6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmFjdGl2ZU5vZGU7cmV0dXJuIGM/KHRoaXMuYWN0aXZlTm9kZT1udWxsLGI9Yy5zZXRBY3RpdmUoITAse25vRm9jdXM6ITB9KSxhJiZjLnNldEZvY3VzKCksYik6aygpfSxyZWxvYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2NhbGxIb29rKFwidHJlZUNsZWFyXCIsdGhpcyksdGhpcy5fY2FsbEhvb2soXCJ0cmVlTG9hZFwiLHRoaXMsYSl9LHJlbmRlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnJvb3ROb2RlLnJlbmRlcihhLGIpfSxzZXRGb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fY2FsbEhvb2soXCJ0cmVlU2V0Rm9jdXNcIix0aGlzLGEpfSx0b0RpY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJvb3ROb2RlLnRvRGljdCghMCxiKTtyZXR1cm4gYT9jOmMuY2hpbGRyZW59LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCI8RmFuY3l0cmVlKCNcIit0aGlzLl9pZCtcIik+XCJ9LF90cmlnZ2VyTm9kZUV2ZW50OmZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmPXRoaXMuX21ha2VIb29rQ29udGV4dChiLGMsZSksZz10aGlzLndpZGdldC5fdHJpZ2dlcihhLGMsZik7cmV0dXJuIGchPT0hMSYmZi5yZXN1bHQhPT1kP2YucmVzdWx0Omd9LF90cmlnZ2VyVHJlZUV2ZW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZT10aGlzLl9tYWtlSG9va0NvbnRleHQodGhpcyxiLGMpLGY9dGhpcy53aWRnZXQuX3RyaWdnZXIoYSxiLGUpO3JldHVybiBmIT09ITEmJmUucmVzdWx0IT09ZD9lLnJlc3VsdDpmfSx2aXNpdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yb290Tm9kZS52aXNpdChhLCExKX0sd2FybjpmdW5jdGlvbihhKXtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyx0aGlzLnRvU3RyaW5nKCkpLGYoXCJ3YXJuXCIsYXJndW1lbnRzKX19LGEuZXh0ZW5kKHQucHJvdG90eXBlLHtub2RlQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPWEudGFyZ2V0VHlwZSxlPWEubm9kZTtpZihcImV4cGFuZGVyXCI9PT1kKXtpZihlLmlzTG9hZGluZygpKXJldHVybiB2b2lkIGUuZGVidWcoXCJHb3QgMm5kIGNsaWNrIHdoaWxlIGxvYWRpbmc6IGlnbm9yZWRcIik7dGhpcy5fY2FsbEhvb2soXCJub2RlVG9nZ2xlRXhwYW5kZWRcIixhKX1lbHNlIGlmKFwiY2hlY2tib3hcIj09PWQpdGhpcy5fY2FsbEhvb2soXCJub2RlVG9nZ2xlU2VsZWN0ZWRcIixhKSxhLm9wdGlvbnMuZm9jdXNPblNlbGVjdCYmdGhpcy5fY2FsbEhvb2soXCJub2RlU2V0Rm9jdXNcIixhLCEwKTtlbHNle2lmKGM9ITEsYj0hMCxlLmZvbGRlcilzd2l0Y2goYS5vcHRpb25zLmNsaWNrRm9sZGVyTW9kZSl7Y2FzZSAyOmM9ITAsYj0hMTticmVhaztjYXNlIDM6Yj0hMCxjPSEwfWImJih0aGlzLm5vZGVTZXRGb2N1cyhhKSx0aGlzLl9jYWxsSG9vayhcIm5vZGVTZXRBY3RpdmVcIixhLCEwKSksYyYmdGhpcy5fY2FsbEhvb2soXCJub2RlVG9nZ2xlRXhwYW5kZWRcIixhKX19LG5vZGVDb2xsYXBzZVNpYmxpbmdzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9YS5ub2RlO2lmKGYucGFyZW50KWZvcihjPWYucGFyZW50LmNoaWxkcmVuLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspY1tkXSE9PWYmJmNbZF0uZXhwYW5kZWQmJnRoaXMuX2NhbGxIb29rKFwibm9kZVNldEV4cGFuZGVkXCIsY1tkXSwhMSxiKX0sbm9kZURibGNsaWNrOmZ1bmN0aW9uKGEpe1widGl0bGVcIj09PWEudGFyZ2V0VHlwZSYmND09PWEub3B0aW9ucy5jbGlja0ZvbGRlck1vZGUmJnRoaXMuX2NhbGxIb29rKFwibm9kZVRvZ2dsZUV4cGFuZGVkXCIsYSksXCJ0aXRsZVwiPT09YS50YXJnZXRUeXBlJiZhLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKX0sbm9kZUtleWRvd246ZnVuY3Rpb24oYil7dmFyIGMsZCxlLGYsZz1iLm9yaWdpbmFsRXZlbnQsaD1iLm5vZGUsaT1iLnRyZWUsaj1iLm9wdGlvbnMsaz1nLndoaWNoLGw9U3RyaW5nLmZyb21DaGFyQ29kZShrKSxtPSEoZy5hbHRLZXl8fGcuY3RybEtleXx8Zy5tZXRhS2V5fHxnLnNoaWZ0S2V5KSxuPWEoZy50YXJnZXQpLG89ITAscD0hKGcuY3RybEtleXx8IWouYXV0b0FjdGl2YXRlKTtpZihofHwoZj10aGlzLmdldEFjdGl2ZU5vZGUoKXx8dGhpcy5nZXRGaXJzdENoaWxkKCksZiYmKGYuc2V0Rm9jdXMoKSxoPWIubm9kZT10aGlzLmZvY3VzTm9kZSxoLmRlYnVnKFwiS2V5ZG93biBmb3JjZSBmb2N1cyBvbiBhY3RpdmUgbm9kZVwiKSkpLGoucXVpY2tzZWFyY2gmJm0mJi9cXHcvLnRlc3QobCkmJiFEW2tdJiYhbi5pcyhcIjppbnB1dDplbmFibGVkXCIpKXJldHVybiBkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQtaS5sYXN0UXVpY2tzZWFyY2hUaW1lPjUwMCYmKGkubGFzdFF1aWNrc2VhcmNoVGVybT1cIlwiKSxpLmxhc3RRdWlja3NlYXJjaFRpbWU9ZCxpLmxhc3RRdWlja3NlYXJjaFRlcm0rPWwsYz1pLmZpbmROZXh0Tm9kZShpLmxhc3RRdWlja3NlYXJjaFRlcm0saS5nZXRBY3RpdmVOb2RlKCkpLGMmJmMuc2V0QWN0aXZlKCksdm9pZCBnLnByZXZlbnREZWZhdWx0KCk7c3dpdGNoKHcuZXZlbnRUb1N0cmluZyhnKSl7Y2FzZVwiK1wiOmNhc2VcIj1cIjppLm5vZGVTZXRFeHBhbmRlZChiLCEwKTticmVhaztjYXNlXCItXCI6aS5ub2RlU2V0RXhwYW5kZWQoYiwhMSk7YnJlYWs7Y2FzZVwic3BhY2VcIjpoLmlzUGFnaW5nTm9kZSgpP2kuX3RyaWdnZXJOb2RlRXZlbnQoXCJjbGlja1BhZ2luZ1wiLGIsZyk6ai5jaGVja2JveD9pLm5vZGVUb2dnbGVTZWxlY3RlZChiKTppLm5vZGVTZXRBY3RpdmUoYiwhMCk7YnJlYWs7Y2FzZVwicmV0dXJuXCI6aS5ub2RlU2V0QWN0aXZlKGIsITApO2JyZWFrO2Nhc2VcImhvbWVcIjpjYXNlXCJlbmRcIjpjYXNlXCJiYWNrc3BhY2VcIjpjYXNlXCJsZWZ0XCI6Y2FzZVwicmlnaHRcIjpjYXNlXCJ1cFwiOmNhc2VcImRvd25cIjplPWgubmF2aWdhdGUoZy53aGljaCxwLCEwKTticmVhaztkZWZhdWx0Om89ITF9byYmZy5wcmV2ZW50RGVmYXVsdCgpfSxub2RlTG9hZENoaWxkcmVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZixnLGg9Yi50cmVlLGk9Yi5ub2RlLGo9KG5ldyBEYXRlKS5nZXRUaW1lKCk7cmV0dXJuIGEuaXNGdW5jdGlvbihjKSYmKGM9Yy5jYWxsKGgse3R5cGU6XCJzb3VyY2VcIn0sYiksZSghYS5pc0Z1bmN0aW9uKGMpLFwic291cmNlIGNhbGxiYWNrIG11c3Qgbm90IHJldHVybiBhbm90aGVyIGZ1bmN0aW9uXCIpKSxjLnVybCYmKGkuX3JlcXVlc3RJZCYmaS53YXJuKFwiUmVjdXJzaXZlIGxvYWQgcmVxdWVzdCAjXCIraitcIiB3aGlsZSAjXCIraS5fcmVxdWVzdElkK1wiIGlzIHBlbmRpbmcuXCIpLGQ9YS5leHRlbmQoe30sYi5vcHRpb25zLmFqYXgsYyksaS5fcmVxdWVzdElkPWosZC5kZWJ1Z0RlbGF5PyhmPWQuZGVidWdEZWxheSxhLmlzQXJyYXkoZikmJihmPWZbMF0rTWF0aC5yYW5kb20oKSooZlsxXS1mWzBdKSksaS53YXJuKFwibm9kZUxvYWRDaGlsZHJlbiB3YWl0aW5nIGRlYnVnRGVsYXkgXCIrTWF0aC5yb3VuZChmKStcIiBtcyAuLi5cIiksZC5kZWJ1Z0RlbGF5PSExLGc9YS5EZWZlcnJlZChmdW5jdGlvbihiKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5hamF4KGQpLmRvbmUoZnVuY3Rpb24oKXtiLnJlc29sdmVXaXRoKHRoaXMsYXJndW1lbnRzKX0pLmZhaWwoZnVuY3Rpb24oKXtiLnJlamVjdFdpdGgodGhpcyxhcmd1bWVudHMpfSl9LGYpfSkpOmc9YS5hamF4KGQpLGM9bmV3IGEuRGVmZXJyZWQsZy5kb25lKGZ1bmN0aW9uKGQsZSxmKXt2YXIgZyxrO2lmKFwianNvblwiIT09dGhpcy5kYXRhVHlwZSYmXCJqc29ucFwiIT09dGhpcy5kYXRhVHlwZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGR8fGEuZXJyb3IoXCJBamF4IHJlcXVlc3QgcmV0dXJuZWQgYSBzdHJpbmcgKGRpZCB5b3UgZ2V0IHRoZSBKU09OIGRhdGFUeXBlIHdyb25nPykuXCIpLGkuX3JlcXVlc3RJZCYmaS5fcmVxdWVzdElkPmopcmV0dXJuIHZvaWQgYy5yZWplY3RXaXRoKHRoaXMsW0FdKTtpZihiLm9wdGlvbnMucG9zdFByb2Nlc3Mpe3RyeXtrPWguX3RyaWdnZXJOb2RlRXZlbnQoXCJwb3N0UHJvY2Vzc1wiLGIsYi5vcmlnaW5hbEV2ZW50LHtyZXNwb25zZTpkLGVycm9yOm51bGwsZGF0YVR5cGU6dGhpcy5kYXRhVHlwZX0pfWNhdGNoKGwpe2s9e2Vycm9yOmwsbWVzc2FnZTpcIlwiK2wsZGV0YWlsczpcInBvc3RQcm9jZXNzIGZhaWxlZFwifX1pZihrLmVycm9yKXJldHVybiBnPWEuaXNQbGFpbk9iamVjdChrLmVycm9yKT9rLmVycm9yOnttZXNzYWdlOmsuZXJyb3J9LGc9aC5fbWFrZUhvb2tDb250ZXh0KGksbnVsbCxnKSx2b2lkIGMucmVqZWN0V2l0aCh0aGlzLFtnXSk7ZD1hLmlzQXJyYXkoayk/azpkfWVsc2UgZCYmZC5oYXNPd25Qcm9wZXJ0eShcImRcIikmJmIub3B0aW9ucy5lbmFibGVBc3B4JiYoZD1cInN0cmluZ1wiPT10eXBlb2YgZC5kP2EucGFyc2VKU09OKGQuZCk6ZC5kKTtjLnJlc29sdmVXaXRoKHRoaXMsW2RdKX0pLmZhaWwoZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWguX21ha2VIb29rQ29udGV4dChpLG51bGwse2Vycm9yOmEsYXJnczpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLG1lc3NhZ2U6ZCxkZXRhaWxzOmEuc3RhdHVzK1wiOiBcIitkfSk7Yy5yZWplY3RXaXRoKHRoaXMsW2VdKX0pKSxhLmlzRnVuY3Rpb24oYy50aGVuKSYmYS5pc0Z1bmN0aW9uKGNbXCJjYXRjaFwiXSkmJihnPWMsYz1uZXcgYS5EZWZlcnJlZCxnLnRoZW4oZnVuY3Rpb24oYSl7Yy5yZXNvbHZlKGEpfSxmdW5jdGlvbihhKXtjLnJlamVjdChhKX0pKSxhLmlzRnVuY3Rpb24oYy5wcm9taXNlKSYmKGgubm9kZVNldFN0YXR1cyhiLFwibG9hZGluZ1wiKSxjLmRvbmUoZnVuY3Rpb24oYSl7aC5ub2RlU2V0U3RhdHVzKGIsXCJva1wiKSxpLl9yZXF1ZXN0SWQ9bnVsbH0pLmZhaWwoZnVuY3Rpb24oYSl7dmFyIGM7cmV0dXJuIGE9PT1BP3ZvaWQgaS53YXJuKFwiSWdub3JlZCByZXNwb25zZSBmb3Igb2Jzb2xldGUgbG9hZCByZXF1ZXN0ICNcIitqK1wiIChleHBlY3RlZCAjXCIraS5fcmVxdWVzdElkK1wiKVwiKTooYS5ub2RlJiZhLmVycm9yJiZhLm1lc3NhZ2U/Yz1hOihjPWguX21ha2VIb29rQ29udGV4dChpLG51bGwse2Vycm9yOmEsYXJnczpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLG1lc3NhZ2U6YT9hLm1lc3NhZ2V8fGEudG9TdHJpbmcoKTpcIlwifSksXCJbb2JqZWN0IE9iamVjdF1cIj09PWMubWVzc2FnZSYmKGMubWVzc2FnZT1cIlwiKSksaS53YXJuKFwiTG9hZCBjaGlsZHJlbiBmYWlsZWQgKFwiK2MubWVzc2FnZStcIilcIixjKSx2b2lkKGguX3RyaWdnZXJOb2RlRXZlbnQoXCJsb2FkRXJyb3JcIixjLG51bGwpIT09ITEmJmgubm9kZVNldFN0YXR1cyhiLFwiZXJyb3JcIixjLm1lc3NhZ2UsYy5kZXRhaWxzKSkpfSkpLFxuYS53aGVuKGMpLmRvbmUoZnVuY3Rpb24oYil7dmFyIGM7YS5pc1BsYWluT2JqZWN0KGIpJiYoZShpLmlzUm9vdE5vZGUoKSxcInNvdXJjZSBtYXkgb25seSBiZSBhbiBvYmplY3QgZm9yIHJvb3Qgbm9kZXMgKGV4cGVjdGluZyBhbiBhcnJheSBvZiBjaGlsZCBvYmplY3RzIG90aGVyd2lzZSlcIiksZShhLmlzQXJyYXkoYi5jaGlsZHJlbiksXCJpZiBhbiBvYmplY3QgaXMgcGFzc2VkIGFzIHNvdXJjZSwgaXQgbXVzdCBjb250YWluIGEgJ2NoaWxkcmVuJyBhcnJheSAoYWxsIG90aGVyIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvICd0cmVlLmRhdGEnKVwiKSxjPWIsYj1iLmNoaWxkcmVuLGRlbGV0ZSBjLmNoaWxkcmVuLGEuZXh0ZW5kKGguZGF0YSxjKSksZShhLmlzQXJyYXkoYiksXCJleHBlY3RlZCBhcnJheSBvZiBjaGlsZHJlblwiKSxpLl9zZXRDaGlsZHJlbihiKSxoLl90cmlnZ2VyTm9kZUV2ZW50KFwibG9hZENoaWxkcmVuXCIsaSl9KX0sbm9kZUxvYWRLZXlQYXRoOmZ1bmN0aW9uKGEsYil7fSxub2RlUmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYixjKXt2YXIgZCxmPWIubm9kZSxnPWEuZXh0ZW5kKHt9LGIse25vZGU6Y30pLGg9Zi5jaGlsZHJlbjtyZXR1cm4gMT09PWgubGVuZ3RoPyhlKGM9PT1oWzBdLFwiaW52YWxpZCBzaW5nbGUgY2hpbGRcIiksdGhpcy5ub2RlUmVtb3ZlQ2hpbGRyZW4oYikpOih0aGlzLmFjdGl2ZU5vZGUmJihjPT09dGhpcy5hY3RpdmVOb2RlfHx0aGlzLmFjdGl2ZU5vZGUuaXNEZXNjZW5kYW50T2YoYykpJiZ0aGlzLmFjdGl2ZU5vZGUuc2V0QWN0aXZlKCExKSx0aGlzLmZvY3VzTm9kZSYmKGM9PT10aGlzLmZvY3VzTm9kZXx8dGhpcy5mb2N1c05vZGUuaXNEZXNjZW5kYW50T2YoYykpJiYodGhpcy5mb2N1c05vZGU9bnVsbCksdGhpcy5ub2RlUmVtb3ZlTWFya3VwKGcpLHRoaXMubm9kZVJlbW92ZUNoaWxkcmVuKGcpLGQ9YS5pbkFycmF5KGMsaCksZShkPj0wLFwiaW52YWxpZCBjaGlsZFwiKSxmLnRyaWdnZXJNb2RpZnlDaGlsZChcInJlbW92ZVwiLGMpLGMudmlzaXQoZnVuY3Rpb24oYSl7YS5wYXJlbnQ9bnVsbH0sITApLHRoaXMuX2NhbGxIb29rKFwidHJlZVJlZ2lzdGVyTm9kZVwiLHRoaXMsITEsYyksdm9pZCBoLnNwbGljZShkLDEpKX0sbm9kZVJlbW92ZUNoaWxkTWFya3VwOmZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZTtjLnVsJiYoYy5pc1Jvb3ROb2RlKCk/YShjLnVsKS5lbXB0eSgpOihhKGMudWwpLnJlbW92ZSgpLGMudWw9bnVsbCksYy52aXNpdChmdW5jdGlvbihhKXthLmxpPWEudWw9bnVsbH0pKX0sbm9kZVJlbW92ZUNoaWxkcmVuOmZ1bmN0aW9uKGIpe3ZhciBjLGQ9Yi50cmVlLGU9Yi5ub2RlLGY9ZS5jaGlsZHJlbjtmJiYodGhpcy5hY3RpdmVOb2RlJiZ0aGlzLmFjdGl2ZU5vZGUuaXNEZXNjZW5kYW50T2YoZSkmJnRoaXMuYWN0aXZlTm9kZS5zZXRBY3RpdmUoITEpLHRoaXMuZm9jdXNOb2RlJiZ0aGlzLmZvY3VzTm9kZS5pc0Rlc2NlbmRhbnRPZihlKSYmKHRoaXMuZm9jdXNOb2RlPW51bGwpLHRoaXMubm9kZVJlbW92ZUNoaWxkTWFya3VwKGIpLGM9YS5leHRlbmQoe30sYiksZS50cmlnZ2VyTW9kaWZ5Q2hpbGQoXCJyZW1vdmVcIixudWxsKSxlLnZpc2l0KGZ1bmN0aW9uKGEpe2EucGFyZW50PW51bGwsZC5fY2FsbEhvb2soXCJ0cmVlUmVnaXN0ZXJOb2RlXCIsZCwhMSxhKX0pLGUubGF6eT9lLmNoaWxkcmVuPVtdOmUuY2hpbGRyZW49bnVsbCxlLmlzUm9vdE5vZGUoKXx8KGUuZXhwYW5kZWQ9ITEpLHRoaXMubm9kZVJlbmRlclN0YXR1cyhiKSl9LG5vZGVSZW1vdmVNYXJrdXA6ZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlO2MubGkmJihhKGMubGkpLnJlbW92ZSgpLGMubGk9bnVsbCksdGhpcy5ub2RlUmVtb3ZlQ2hpbGRNYXJrdXAoYil9LG5vZGVSZW5kZXI6ZnVuY3Rpb24oYixkLGYsZyxoKXt2YXIgaSxqLGssbCxtLG4sbyxwPWIubm9kZSxxPWIudHJlZSxyPWIub3B0aW9ucyxzPXIuYXJpYSx0PSExLHU9cC5wYXJlbnQsdj0hdSx3PXAuY2hpbGRyZW4seD1udWxsO2lmKHEuX2VuYWJsZVVwZGF0ZSE9PSExJiYodnx8dS51bCkpe2lmKGUodnx8dS51bCxcInBhcmVudCBVTCBtdXN0IGV4aXN0XCIpLHZ8fChwLmxpJiYoZHx8cC5saS5wYXJlbnROb2RlIT09cC5wYXJlbnQudWwpJiYocC5saS5wYXJlbnROb2RlPT09cC5wYXJlbnQudWw/eD1wLmxpLm5leHRTaWJsaW5nOnRoaXMuZGVidWcoXCJVbmxpbmtpbmcgXCIrcCtcIiAobXVzdCBiZSBjaGlsZCBvZiBcIitwLnBhcmVudCtcIilcIiksdGhpcy5ub2RlUmVtb3ZlTWFya3VwKGIpKSxwLmxpP3RoaXMubm9kZVJlbmRlclN0YXR1cyhiKToodD0hMCxwLmxpPWMuY3JlYXRlRWxlbWVudChcImxpXCIpLHAubGkuZnRub2RlPXAscC5rZXkmJnIuZ2VuZXJhdGVJZHMmJihwLmxpLmlkPXIuaWRQcmVmaXgrcC5rZXkpLHAuc3Bhbj1jLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHAuc3Bhbi5jbGFzc05hbWU9XCJmYW5jeXRyZWUtbm9kZVwiLHMmJmEocC5saSkuYXR0cihcImFyaWEtbGFiZWxsZWRieVwiLFwiZnRhbF9cIityLmlkUHJlZml4K3Aua2V5KSxwLmxpLmFwcGVuZENoaWxkKHAuc3BhbiksdGhpcy5ub2RlUmVuZGVyVGl0bGUoYiksci5jcmVhdGVOb2RlJiZyLmNyZWF0ZU5vZGUuY2FsbChxLHt0eXBlOlwiY3JlYXRlTm9kZVwifSxiKSksci5yZW5kZXJOb2RlJiZyLnJlbmRlck5vZGUuY2FsbChxLHt0eXBlOlwicmVuZGVyTm9kZVwifSxiKSksdyl7aWYodnx8cC5leHBhbmRlZHx8Zj09PSEwKXtmb3IocC51bHx8KHAudWw9Yy5jcmVhdGVFbGVtZW50KFwidWxcIiksKGchPT0hMHx8aCkmJnAuZXhwYW5kZWR8fChwLnVsLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHMmJmEocC51bCkuYXR0cihcInJvbGVcIixcImdyb3VwXCIpLHAubGk/cC5saS5hcHBlbmRDaGlsZChwLnVsKTpwLnRyZWUuJGRpdi5hcHBlbmQocC51bCkpLGw9MCxtPXcubGVuZ3RoO2w8bTtsKyspbz1hLmV4dGVuZCh7fSxiLHtub2RlOndbbF19KSx0aGlzLm5vZGVSZW5kZXIobyxkLGYsITEsITApO2ZvcihpPXAudWwuZmlyc3RDaGlsZDtpOylrPWkuZnRub2RlLGsmJmsucGFyZW50IT09cD8ocC5kZWJ1ZyhcIl9maXhQYXJlbnQ6IHJlbW92ZSBtaXNzaW5nIFwiK2ssaSksbj1pLm5leHRTaWJsaW5nLGkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpKSxpPW4pOmk9aS5uZXh0U2libGluZztmb3IoaT1wLnVsLmZpcnN0Q2hpbGQsbD0wLG09dy5sZW5ndGgtMTtsPG07bCsrKWo9d1tsXSxrPWkuZnRub2RlLGohPT1rP3AudWwuaW5zZXJ0QmVmb3JlKGoubGksay5saSk6aT1pLm5leHRTaWJsaW5nfX1lbHNlIHAudWwmJih0aGlzLndhcm4oXCJyZW1vdmUgY2hpbGQgbWFya3VwIGZvciBcIitwKSx0aGlzLm5vZGVSZW1vdmVDaGlsZE1hcmt1cChiKSk7dnx8dCYmdS51bC5pbnNlcnRCZWZvcmUocC5saSx4KX19LG5vZGVSZW5kZXJUaXRsZTpmdW5jdGlvbihiLGMpe3ZhciBlLGYsZyxoLGksaixrPWIubm9kZSxsPWIudHJlZSxtPWIub3B0aW9ucyxuPW0uYXJpYSxxPWsuZ2V0TGV2ZWwoKSxyPVtdO2MhPT1kJiYoay50aXRsZT1jKSxrLnNwYW4mJmwuX2VuYWJsZVVwZGF0ZSE9PSExJiYocTxtLm1pbkV4cGFuZExldmVsPyhrLmxhenl8fChrLmV4cGFuZGVkPSEwKSxxPjEmJihuP3IucHVzaChcIjxzcGFuIHJvbGU9J2J1dHRvbicgY2xhc3M9J2ZhbmN5dHJlZS1leHBhbmRlciBmYW5jeXRyZWUtZXhwYW5kZXItZml4ZWQnPjwvc3Bhbj5cIik6ci5wdXNoKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1leHBhbmRlciBmYW5jeXRyZWUtZXhwYW5kZXItZml4ZWQnJz48L3NwYW4+XCIpKSk6bj9yLnB1c2goXCI8c3BhbiByb2xlPSdidXR0b24nIGNsYXNzPSdmYW5jeXRyZWUtZXhwYW5kZXInPjwvc3Bhbj5cIik6ci5wdXNoKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1leHBhbmRlcic+PC9zcGFuPlwiKSxtLmNoZWNrYm94JiZrLmhpZGVDaGVja2JveCE9PSEwJiYhay5pc1N0YXR1c05vZGUoKSYmKG4/ci5wdXNoKFwiPHNwYW4gcm9sZT0nY2hlY2tib3gnIGNsYXNzPSdmYW5jeXRyZWUtY2hlY2tib3gnPjwvc3Bhbj5cIik6ci5wdXNoKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1jaGVja2JveCc+PC9zcGFuPlwiKSksay5kYXRhLmljb25DbGFzcyE9PWQmJihrLmljb24/YS5lcnJvcihcIidpY29uQ2xhc3MnIG5vZGUgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTQuMDogdXNlICdpY29uJyBvbmx5IGluc3RlYWRcIik6KGsud2FybihcIidpY29uQ2xhc3MnIG5vZGUgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTQuMDogdXNlICdpY29uJyBpbnN0ZWFkXCIpLGsuaWNvbj1rLmRhdGEuaWNvbkNsYXNzKSksYS5pc0Z1bmN0aW9uKG0uaWNvbik/KGY9bS5pY29uLmNhbGwobCx7dHlwZTpcImljb25cIn0sYiksbnVsbD09ZiYmKGY9ay5pY29uKSk6Zj1udWxsIT1rLmljb24/ay5pY29uOm0uaWNvbixudWxsPT1mP2Y9ITA6XCJib29sZWFuXCIhPXR5cGVvZiBmJiYoZj1cIlwiK2YpLGYhPT0hMSYmKGg9bj9cIiByb2xlPSdpbWcnXCI6XCJcIixcInN0cmluZ1wiPT10eXBlb2YgZj94LnRlc3QoZik/KGY9XCIvXCI9PT1mLmNoYXJBdCgwKT9mOihtLmltYWdlUGF0aHx8XCJcIikrZixyLnB1c2goXCI8aW1nIHNyYz0nXCIrZitcIicgY2xhc3M9J2ZhbmN5dHJlZS1pY29uJyBhbHQ9JycgLz5cIikpOnIucHVzaChcIjxzcGFuIFwiK2grXCIgY2xhc3M9J2ZhbmN5dHJlZS1jdXN0b20taWNvbiBcIitmK1wiJz48L3NwYW4+XCIpOnIucHVzaChcIjxzcGFuIFwiK2grXCIgY2xhc3M9J2ZhbmN5dHJlZS1pY29uJz48L3NwYW4+XCIpKSxnPVwiXCIsbS5yZW5kZXJUaXRsZSYmKGc9bS5yZW5kZXJUaXRsZS5jYWxsKGwse3R5cGU6XCJyZW5kZXJUaXRsZVwifSxiKXx8XCJcIiksZ3x8KGsudG9vbHRpcD9qPWsudG9vbHRpcDptLnRvb2x0aXAmJihqPW0udG9vbHRpcD09PSEwP2sudGl0bGU6bS50b29sdGlwLmNhbGwobCxrKSksaj1qP1wiIHRpdGxlPSdcIitwKGopK1wiJ1wiOlwiXCIsZT1uP1wiIGlkPSdmdGFsX1wiK20uaWRQcmVmaXgray5rZXkrXCInXCI6XCJcIixoPW4/XCIgcm9sZT0ndHJlZWl0ZW0nXCI6XCJcIixpPW0udGl0bGVzVGFiYmFibGU/XCIgdGFiaW5kZXg9JzAnXCI6XCJcIixnPVwiPHNwYW4gXCIraCtcIiBjbGFzcz0nZmFuY3l0cmVlLXRpdGxlJ1wiK2UraitpK1wiPlwiKyhtLmVzY2FwZVRpdGxlcz9vKGsudGl0bGUpOmsudGl0bGUpK1wiPC9zcGFuPlwiKSxyLnB1c2goZyksay5zcGFuLmlubmVySFRNTD1yLmpvaW4oXCJcIiksdGhpcy5ub2RlUmVuZGVyU3RhdHVzKGIpLG0uZW5oYW5jZVRpdGxlJiYoYi4kdGl0bGU9YShcIj5zcGFuLmZhbmN5dHJlZS10aXRsZVwiLGsuc3BhbiksZz1tLmVuaGFuY2VUaXRsZS5jYWxsKGwse3R5cGU6XCJlbmhhbmNlVGl0bGVcIn0sYil8fFwiXCIpKX0sbm9kZVJlbmRlclN0YXR1czpmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGUsZD1iLnRyZWUsZT1iLm9wdGlvbnMsZj1jLmhhc0NoaWxkcmVuKCksZz1jLmlzTGFzdFNpYmxpbmcoKSxoPWUuYXJpYSxpPWEoYy5zcGFuKS5maW5kKFwiLmZhbmN5dHJlZS10aXRsZVwiKSxqPWUuX2NsYXNzTmFtZXMsaz1bXSxsPWNbZC5zdGF0dXNDbGFzc1Byb3BOYW1lXTtsJiZkLl9lbmFibGVVcGRhdGUhPT0hMSYmKGsucHVzaChqLm5vZGUpLGQuYWN0aXZlTm9kZT09PWMmJmsucHVzaChqLmFjdGl2ZSksZC5mb2N1c05vZGU9PT1jJiZrLnB1c2goai5mb2N1c2VkKSxjLmV4cGFuZGVkPyhrLnB1c2goai5leHBhbmRlZCksaCYmaS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSk6aCYmKGY/aS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKTppLnJlbW92ZUF0dHIoXCJhcmlhLWV4cGFuZGVkXCIpKSxjLmZvbGRlciYmay5wdXNoKGouZm9sZGVyKSxmIT09ITEmJmsucHVzaChqLmhhc0NoaWxkcmVuKSxnJiZrLnB1c2goai5sYXN0c2liKSxjLmxhenkmJm51bGw9PWMuY2hpbGRyZW4mJmsucHVzaChqLmxhenkpLGMucGFydGxvYWQmJmsucHVzaChqLnBhcnRsb2FkKSxjLnBhcnRzZWwmJmsucHVzaChqLnBhcnRzZWwpLGMudW5zZWxlY3RhYmxlJiZrLnB1c2goai51bnNlbGVjdGFibGUpLGMuX2lzTG9hZGluZyYmay5wdXNoKGoubG9hZGluZyksYy5fZXJyb3ImJmsucHVzaChqLmVycm9yKSxjLnN0YXR1c05vZGVUeXBlJiZrLnB1c2goai5zdGF0dXNOb2RlUHJlZml4K2Muc3RhdHVzTm9kZVR5cGUpLGMuc2VsZWN0ZWQ/KGsucHVzaChqLnNlbGVjdGVkKSxoJiZpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApKTpoJiZpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLGMuZXh0cmFDbGFzc2VzJiZrLnB1c2goYy5leHRyYUNsYXNzZXMpLGY9PT0hMT9rLnB1c2goai5jb21iaW5lZEV4cGFuZGVyUHJlZml4K1wiblwiKyhnP1wibFwiOlwiXCIpKTprLnB1c2goai5jb21iaW5lZEV4cGFuZGVyUHJlZml4KyhjLmV4cGFuZGVkP1wiZVwiOlwiY1wiKSsoYy5sYXp5JiZudWxsPT1jLmNoaWxkcmVuP1wiZFwiOlwiXCIpKyhnP1wibFwiOlwiXCIpKSxrLnB1c2goai5jb21iaW5lZEljb25QcmVmaXgrKGMuZXhwYW5kZWQ/XCJlXCI6XCJjXCIpKyhjLmZvbGRlcj9cImZcIjpcIlwiKSksbC5jbGFzc05hbWU9ay5qb2luKFwiIFwiKSxjLmxpJiYoYy5saS5jbGFzc05hbWU9Zz9qLmxhc3RzaWI6XCJcIikpfSxub2RlU2V0QWN0aXZlOmZ1bmN0aW9uKGIsYyxkKXtkPWR8fHt9O3ZhciBmLGc9Yi5ub2RlLGg9Yi50cmVlLGk9Yi5vcHRpb25zLGo9ZC5ub0V2ZW50cz09PSEwLG09ZC5ub0ZvY3VzPT09ITAsbj1nPT09aC5hY3RpdmVOb2RlO3JldHVybiBjPWMhPT0hMSxuPT09Yz9rKGcpOmMmJiFqJiZ0aGlzLl90cmlnZ2VyTm9kZUV2ZW50KFwiYmVmb3JlQWN0aXZhdGVcIixnLGIub3JpZ2luYWxFdmVudCk9PT0hMT9sKGcsW1wicmVqZWN0ZWRcIl0pOihjPyhoLmFjdGl2ZU5vZGUmJihlKGguYWN0aXZlTm9kZSE9PWcsXCJub2RlIHdhcyBhY3RpdmUgKGluY29uc2lzdGVuY3kpXCIpLGY9YS5leHRlbmQoe30sYix7bm9kZTpoLmFjdGl2ZU5vZGV9KSxoLm5vZGVTZXRBY3RpdmUoZiwhMSksZShudWxsPT09aC5hY3RpdmVOb2RlLFwiZGVhY3RpdmF0ZSB3YXMgb3V0IG9mIHN5bmM/XCIpKSxpLmFjdGl2ZVZpc2libGUmJmcubWFrZVZpc2libGUoe3Njcm9sbEludG9WaWV3Om0mJm51bGw9PWguZm9jdXNOb2RlfSksaC5hY3RpdmVOb2RlPWcsaC5ub2RlUmVuZGVyU3RhdHVzKGIpLG18fGgubm9kZVNldEZvY3VzKGIpLGp8fGguX3RyaWdnZXJOb2RlRXZlbnQoXCJhY3RpdmF0ZVwiLGcsYi5vcmlnaW5hbEV2ZW50KSk6KGUoaC5hY3RpdmVOb2RlPT09ZyxcIm5vZGUgd2FzIG5vdCBhY3RpdmUgKGluY29uc2lzdGVuY3kpXCIpLGguYWN0aXZlTm9kZT1udWxsLHRoaXMubm9kZVJlbmRlclN0YXR1cyhiKSxqfHxiLnRyZWUuX3RyaWdnZXJOb2RlRXZlbnQoXCJkZWFjdGl2YXRlXCIsZyxiLm9yaWdpbmFsRXZlbnQpKSxrKGcpKX0sbm9kZVNldEV4cGFuZGVkOmZ1bmN0aW9uKGIsYyxlKXtlPWV8fHt9O3ZhciBmLGcsaCxpLGosbSxuPWIubm9kZSxvPWIudHJlZSxwPWIub3B0aW9ucyxxPWUubm9BbmltYXRpb249PT0hMCxyPWUubm9FdmVudHM9PT0hMDtpZihjPWMhPT0hMSxuLmV4cGFuZGVkJiZjfHwhbi5leHBhbmRlZCYmIWMpcmV0dXJuIGsobik7aWYoYyYmIW4ubGF6eSYmIW4uaGFzQ2hpbGRyZW4oKSlyZXR1cm4gayhuKTtpZighYyYmbi5nZXRMZXZlbCgpPHAubWluRXhwYW5kTGV2ZWwpcmV0dXJuIGwobixbXCJsb2NrZWRcIl0pO2lmKCFyJiZ0aGlzLl90cmlnZ2VyTm9kZUV2ZW50KFwiYmVmb3JlRXhwYW5kXCIsbixiLm9yaWdpbmFsRXZlbnQpPT09ITEpcmV0dXJuIGwobixbXCJyZWplY3RlZFwiXSk7aWYocXx8bi5pc1Zpc2libGUoKXx8KHE9ZS5ub0FuaW1hdGlvbj0hMCksZz1uZXcgYS5EZWZlcnJlZCxjJiYhbi5leHBhbmRlZCYmcC5hdXRvQ29sbGFwc2Upe2o9bi5nZXRQYXJlbnRMaXN0KCExLCEwKSxtPXAuYXV0b0NvbGxhcHNlO3RyeXtmb3IocC5hdXRvQ29sbGFwc2U9ITEsaD0wLGk9ai5sZW5ndGg7aDxpO2grKyl0aGlzLl9jYWxsSG9vayhcIm5vZGVDb2xsYXBzZVNpYmxpbmdzXCIsaltoXSxlKX1maW5hbGx5e3AuYXV0b0NvbGxhcHNlPW19fXJldHVybiBnLmRvbmUoZnVuY3Rpb24oKXt2YXIgYT1uLmdldExhc3RDaGlsZCgpO2MmJnAuYXV0b1Njcm9sbCYmIXEmJmE/YS5zY3JvbGxJbnRvVmlldyghMCx7dG9wTm9kZTpufSkuYWx3YXlzKGZ1bmN0aW9uKCl7cnx8Yi50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KGM/XCJleHBhbmRcIjpcImNvbGxhcHNlXCIsYil9KTpyfHxiLnRyZWUuX3RyaWdnZXJOb2RlRXZlbnQoYz9cImV4cGFuZFwiOlwiY29sbGFwc2VcIixiKX0pLGY9ZnVuY3Rpb24oZCl7dmFyIGUsZixnPXAudG9nZ2xlRWZmZWN0O2lmKG4uZXhwYW5kZWQ9YyxvLl9jYWxsSG9vayhcIm5vZGVSZW5kZXJcIixiLCExLCExLCEwKSxuLnVsKWlmKGU9XCJub25lXCIhPT1uLnVsLnN0eWxlLmRpc3BsYXksZj0hIW4uZXhwYW5kZWQsZT09PWYpbi53YXJuKFwibm9kZVNldEV4cGFuZGVkOiBVTC5zdHlsZS5kaXNwbGF5IGFscmVhZHkgc2V0XCIpO2Vsc2V7aWYoZyYmIXEpcmV0dXJuIHZvaWQgYShuLnVsKS50b2dnbGUoZy5lZmZlY3QsZy5vcHRpb25zLGcuZHVyYXRpb24sZnVuY3Rpb24oKXtkKCl9KTtuLnVsLnN0eWxlLmRpc3BsYXk9bi5leHBhbmRlZHx8IXBhcmVudD9cIlwiOlwibm9uZVwifWQoKX0sYyYmbi5sYXp5JiZuLmhhc0NoaWxkcmVuKCk9PT1kP24ubG9hZCgpLmRvbmUoZnVuY3Rpb24oKXtnLm5vdGlmeVdpdGgmJmcubm90aWZ5V2l0aChuLFtcImxvYWRlZFwiXSksZihmdW5jdGlvbigpe2cucmVzb2x2ZVdpdGgobil9KX0pLmZhaWwoZnVuY3Rpb24oYSl7ZihmdW5jdGlvbigpe2cucmVqZWN0V2l0aChuLFtcImxvYWQgZmFpbGVkIChcIithK1wiKVwiXSl9KX0pOmYoZnVuY3Rpb24oKXtnLnJlc29sdmVXaXRoKG4pfSksZy5wcm9taXNlKCl9LG5vZGVTZXRGb2N1czpmdW5jdGlvbihiLGQpe3ZhciBlLGY9Yi50cmVlLGc9Yi5ub2RlLGg9Zi5vcHRpb25zLGk9ISFiLm9yaWdpbmFsRXZlbnQmJmEoYi5vcmlnaW5hbEV2ZW50LnRhcmdldCkuaXMoXCI6aW5wdXRcIik7aWYoZD1kIT09ITEsZi5mb2N1c05vZGUpe2lmKGYuZm9jdXNOb2RlPT09ZyYmZClyZXR1cm47ZT1hLmV4dGVuZCh7fSxiLHtub2RlOmYuZm9jdXNOb2RlfSksZi5mb2N1c05vZGU9bnVsbCx0aGlzLl90cmlnZ2VyTm9kZUV2ZW50KFwiYmx1clwiLGUpLHRoaXMuX2NhbGxIb29rKFwibm9kZVJlbmRlclN0YXR1c1wiLGUpfWQmJih0aGlzLmhhc0ZvY3VzKCl8fChnLmRlYnVnKFwibm9kZVNldEZvY3VzOiBmb3JjaW5nIGNvbnRhaW5lciBmb2N1c1wiKSx0aGlzLl9jYWxsSG9vayhcInRyZWVTZXRGb2N1c1wiLGIsITAse2NhbGxlZEJ5Tm9kZTohMH0pKSxnLm1ha2VWaXNpYmxlKHtzY3JvbGxJbnRvVmlldzohMX0pLGYuZm9jdXNOb2RlPWcsaC50aXRsZXNUYWJiYWJsZT9pfHxhKGcuc3BhbikuZmluZChcIi5mYW5jeXRyZWUtdGl0bGVcIikuZm9jdXMoKTowPT09YShjLmFjdGl2ZUVsZW1lbnQpLmNsb3Nlc3QoXCIuZmFuY3l0cmVlLWNvbnRhaW5lclwiKS5sZW5ndGgmJmEoZi4kY29udGFpbmVyKS5mb2N1cygpLGguYXJpYSYmYShmLiRjb250YWluZXIpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixcImZ0YWxfXCIraC5pZFByZWZpeCtnLmtleSksdGhpcy5fdHJpZ2dlck5vZGVFdmVudChcImZvY3VzXCIsYiksaC5hdXRvU2Nyb2xsJiZnLnNjcm9sbEludG9WaWV3KCksdGhpcy5fY2FsbEhvb2soXCJub2RlUmVuZGVyU3RhdHVzXCIsYikpfSxub2RlU2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLm5vZGUsZD1hLnRyZWUsZT1hLm9wdGlvbnM7aWYoYj1iIT09ITEsIWMudW5zZWxlY3RhYmxlKXtpZihjLnNlbGVjdGVkJiZifHwhYy5zZWxlY3RlZCYmIWIpcmV0dXJuISFjLnNlbGVjdGVkO2lmKHRoaXMuX3RyaWdnZXJOb2RlRXZlbnQoXCJiZWZvcmVTZWxlY3RcIixjLGEub3JpZ2luYWxFdmVudCk9PT0hMSlyZXR1cm4hIWMuc2VsZWN0ZWQ7YiYmMT09PWUuc2VsZWN0TW9kZT9kLmxhc3RTZWxlY3RlZE5vZGUmJmQubGFzdFNlbGVjdGVkTm9kZS5zZXRTZWxlY3RlZCghMSk6Mz09PWUuc2VsZWN0TW9kZSYmKGMuc2VsZWN0ZWQ9YixjLmZpeFNlbGVjdGlvbjNBZnRlckNsaWNrKCkpLGMuc2VsZWN0ZWQ9Yix0aGlzLm5vZGVSZW5kZXJTdGF0dXMoYSksZC5sYXN0U2VsZWN0ZWROb2RlPWI/YzpudWxsLGQuX3RyaWdnZXJOb2RlRXZlbnQoXCJzZWxlY3RcIixhKX19LG5vZGVTZXRTdGF0dXM6ZnVuY3Rpb24oYixjLGQsZSl7ZnVuY3Rpb24gZigpe3ZhciBhPWguY2hpbGRyZW4/aC5jaGlsZHJlblswXTpudWxsO2lmKGEmJmEuaXNTdGF0dXNOb2RlKCkpe3RyeXtoLnVsJiYoaC51bC5yZW1vdmVDaGlsZChhLmxpKSxhLmxpPW51bGwpfWNhdGNoKGIpe30xPT09aC5jaGlsZHJlbi5sZW5ndGg/aC5jaGlsZHJlbj1bXTpoLmNoaWxkcmVuLnNoaWZ0KCl9fWZ1bmN0aW9uIGcoYixjKXt2YXIgZD1oLmNoaWxkcmVuP2guY2hpbGRyZW5bMF06bnVsbDtyZXR1cm4gZCYmZC5pc1N0YXR1c05vZGUoKT8oYS5leHRlbmQoZCxiKSxkLnN0YXR1c05vZGVUeXBlPWMsaS5fY2FsbEhvb2soXCJub2RlUmVuZGVyVGl0bGVcIixkKSk6KGguX3NldENoaWxkcmVuKFtiXSksaC5jaGlsZHJlblswXS5zdGF0dXNOb2RlVHlwZT1jLGkucmVuZGVyKCkpLGguY2hpbGRyZW5bMF19dmFyIGg9Yi5ub2RlLGk9Yi50cmVlO3N3aXRjaChjKXtjYXNlXCJva1wiOmYoKSxoLl9pc0xvYWRpbmc9ITEsaC5fZXJyb3I9bnVsbCxoLnJlbmRlclN0YXR1cygpO2JyZWFrO2Nhc2VcImxvYWRpbmdcIjpoLnBhcmVudHx8Zyh7dGl0bGU6aS5vcHRpb25zLnN0cmluZ3MubG9hZGluZysoZD9cIiAoXCIrZCtcIilcIjpcIlwiKSxjaGVja2JveDohMSx0b29sdGlwOmV9LGMpLGguX2lzTG9hZGluZz0hMCxoLl9lcnJvcj1udWxsLGgucmVuZGVyU3RhdHVzKCk7YnJlYWs7Y2FzZVwiZXJyb3JcIjpnKHt0aXRsZTppLm9wdGlvbnMuc3RyaW5ncy5sb2FkRXJyb3IrKGQ/XCIgKFwiK2QrXCIpXCI6XCJcIiksY2hlY2tib3g6ITEsdG9vbHRpcDplfSxjKSxoLl9pc0xvYWRpbmc9ITEsaC5fZXJyb3I9e21lc3NhZ2U6ZCxkZXRhaWxzOmV9LGgucmVuZGVyU3RhdHVzKCk7YnJlYWs7Y2FzZVwibm9kYXRhXCI6Zyh7dGl0bGU6aS5vcHRpb25zLnN0cmluZ3Mubm9EYXRhLGNoZWNrYm94OiExLHRvb2x0aXA6ZX0sYyksaC5faXNMb2FkaW5nPSExLGguX2Vycm9yPW51bGwsaC5yZW5kZXJTdGF0dXMoKTticmVhaztkZWZhdWx0OmEuZXJyb3IoXCJpbnZhbGlkIG5vZGUgc3RhdHVzIFwiK2MpfX0sbm9kZVRvZ2dsZUV4cGFuZGVkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVTZXRFeHBhbmRlZChhLCFhLm5vZGUuZXhwYW5kZWQpfSxub2RlVG9nZ2xlU2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9kZVNldFNlbGVjdGVkKGEsIWEubm9kZS5zZWxlY3RlZCl9LHRyZWVDbGVhcjpmdW5jdGlvbihhKXt2YXIgYj1hLnRyZWU7Yi5hY3RpdmVOb2RlPW51bGwsYi5mb2N1c05vZGU9bnVsbCxiLiRkaXYuZmluZChcIj51bC5mYW5jeXRyZWUtY29udGFpbmVyXCIpLmVtcHR5KCksYi5yb290Tm9kZS5jaGlsZHJlbj1udWxsfSx0cmVlQ3JlYXRlOmZ1bmN0aW9uKGEpe30sdHJlZURlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy4kZGl2LmZpbmQoXCI+dWwuZmFuY3l0cmVlLWNvbnRhaW5lclwiKS5yZW1vdmUoKSx0aGlzLiRzb3VyY2UmJnRoaXMuJHNvdXJjZS5yZW1vdmVDbGFzcyhcInVpLWhlbHBlci1oaWRkZW5cIil9LHRyZWVJbml0OmZ1bmN0aW9uKGEpe3RoaXMudHJlZUxvYWQoYSl9LHRyZWVMb2FkOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZixnLGgsaT1iLnRyZWUsaj1iLndpZGdldC5lbGVtZW50LGs9YS5leHRlbmQoe30sYix7bm9kZTp0aGlzLnJvb3ROb2RlfSk7aWYoaS5yb290Tm9kZS5jaGlsZHJlbiYmdGhpcy50cmVlQ2xlYXIoYiksYz1jfHx0aGlzLm9wdGlvbnMuc291cmNlKVwic3RyaW5nXCI9PXR5cGVvZiBjJiZhLmVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO2Vsc2Ugc3dpdGNoKGY9ai5kYXRhKFwidHlwZVwiKXx8XCJodG1sXCIpe2Nhc2VcImh0bWxcIjpnPWouZmluZChcIj51bDpmaXJzdFwiKSxnLmFkZENsYXNzKFwidWktZmFuY3l0cmVlLXNvdXJjZSB1aS1oZWxwZXItaGlkZGVuXCIpLGM9YS51aS5mYW5jeXRyZWUucGFyc2VIdG1sKGcpLHRoaXMuZGF0YT1hLmV4dGVuZCh0aGlzLmRhdGEsbihnKSk7YnJlYWs7Y2FzZVwianNvblwiOmM9YS5wYXJzZUpTT04oai50ZXh0KCkpLGouY29udGVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMz09PXRoaXMubm9kZVR5cGV9KS5yZW1vdmUoKSxhLmlzUGxhaW5PYmplY3QoYykmJihlKGEuaXNBcnJheShjLmNoaWxkcmVuKSxcImlmIGFuIG9iamVjdCBpcyBwYXNzZWQgYXMgc291cmNlLCBpdCBtdXN0IGNvbnRhaW4gYSAnY2hpbGRyZW4nIGFycmF5IChhbGwgb3RoZXIgcHJvcGVydGllcyBhcmUgYWRkZWQgdG8gJ3RyZWUuZGF0YScpXCIpLGQ9YyxjPWMuY2hpbGRyZW4sZGVsZXRlIGQuY2hpbGRyZW4sYS5leHRlbmQoaS5kYXRhLGQpKTticmVhaztkZWZhdWx0OmEuZXJyb3IoXCJJbnZhbGlkIGRhdGEtdHlwZTogXCIrZil9cmV0dXJuIGg9dGhpcy5ub2RlTG9hZENoaWxkcmVuKGssYykuZG9uZShmdW5jdGlvbigpe2kucmVuZGVyKCksMz09PWIub3B0aW9ucy5zZWxlY3RNb2RlJiZpLnJvb3ROb2RlLmZpeFNlbGVjdGlvbjNGcm9tRW5kTm9kZXMoKSxpLmFjdGl2ZU5vZGUmJmkub3B0aW9ucy5hY3RpdmVWaXNpYmxlJiZpLmFjdGl2ZU5vZGUubWFrZVZpc2libGUoKSxpLl90cmlnZ2VyVHJlZUV2ZW50KFwiaW5pdFwiLG51bGwse3N0YXR1czohMH0pfSkuZmFpbChmdW5jdGlvbigpe2kucmVuZGVyKCksaS5fdHJpZ2dlclRyZWVFdmVudChcImluaXRcIixudWxsLHtzdGF0dXM6ITF9KX0pfSx0cmVlUmVnaXN0ZXJOb2RlOmZ1bmN0aW9uKGEsYixjKXt9LHRyZWVTZXRGb2N1czpmdW5jdGlvbihiLGMsZCl7Yz1jIT09ITEsYyE9PXRoaXMuaGFzRm9jdXMoKSYmKHRoaXMuX2hhc0ZvY3VzPWMsIWMmJnRoaXMuZm9jdXNOb2RlP3RoaXMuZm9jdXNOb2RlLnNldEZvY3VzKCExKTohY3x8ZCYmZC5jYWxsZWRCeU5vZGV8fGEodGhpcy4kY29udGFpbmVyKS5mb2N1cygpLHRoaXMuJGNvbnRhaW5lci50b2dnbGVDbGFzcyhcImZhbmN5dHJlZS10cmVlZm9jdXNcIixjKSx0aGlzLl90cmlnZ2VyVHJlZUV2ZW50KGM/XCJmb2N1c1RyZWVcIjpcImJsdXJUcmVlXCIpLGMmJiF0aGlzLmFjdGl2ZU5vZGUmJnRoaXMuZ2V0Rmlyc3RDaGlsZCgpJiZ0aGlzLmdldEZpcnN0Q2hpbGQoKS5zZXRGb2N1cygpKX0sdHJlZVNldE9wdGlvbjpmdW5jdGlvbihiLGMsZCl7dmFyIGU9Yi50cmVlLGY9ITAsZz0hMTtzd2l0Y2goYyl7Y2FzZVwiYXJpYVwiOmNhc2VcImNoZWNrYm94XCI6Y2FzZVwiaWNvblwiOmNhc2VcIm1pbkV4cGFuZExldmVsXCI6Y2FzZVwidGFiaW5kZXhcIjplLl9jYWxsSG9vayhcInRyZWVDcmVhdGVcIixlKSxnPSEwO2JyZWFrO2Nhc2VcImVzY2FwZVRpdGxlc1wiOmNhc2VcInRvb2x0aXBcIjpnPSEwO2JyZWFrO2Nhc2VcInJ0bFwiOmQ9PT0hMT9lLiRjb250YWluZXIuYXR0cihcIkRJUlwiLG51bGwpLnJlbW92ZUNsYXNzKFwiZmFuY3l0cmVlLXJ0bFwiKTplLiRjb250YWluZXIuYXR0cihcIkRJUlwiLFwiUlRMXCIpLmFkZENsYXNzKFwiZmFuY3l0cmVlLXJ0bFwiKSxnPSEwO2JyZWFrO2Nhc2VcInNvdXJjZVwiOmY9ITEsZS5fY2FsbEhvb2soXCJ0cmVlTG9hZFwiLGUsZCksZz0hMH1lLmRlYnVnKFwic2V0IG9wdGlvbiBcIitjK1wiPVwiK2QrXCIgPFwiK3R5cGVvZiBkK1wiPlwiKSxmJiYodGhpcy53aWRnZXQuX3N1cGVyP3RoaXMud2lkZ2V0Ll9zdXBlci5jYWxsKHRoaXMud2lkZ2V0LGMsZCk6YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uY2FsbCh0aGlzLndpZGdldCxjLGQpKSxnJiZlLnJlbmRlcighMCwhMSl9fSksYS53aWRnZXQoXCJ1aS5mYW5jeXRyZWVcIix7b3B0aW9uczp7YWN0aXZlVmlzaWJsZTohMCxhamF4Ont0eXBlOlwiR0VUXCIsY2FjaGU6ITEsZGF0YVR5cGU6XCJqc29uXCJ9LGFyaWE6ITEsYXV0b0FjdGl2YXRlOiEwLGF1dG9Db2xsYXBzZTohMSxhdXRvU2Nyb2xsOiExLGNoZWNrYm94OiExLGNsaWNrRm9sZGVyTW9kZTo0LGRlYnVnTGV2ZWw6bnVsbCxkaXNhYmxlZDohMSxlbmFibGVBc3B4OiEwLGVzY2FwZVRpdGxlczohMSxleHRlbnNpb25zOltdLHRvZ2dsZUVmZmVjdDp7ZWZmZWN0OlwiYmxpbmRcIixvcHRpb25zOntkaXJlY3Rpb246XCJ2ZXJ0aWNhbFwiLHNjYWxlOlwiYm94XCJ9LGR1cmF0aW9uOjIwMH0sZ2VuZXJhdGVJZHM6ITEsaWNvbjohMCxpZFByZWZpeDpcImZ0X1wiLGZvY3VzT25TZWxlY3Q6ITEsa2V5Ym9hcmQ6ITAsa2V5UGF0aFNlcGFyYXRvcjpcIi9cIixtaW5FeHBhbmRMZXZlbDoxLHF1aWNrc2VhcmNoOiExLHJ0bDohMSxzY3JvbGxPZnM6e3RvcDowLGJvdHRvbTowfSxzY3JvbGxQYXJlbnQ6bnVsbCxzZWxlY3RNb2RlOjIsc3RyaW5nczp7bG9hZGluZzpcIkxvYWRpbmcmIzgyMzA7XCIsbG9hZEVycm9yOlwiTG9hZCBlcnJvciFcIixtb3JlRGF0YTpcIk1vcmUmIzgyMzA7XCIsbm9EYXRhOlwiTm8gZGF0YS5cIn0sdGFiaW5kZXg6XCIwXCIsdGl0bGVzVGFiYmFibGU6ITEsdG9vbHRpcDohMSxfY2xhc3NOYW1lczp7bm9kZTpcImZhbmN5dHJlZS1ub2RlXCIsZm9sZGVyOlwiZmFuY3l0cmVlLWZvbGRlclwiLGNvbWJpbmVkRXhwYW5kZXJQcmVmaXg6XCJmYW5jeXRyZWUtZXhwLVwiLGNvbWJpbmVkSWNvblByZWZpeDpcImZhbmN5dHJlZS1pY28tXCIsaGFzQ2hpbGRyZW46XCJmYW5jeXRyZWUtaGFzLWNoaWxkcmVuXCIsYWN0aXZlOlwiZmFuY3l0cmVlLWFjdGl2ZVwiLHNlbGVjdGVkOlwiZmFuY3l0cmVlLXNlbGVjdGVkXCIsZXhwYW5kZWQ6XCJmYW5jeXRyZWUtZXhwYW5kZWRcIixsYXp5OlwiZmFuY3l0cmVlLWxhenlcIixmb2N1c2VkOlwiZmFuY3l0cmVlLWZvY3VzZWRcIixwYXJ0bG9hZDpcImZhbmN5dHJlZS1wYXJ0bG9hZFwiLHBhcnRzZWw6XCJmYW5jeXRyZWUtcGFydHNlbFwiLHVuc2VsZWN0YWJsZTpcImZhbmN5dHJlZS11bnNlbGVjdGFibGVcIixsYXN0c2liOlwiZmFuY3l0cmVlLWxhc3RzaWJcIixsb2FkaW5nOlwiZmFuY3l0cmVlLWxvYWRpbmdcIixlcnJvcjpcImZhbmN5dHJlZS1lcnJvclwiLHN0YXR1c05vZGVQcmVmaXg6XCJmYW5jeXRyZWUtc3RhdHVzbm9kZS1cIn0sbGF6eUxvYWQ6bnVsbCxwb3N0UHJvY2VzczpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy50cmVlPW5ldyB0KHRoaXMpLHRoaXMuJHNvdXJjZT10aGlzLnNvdXJjZXx8XCJqc29uXCI9PT10aGlzLmVsZW1lbnQuZGF0YShcInR5cGVcIik/dGhpcy5lbGVtZW50OnRoaXMuZWxlbWVudC5maW5kKFwiPnVsOmZpcnN0XCIpO3ZhciBiLGMsZixnPXRoaXMub3B0aW9ucyxoPWcuZXh0ZW5zaW9ucyxpPXRoaXMudHJlZTtmb3IoZj0wO2Y8aC5sZW5ndGg7ZisrKWM9aFtmXSxiPWEudWkuZmFuY3l0cmVlLl9leHRlbnNpb25zW2NdLGJ8fGEuZXJyb3IoXCJDb3VsZCBub3QgYXBwbHkgZXh0ZW5zaW9uICdcIitjK1wiJyAoaXQgaXMgbm90IHJlZ2lzdGVyZWQsIGRpZCB5b3UgZm9yZ2V0IHRvIGluY2x1ZGUgaXQ/KVwiKSx0aGlzLnRyZWUub3B0aW9uc1tjXT1hLmV4dGVuZCghMCx7fSxiLm9wdGlvbnMsdGhpcy50cmVlLm9wdGlvbnNbY10pLGUodGhpcy50cmVlLmV4dFtjXT09PWQsXCJFeHRlbnNpb24gbmFtZSBtdXN0IG5vdCBleGlzdCBhcyBGYW5jeXRyZWUuZXh0IGF0dHJpYnV0ZTogJ1wiK2MrXCInXCIpLHRoaXMudHJlZS5leHRbY109e30saih0aGlzLnRyZWUsaSxiLGMpLGk9YjtnLmljb25zIT09ZCYmKGcuaWNvbiE9PSEwP2EuZXJyb3IoXCInaWNvbnMnIHRyZWUgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTQuMDogdXNlICdpY29uJyBvbmx5IGluc3RlYWRcIik6KHRoaXMudHJlZS53YXJuKFwiJ2ljb25zJyB0cmVlIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE0LjA6IHVzZSAnaWNvbicgaW5zdGVhZFwiKSxnLmljb249Zy5pY29ucykpLGcuaWNvbkNsYXNzIT09ZCYmKGcuaWNvbj9hLmVycm9yKFwiJ2ljb25DbGFzcycgdHJlZSBvcHRpb24gaXMgZGVwcmVjYXRlZCBzaW5jZSB2Mi4xNC4wOiB1c2UgJ2ljb24nIG9ubHkgaW5zdGVhZFwiKToodGhpcy50cmVlLndhcm4oXCInaWNvbkNsYXNzJyB0cmVlIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE0LjA6IHVzZSAnaWNvbicgaW5zdGVhZFwiKSxnLmljb249Zy5pY29uQ2xhc3MpKSxnLnRhYmJhYmxlIT09ZCYmKGcudGFiaW5kZXg9Zy50YWJiYWJsZT9cIjBcIjpcIi0xXCIsdGhpcy50cmVlLndhcm4oXCIndGFiYmFibGUnIHRyZWUgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTcuMDogdXNlICd0YWJpbmRleD0nXCIrZy50YWJpbmRleCtcIicgaW5zdGVhZFwiKSksdGhpcy50cmVlLl9jYWxsSG9vayhcInRyZWVDcmVhdGVcIix0aGlzLnRyZWUpfSxfaW5pdDpmdW5jdGlvbigpe3RoaXMudHJlZS5fY2FsbEhvb2soXCJ0cmVlSW5pdFwiLHRoaXMudHJlZSksdGhpcy5fYmluZCgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJ0cmVlU2V0T3B0aW9uXCIsdGhpcy50cmVlLGEsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl91bmJpbmQoKSx0aGlzLnRyZWUuX2NhbGxIb29rKFwidHJlZURlc3Ryb3lcIix0aGlzLnRyZWUpLGEuV2lkZ2V0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LF91bmJpbmQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnRyZWUuX25zO3RoaXMuZWxlbWVudC51bmJpbmQoYiksdGhpcy50cmVlLiRjb250YWluZXIudW5iaW5kKGIpLGEoYykudW5iaW5kKGIpfSxfYmluZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLm9wdGlvbnMsYz10aGlzLnRyZWUsZD1jLl9uczt0aGlzLl91bmJpbmQoKSxjLiRjb250YWluZXIub24oXCJmb2N1c2luXCIrZCtcIiBmb2N1c291dFwiK2QsZnVuY3Rpb24oYSl7dmFyIGI9dy5nZXROb2RlKGEpLGQ9XCJmb2N1c2luXCI9PT1hLnR5cGU7Yj9jLl9jYWxsSG9vayhcIm5vZGVTZXRGb2N1c1wiLGMuX21ha2VIb29rQ29udGV4dChiLGEpLGQpOmMuX2NhbGxIb29rKFwidHJlZVNldEZvY3VzXCIsYyxkKX0pLm9uKFwic2VsZWN0c3RhcnRcIitkLFwic3Bhbi5mYW5jeXRyZWUtdGl0bGVcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KS5vbihcImtleWRvd25cIitkLGZ1bmN0aW9uKGEpe2lmKGIuZGlzYWJsZWR8fGIua2V5Ym9hcmQ9PT0hMSlyZXR1cm4hMDt2YXIgZCxlPWMuZm9jdXNOb2RlLGY9Yy5fbWFrZUhvb2tDb250ZXh0KGV8fGMsYSksZz1jLnBoYXNlO3RyeXtyZXR1cm4gYy5waGFzZT1cInVzZXJFdmVudFwiLGQ9ZT9jLl90cmlnZ2VyTm9kZUV2ZW50KFwia2V5ZG93blwiLGUsYSk6Yy5fdHJpZ2dlclRyZWVFdmVudChcImtleWRvd25cIixhKSxcInByZXZlbnROYXZcIj09PWQ/ZD0hMDpkIT09ITEmJihkPWMuX2NhbGxIb29rKFwibm9kZUtleWRvd25cIixmKSksZH1maW5hbGx5e2MucGhhc2U9Z319KS5vbihcImNsaWNrXCIrZCtcIiBkYmxjbGlja1wiK2QsZnVuY3Rpb24oYyl7aWYoYi5kaXNhYmxlZClyZXR1cm4hMDt2YXIgZCxlPXcuZ2V0RXZlbnRUYXJnZXQoYyksZj1lLm5vZGUsZz1hLnRyZWUsaD1nLnBoYXNlO2lmKCFmKXJldHVybiEwO2Q9Zy5fbWFrZUhvb2tDb250ZXh0KGYsYyk7dHJ5e3N3aXRjaChnLnBoYXNlPVwidXNlckV2ZW50XCIsYy50eXBlKXtjYXNlXCJjbGlja1wiOnJldHVybiBkLnRhcmdldFR5cGU9ZS50eXBlLGYuaXNQYWdpbmdOb2RlKCk/Zy5fdHJpZ2dlck5vZGVFdmVudChcImNsaWNrUGFnaW5nXCIsZCxjKT09PSEwOmcuX3RyaWdnZXJOb2RlRXZlbnQoXCJjbGlja1wiLGQsYykhPT0hMSYmZy5fY2FsbEhvb2soXCJub2RlQ2xpY2tcIixkKTtjYXNlXCJkYmxjbGlja1wiOnJldHVybiBkLnRhcmdldFR5cGU9ZS50eXBlLGcuX3RyaWdnZXJOb2RlRXZlbnQoXCJkYmxjbGlja1wiLGQsYykhPT0hMSYmZy5fY2FsbEhvb2soXCJub2RlRGJsY2xpY2tcIixkKX19ZmluYWxseXtnLnBoYXNlPWh9fSl9LGdldEFjdGl2ZU5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLmFjdGl2ZU5vZGV9LGdldE5vZGVCeUtleTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cmVlLmdldE5vZGVCeUtleShhKX0sZ2V0Um9vdE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLnJvb3ROb2RlfSxnZXRUcmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZX19KSx3PWEudWkuZmFuY3l0cmVlLGEuZXh0ZW5kKGEudWkuZmFuY3l0cmVlLHt2ZXJzaW9uOlwiMi4yMS4wXCIsYnVpbGRUeXBlOiBcInByb2R1Y3Rpb25cIixkZWJ1Z0xldmVsOiAxLF9uZXh0SWQ6MSxfbmV4dE5vZGVLZXk6MSxfZXh0ZW5zaW9uczp7fSxfRmFuY3l0cmVlQ2xhc3M6dCxfRmFuY3l0cmVlTm9kZUNsYXNzOnMsanF1ZXJ5U3VwcG9ydHM6e3Bvc2l0aW9uTXlPZnM6aChhLnVpLnZlcnNpb24sMSw5KX0sYXNzZXJ0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUoYSxiKX0sZGVib3VuY2U6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU7cmV0dXJuIDM9PT1hcmd1bWVudHMubGVuZ3RoJiZcImJvb2xlYW5cIiE9dHlwZW9mIGMmJihkPWMsYz0hMSksZnVuY3Rpb24oKXt2YXIgZj1hcmd1bWVudHM7ZD1kfHx0aGlzLGMmJiFlJiZiLmFwcGx5KGQsZiksY2xlYXJUaW1lb3V0KGUpLGU9c2V0VGltZW91dChmdW5jdGlvbigpe2N8fGIuYXBwbHkoZCxmKSxlPW51bGx9LGEpfX0sZGVidWc6ZnVuY3Rpb24oYil7YS51aS5mYW5jeXRyZWUuZGVidWdMZXZlbD49MiYmZihcImxvZ1wiLGFyZ3VtZW50cyl9LGVycm9yOmZ1bmN0aW9uKGEpe2YoXCJlcnJvclwiLGFyZ3VtZW50cyl9LGVzY2FwZUh0bWw6byxmaXhQb3NpdGlvbk9wdGlvbnM6ZnVuY3Rpb24oYil7aWYoKGIub2Zmc2V0fHwoXCJcIitiLm15K2IuYXQpLmluZGV4T2YoXCIlXCIpPj0wKSYmYS5lcnJvcihcImV4cGVjdGVkIG5ldyBwb3NpdGlvbiBzeW50YXggKGJ1dCAnJScgaXMgbm90IHN1cHBvcnRlZClcIiksIWEudWkuZmFuY3l0cmVlLmpxdWVyeVN1cHBvcnRzLnBvc2l0aW9uTXlPZnMpe3ZhciBjPS8oXFx3KykoWystXT9cXGQrKT9cXHMrKFxcdyspKFsrLV0/XFxkKyk/Ly5leGVjKGIubXkpLGQ9LyhcXHcrKShbKy1dP1xcZCspP1xccysoXFx3KykoWystXT9cXGQrKT8vLmV4ZWMoYi5hdCksZT0oY1syXT8rY1syXTowKSsoZFsyXT8rZFsyXTowKSxmPShjWzRdPytjWzRdOjApKyhkWzRdPytkWzRdOjApO2I9YS5leHRlbmQoe30sYix7bXk6Y1sxXStcIiBcIitjWzNdLGF0OmRbMV0rXCIgXCIrZFszXX0pLChlfHxmKSYmKGIub2Zmc2V0PVwiXCIrZStcIiBcIitmKX1yZXR1cm4gYn0sZ2V0RXZlbnRUYXJnZXRUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldEV2ZW50VGFyZ2V0KGEpLnR5cGV9LGdldEV2ZW50VGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWImJmIudGFyZ2V0P2IudGFyZ2V0LmNsYXNzTmFtZTpcIlwiLGU9e25vZGU6dGhpcy5nZXROb2RlKGIudGFyZ2V0KSx0eXBlOmR9O3JldHVybi9cXGJmYW5jeXRyZWUtdGl0bGVcXGIvLnRlc3QoYyk/ZS50eXBlPVwidGl0bGVcIjovXFxiZmFuY3l0cmVlLWV4cGFuZGVyXFxiLy50ZXN0KGMpP2UudHlwZT1lLm5vZGUuaGFzQ2hpbGRyZW4oKT09PSExP1wicHJlZml4XCI6XCJleHBhbmRlclwiOi9cXGJmYW5jeXRyZWUtY2hlY2tib3hcXGIvLnRlc3QoYyl8fC9cXGJmYW5jeXRyZWUtcmFkaW9cXGIvLnRlc3QoYyk/ZS50eXBlPVwiY2hlY2tib3hcIjovXFxiZmFuY3l0cmVlLWljb25cXGIvLnRlc3QoYyk/ZS50eXBlPVwiaWNvblwiOi9cXGJmYW5jeXRyZWUtbm9kZVxcYi8udGVzdChjKT9lLnR5cGU9XCJ0aXRsZVwiOmImJmIudGFyZ2V0JiZhKGIudGFyZ2V0KS5jbG9zZXN0KFwiLmZhbmN5dHJlZS10aXRsZVwiKS5sZW5ndGgmJihlLnR5cGU9XCJ0aXRsZVwiKSxlfSxnZXROb2RlOmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBzKXJldHVybiBhO2ZvcihhLnNlbGVjdG9yIT09ZD9hPWFbMF06YS5vcmlnaW5hbEV2ZW50IT09ZCYmKGE9YS50YXJnZXQpO2E7KXtpZihhLmZ0bm9kZSlyZXR1cm4gYS5mdG5vZGU7YT1hLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9LGdldFRyZWU6ZnVuY3Rpb24oYil7dmFyIGM7cmV0dXJuIGIgaW5zdGFuY2VvZiB0P2I6KGI9PT1kJiYoYj0wKSxcIm51bWJlclwiPT10eXBlb2YgYj9iPWEoXCIuZmFuY3l0cmVlLWNvbnRhaW5lclwiKS5lcShiKTpcInN0cmluZ1wiPT10eXBlb2YgYj9iPWEoYikuZXEoMCk6Yi5zZWxlY3RvciE9PWQ/Yj1iLmVxKDApOmIub3JpZ2luYWxFdmVudCE9PWQmJihiPWEoYi50YXJnZXQpKSxiPWIuY2xvc2VzdChcIjp1aS1mYW5jeXRyZWVcIiksYz1iLmRhdGEoXCJ1aS1mYW5jeXRyZWVcIil8fGIuZGF0YShcImZhbmN5dHJlZVwiKSxjP2MudHJlZTpudWxsKX0sZXZlbnRUb1N0cmluZzpmdW5jdGlvbihhKXt2YXIgYj1hLndoaWNoLGM9YS50eXBlLGQ9W107cmV0dXJuIGEuYWx0S2V5JiZkLnB1c2goXCJhbHRcIiksYS5jdHJsS2V5JiZkLnB1c2goXCJjdHJsXCIpLGEubWV0YUtleSYmZC5wdXNoKFwibWV0YVwiKSxhLnNoaWZ0S2V5JiZkLnB1c2goXCJzaGlmdFwiKSxcImNsaWNrXCI9PT1jfHxcImRibGNsaWNrXCI9PT1jP2QucHVzaChFW2EuYnV0dG9uXStjKTpDW2JdfHxkLnB1c2goRFtiXXx8U3RyaW5nLmZyb21DaGFyQ29kZShiKS50b0xvd2VyQ2FzZSgpKSxkLmpvaW4oXCIrXCIpfSxpbmZvOmZ1bmN0aW9uKGIpe2EudWkuZmFuY3l0cmVlLmRlYnVnTGV2ZWw+PTEmJmYoXCJpbmZvXCIsYXJndW1lbnRzKX0sa2V5RXZlbnRUb1N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53YXJuKFwia2V5RXZlbnRUb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQ6IHVzZSBldmVudFRvU3RyaW5nKClcIiksdGhpcy5ldmVudFRvU3RyaW5nKGEpfSxvdmVycmlkZU1ldGhvZDpmdW5jdGlvbihiLGMsZCl7dmFyIGUsZj1iW2NdfHxhLm5vb3A7YltjXT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gZT10aGlzLl9zdXBlcix0aGlzLl9zdXBlcj1mLGQuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7dGhpcy5fc3VwZXI9ZX19fSxwYXJzZUh0bWw6ZnVuY3Rpb24oYil7dmFyIGMsZSxmLGcsaCxpLGosayxsPWIuZmluZChcIj5saVwiKSxtPVtdO3JldHVybiBsLmVhY2goZnVuY3Rpb24oKXt2YXIgbCxvLHA9YSh0aGlzKSxxPXAuZmluZChcIj5zcGFuOmZpcnN0XCIsdGhpcykscj1xLmxlbmd0aD9udWxsOnAuZmluZChcIj5hOmZpcnN0XCIpLHM9e3Rvb2x0aXA6bnVsbCxkYXRhOnt9fTtmb3IocS5sZW5ndGg/cy50aXRsZT1xLmh0bWwoKTpyJiZyLmxlbmd0aD8ocy50aXRsZT1yLmh0bWwoKSxzLmRhdGEuaHJlZj1yLmF0dHIoXCJocmVmXCIpLHMuZGF0YS50YXJnZXQ9ci5hdHRyKFwidGFyZ2V0XCIpLHMudG9vbHRpcD1yLmF0dHIoXCJ0aXRsZVwiKSk6KHMudGl0bGU9cC5odG1sKCksaD1zLnRpdGxlLnNlYXJjaCgvPHVsL2kpLGg+PTAmJihzLnRpdGxlPXMudGl0bGUuc3Vic3RyaW5nKDAsaCkpKSxzLnRpdGxlPWEudHJpbShzLnRpdGxlKSxnPTAsaT1GLmxlbmd0aDtnPGk7ZysrKXNbRltnXV09ZDtmb3IoYz10aGlzLmNsYXNzTmFtZS5zcGxpdChcIiBcIiksZj1bXSxnPTAsaT1jLmxlbmd0aDtnPGk7ZysrKWU9Y1tnXSxHW2VdP3NbZV09ITA6Zi5wdXNoKGUpO2lmKHMuZXh0cmFDbGFzc2VzPWYuam9pbihcIiBcIiksaj1wLmF0dHIoXCJ0aXRsZVwiKSxqJiYocy50b29sdGlwPWopLGo9cC5hdHRyKFwiaWRcIiksaiYmKHMua2V5PWopLGw9bihwKSxsJiYhYS5pc0VtcHR5T2JqZWN0KGwpKXtmb3IobyBpbiBKKWwuaGFzT3duUHJvcGVydHkobykmJihsW0pbb11dPWxbb10sZGVsZXRlIGxbb10pO2ZvcihnPTAsaT1ILmxlbmd0aDtnPGk7ZysrKWo9SFtnXSxrPWxbal0sbnVsbCE9ayYmKGRlbGV0ZSBsW2pdLHNbal09ayk7YS5leHRlbmQocy5kYXRhLGwpfWI9cC5maW5kKFwiPnVsOmZpcnN0XCIpLGIubGVuZ3RoP3MuY2hpbGRyZW49YS51aS5mYW5jeXRyZWUucGFyc2VIdG1sKGIpOnMuY2hpbGRyZW49cy5sYXp5P2Q6bnVsbCxtLnB1c2gocyl9KSxtfSxyZWdpc3RlckV4dGVuc2lvbjpmdW5jdGlvbihiKXtlKG51bGwhPWIubmFtZSxcImV4dGVuc2lvbnMgbXVzdCBoYXZlIGEgYG5hbWVgIHByb3BlcnR5LlwiKSxlKG51bGwhPWIudmVyc2lvbixcImV4dGVuc2lvbnMgbXVzdCBoYXZlIGEgYHZlcnNpb25gIHByb3BlcnR5LlwiKSxhLnVpLmZhbmN5dHJlZS5fZXh0ZW5zaW9uc1tiLm5hbWVdPWJ9LHVuZXNjYXBlSHRtbDpmdW5jdGlvbihhKXt2YXIgYj1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGIuaW5uZXJIVE1MPWEsMD09PWIuY2hpbGROb2Rlcy5sZW5ndGg/XCJcIjpiLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlfSx3YXJuOmZ1bmN0aW9uKGEpe2YoXCJ3YXJuXCIsYXJndW1lbnRzKX19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUuY2hpbGRjb3VudGVyLm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2EudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuY291bnRTZWxlY3RlZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2Iub3B0aW9ucztyZXR1cm4gYi5nZXRTZWxlY3RlZE5vZGVzKGEpLmxlbmd0aH0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZU5vZGVDbGFzcy5wcm90b3R5cGUudXBkYXRlQ291bnRlcnM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9YShcInNwYW4uZmFuY3l0cmVlLWNoaWxkY291bnRlclwiLGIuc3BhbiksZD1iLnRyZWUub3B0aW9ucy5jaGlsZGNvdW50ZXIsZT1iLmNvdW50Q2hpbGRyZW4oZC5kZWVwKTtiLmRhdGEuY2hpbGRDb3VudGVyPWUsIWUmJmQuaGlkZVplcm9zfHxiLmlzRXhwYW5kZWQoKSYmZC5oaWRlRXhwYW5kZWQ/Yy5yZW1vdmUoKTooYy5sZW5ndGh8fChjPWEoXCI8c3BhbiBjbGFzcz0nZmFuY3l0cmVlLWNoaWxkY291bnRlcicvPlwiKS5hcHBlbmRUbyhhKFwic3Bhbi5mYW5jeXRyZWUtaWNvblwiLGIuc3BhbikpKSxjLnRleHQoZSkpLCFkLmRlZXB8fGIuaXNUb3BMZXZlbCgpfHxiLmlzUm9vdCgpfHxiLnBhcmVudC51cGRhdGVDb3VudGVycygpfSxhLnVpLmZhbmN5dHJlZS5wcm90b3R5cGUud2lkZ2V0TWV0aG9kMT1mdW5jdGlvbihhKXt0aGlzLnRyZWU7cmV0dXJuIGF9LGEudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwiY2hpbGRjb3VudGVyXCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2RlZXA6ITAsaGlkZVplcm9zOiEwLGhpZGVFeHBhbmRlZDohMX0sZm9vOjQyLF9hcHBlbmRDb3VudGVyOmZ1bmN0aW9uKGEpe30sdHJlZUluaXQ6ZnVuY3Rpb24oYSl7YS5vcHRpb25zLGEub3B0aW9ucy5jaGlsZGNvdW50ZXI7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcyhcImZhbmN5dHJlZS1leHQtY2hpbGRjb3VudGVyXCIpfSx0cmVlRGVzdHJveTpmdW5jdGlvbihhKXt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LG5vZGVSZW5kZXJUaXRsZTpmdW5jdGlvbihiLGMpe3ZhciBkPWIubm9kZSxlPWIub3B0aW9ucy5jaGlsZGNvdW50ZXIsZj1udWxsPT1kLmRhdGEuY2hpbGRDb3VudGVyP2QuY291bnRDaGlsZHJlbihlLmRlZXApOitkLmRhdGEuY2hpbGRDb3VudGVyO3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSwhZiYmZS5oaWRlWmVyb3N8fGQuaXNFeHBhbmRlZCgpJiZlLmhpZGVFeHBhbmRlZHx8YShcInNwYW4uZmFuY3l0cmVlLWljb25cIixkLnNwYW4pLmFwcGVuZChhKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1jaGlsZGNvdW50ZXInLz5cIikudGV4dChmKSl9LG5vZGVTZXRFeHBhbmRlZDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS50cmVlO2Eubm9kZTtyZXR1cm4gdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLmFsd2F5cyhmdW5jdGlvbigpe2Qubm9kZVJlbmRlclRpdGxlKGEpfSl9fSl9KGpRdWVyeSk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUuY2xvbmVzLm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGIsYyl7Ynx8KGM9Yz9cIjogXCIrYzpcIlwiLGEuZXJyb3IoXCJBc3NlcnRpb24gZmFpbGVkXCIrYykpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYztmb3IoYz1hLmxlbmd0aC0xO2M+PTA7Yy0tKWlmKGFbY109PT1iKXJldHVybiBhLnNwbGljZShjLDEpLCEwO3JldHVybiExfWZ1bmN0aW9uIGcoYSxiLGMpe2Zvcih2YXIgZCxlLGY9MyZhLmxlbmd0aCxnPWEubGVuZ3RoLWYsaD1jLGk9MzQzMjkxODM1MyxqPTQ2MTg0NTkwNyxrPTA7azxnOyllPTI1NSZhLmNoYXJDb2RlQXQoayl8KDI1NSZhLmNoYXJDb2RlQXQoKytrKSk8PDh8KDI1NSZhLmNoYXJDb2RlQXQoKytrKSk8PDE2fCgyNTUmYS5jaGFyQ29kZUF0KCsraykpPDwyNCwrK2ssZT0oNjU1MzUmZSkqaSsoKChlPj4+MTYpKmkmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxlPWU8PDE1fGU+Pj4xNyxlPSg2NTUzNSZlKSpqKygoKGU+Pj4xNikqaiY2NTUzNSk8PDE2KSY0Mjk0OTY3Mjk1LGhePWUsaD1oPDwxM3xoPj4+MTksZD01Kig2NTUzNSZoKSsoKDUqKGg+Pj4xNikmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxoPSg2NTUzNSZkKSsyNzQ5MisoKChkPj4+MTYpKzU4OTY0JjY1NTM1KTw8MTYpO3N3aXRjaChlPTAsZil7Y2FzZSAzOmVePSgyNTUmYS5jaGFyQ29kZUF0KGsrMikpPDwxNjtjYXNlIDI6ZV49KDI1NSZhLmNoYXJDb2RlQXQoaysxKSk8PDg7Y2FzZSAxOmVePTI1NSZhLmNoYXJDb2RlQXQoayksZT0oNjU1MzUmZSkqaSsoKChlPj4+MTYpKmkmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxlPWU8PDE1fGU+Pj4xNyxlPSg2NTUzNSZlKSpqKygoKGU+Pj4xNikqaiY2NTUzNSk8PDE2KSY0Mjk0OTY3Mjk1LGhePWV9cmV0dXJuIGhePWEubGVuZ3RoLGhePWg+Pj4xNixoPTIyNDY4MjI1MDcqKDY1NTM1JmgpKygoMjI0NjgyMjUwNyooaD4+PjE2KSY2NTUzNSk8PDE2KSY0Mjk0OTY3Mjk1LGhePWg+Pj4xMyxoPTMyNjY0ODk5MDkqKDY1NTM1JmgpKygoMzI2NjQ4OTkwOSooaD4+PjE2KSY2NTUzNSk8PDE2KSY0Mjk0OTY3Mjk1LGhePWg+Pj4xNixiPyhcIjAwMDAwMDBcIisoaD4+PjApLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC04KTpoPj4+MH1mdW5jdGlvbiBoKGIpe3ZhciBjLGQ9YS5tYXAoYi5nZXRQYXJlbnRMaXN0KCExLCEwKSxmdW5jdGlvbihhKXtyZXR1cm4gYS5yZWZLZXl8fGEua2V5fSk7cmV0dXJuIGQ9ZC5qb2luKFwiL1wiKSxjPVwiaWRfXCIrZyhkLCEwKX1hLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlTm9kZUNsYXNzLnByb3RvdHlwZS5nZXRDbG9uZUxpc3Q9ZnVuY3Rpb24oYil7dmFyIGMsZD10aGlzLnRyZWUsZT1kLnJlZk1hcFt0aGlzLnJlZktleV18fG51bGwsZj1kLmtleU1hcDtyZXR1cm4gZSYmKGM9dGhpcy5rZXksYj9lPWEubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIGZbYV19KTooZT1hLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yz9udWxsOmZbYV19KSxlLmxlbmd0aDwxJiYoZT1udWxsKSkpLGV9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLmlzQ2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlZktleXx8bnVsbCxiPWEmJnRoaXMudHJlZS5yZWZNYXBbYV18fG51bGw7cmV0dXJuISEoYiYmYi5sZW5ndGg+MSl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLnJlUmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXtiPW51bGw9PWI/bnVsbDpcIlwiK2IsYz1udWxsPT1jP251bGw6XCJcIitjO3ZhciBkPXRoaXMudHJlZSxlPXRoaXMua2V5LGY9dGhpcy5yZWZLZXksZz1kLmtleU1hcCxoPWQucmVmTWFwLGk9aFtmXXx8bnVsbCxqPSExO3JldHVybiBudWxsIT1iJiZiIT09dGhpcy5rZXkmJihnW2JdJiZhLmVycm9yKFwiW2V4dC1jbG9uZXNdIHJlUmVnaXN0ZXIoXCIrYitcIik6IGFscmVhZHkgZXhpc3RzOiBcIit0aGlzKSxkZWxldGUgZ1tlXSxnW2JdPXRoaXMsaSYmKGhbZl09YS5tYXAoaSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWU/YjphfSkpLHRoaXMua2V5PWIsaj0hMCksbnVsbCE9YyYmYyE9PXRoaXMucmVmS2V5JiYoaSYmKDE9PT1pLmxlbmd0aD9kZWxldGUgaFtmXTpoW2ZdPWEubWFwKGksZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1lP251bGw6YX0pKSxoW2NdP2hbY10uYXBwZW5kKGIpOmhbY109W3RoaXMua2V5XSx0aGlzLnJlZktleT1jLGo9ITApLGp9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLnNldFJlZktleT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZVJlZ2lzdGVyKG51bGwsYSl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuZ2V0Tm9kZXNCeVJlZj1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMua2V5TWFwLGU9dGhpcy5yZWZNYXBbYl18fG51bGw7cmV0dXJuIGUmJihlPWM/YS5tYXAoZSxmdW5jdGlvbihhKXt2YXIgYj1kW2FdO3JldHVybiBiLmlzRGVzY2VuZGFudE9mKGMpP2I6bnVsbH0pOmEubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIGRbYV19KSxlLmxlbmd0aDwxJiYoZT1udWxsKSksZX0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZUNsYXNzLnByb3RvdHlwZS5jaGFuZ2VSZWZLZXk9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5rZXlNYXAsZj10aGlzLnJlZk1hcFthXXx8bnVsbDtpZihmKXtmb3IoYz0wO2M8Zi5sZW5ndGg7YysrKWQ9ZVtmW2NdXSxkLnJlZktleT1iO2RlbGV0ZSB0aGlzLnJlZk1hcFthXSx0aGlzLnJlZk1hcFtiXT1mfX0sYS51aS5mYW5jeXRyZWUucmVnaXN0ZXJFeHRlbnNpb24oe25hbWU6XCJjbG9uZXNcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7aGlnaGxpZ2h0QWN0aXZlQ2xvbmVzOiEwLGhpZ2hsaWdodENsb25lczohMX0sdHJlZUNyZWF0ZTpmdW5jdGlvbihhKXt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksYS50cmVlLnJlZk1hcD17fSxhLnRyZWUua2V5TWFwPXt9fSx0cmVlSW5pdDpmdW5jdGlvbihhKXt0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWNsb25lc1wiKSxlKG51bGw9PWEub3B0aW9ucy5kZWZhdWx0S2V5KSxhLm9wdGlvbnMuZGVmYXVsdEtleT1mdW5jdGlvbihhKXtyZXR1cm4gaChhKX0sdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSx0cmVlQ2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHJlZS5yZWZNYXA9e30sYS50cmVlLmtleU1hcD17fSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LHRyZWVSZWdpc3Rlck5vZGU6ZnVuY3Rpb24oYixjLGQpe3ZhciBnLGgsaT1iLnRyZWUsaj1pLmtleU1hcCxrPWkucmVmTWFwLGw9ZC5rZXksbT1kJiZudWxsIT1kLnJlZktleT9cIlwiK2QucmVmS2V5Om51bGw7cmV0dXJuIGQuaXNTdGF0dXNOb2RlKCk/dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpOihjPyhudWxsIT1qW2Qua2V5XSYmYS5lcnJvcihcImNsb25lcy50cmVlUmVnaXN0ZXJOb2RlOiBub2RlLmtleSBhbHJlYWR5IGV4aXN0czogXCIrZCksaltsXT1kLG0mJihnPWtbbV0sZz8oZy5wdXNoKGwpLDI9PT1nLmxlbmd0aCYmYi5vcHRpb25zLmNsb25lcy5oaWdobGlnaHRDbG9uZXMmJmpbZ1swXV0ucmVuZGVyU3RhdHVzKCkpOmtbbV09W2xdKSk6KG51bGw9PWpbbF0mJmEuZXJyb3IoXCJjbG9uZXMudHJlZVJlZ2lzdGVyTm9kZTogbm9kZS5rZXkgbm90IHJlZ2lzdGVyZWQ6IFwiK2Qua2V5KSxkZWxldGUgaltsXSxtJiYoZz1rW21dLGcmJihoPWcubGVuZ3RoLGg8PTE/KGUoMT09PWgpLGUoZ1swXT09PWwpLGRlbGV0ZSBrW21dKTooZihnLGwpLDI9PT1oJiZiLm9wdGlvbnMuY2xvbmVzLmhpZ2hsaWdodENsb25lcyYmaltnWzBdXS5yZW5kZXJTdGF0dXMoKSkpKSksdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpKX0sbm9kZVJlbmRlclN0YXR1czpmdW5jdGlvbihiKXt2YXIgYyxkLGU9Yi5ub2RlO3JldHVybiBkPXRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxiLm9wdGlvbnMuY2xvbmVzLmhpZ2hsaWdodENsb25lcyYmKGM9YShlW2IudHJlZS5zdGF0dXNDbGFzc1Byb3BOYW1lXSksYy5sZW5ndGgmJmUuaXNDbG9uZSgpJiZjLmFkZENsYXNzKFwiZmFuY3l0cmVlLWNsb25lXCIpKSxkfSxub2RlU2V0QWN0aXZlOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZT1iLnRyZWUuc3RhdHVzQ2xhc3NQcm9wTmFtZSxmPWIubm9kZTtyZXR1cm4gZD10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksYi5vcHRpb25zLmNsb25lcy5oaWdobGlnaHRBY3RpdmVDbG9uZXMmJmYuaXNDbG9uZSgpJiZhLmVhY2goZi5nZXRDbG9uZUxpc3QoITApLGZ1bmN0aW9uKGIsZCl7YShkW2VdKS50b2dnbGVDbGFzcyhcImZhbmN5dHJlZS1hY3RpdmUtY2xvbmVcIixjIT09ITEpfSksZH19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUuZG5kLm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGEpe3JldHVybiAwPT09YT9cIlwiOmE+MD9cIitcIithOlwiXCIrYX1mdW5jdGlvbiBmKCl7aHx8KGEudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLFwiY29ubmVjdFRvRmFuY3l0cmVlXCIse3N0YXJ0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YSh0aGlzKS5kYXRhKFwidWktZHJhZ2dhYmxlXCIpfHxhKHRoaXMpLmRhdGEoXCJkcmFnZ2FibGVcIiksZT1jLmhlbHBlci5kYXRhKFwiZnRTb3VyY2VOb2RlXCIpfHxudWxsO2lmKGUpcmV0dXJuIGQub2Zmc2V0LmNsaWNrLnRvcD0tMixkLm9mZnNldC5jbGljay5sZWZ0PTE2LGUudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcInN0YXJ0XCIsZSxudWxsLGIsYyxkKX0sZHJhZzpmdW5jdGlvbihiLGMpe3ZhciBkLGUsZixnPWEodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKXx8YSh0aGlzKS5kYXRhKFwiZHJhZ2dhYmxlXCIpLGg9Yy5oZWxwZXIuZGF0YShcImZ0U291cmNlTm9kZVwiKXx8bnVsbCxpPWMuaGVscGVyLmRhdGEoXCJmdFRhcmdldE5vZGVcIil8fG51bGwsaj1hLnVpLmZhbmN5dHJlZS5nZXROb2RlKGIudGFyZ2V0KSxrPWgmJmgudHJlZS5vcHRpb25zLmRuZDtyZXR1cm4gYi50YXJnZXQmJiFqJiYoZT1hKGIudGFyZ2V0KS5jbG9zZXN0KFwiZGl2LmZhbmN5dHJlZS1kcmFnLWhlbHBlciwjZmFuY3l0cmVlLWRyb3AtbWFya2VyXCIpLmxlbmd0aD4wKT8oZj1ofHxpfHxhLnVpLmZhbmN5dHJlZSx2b2lkIGYuZGVidWcoXCJEcmFnIGV2ZW50IG92ZXIgaGVscGVyOiBpZ25vcmVkLlwiKSk6KGMuaGVscGVyLmRhdGEoXCJmdFRhcmdldE5vZGVcIixqKSxrJiZrLnVwZGF0ZUhlbHBlciYmKGQ9aC50cmVlLl9tYWtlSG9va0NvbnRleHQoaCxiLHtvdGhlck5vZGU6aix1aTpjLGRyYWdnYWJsZTpnLGRyb3BNYXJrZXI6YShcIiNmYW5jeXRyZWUtZHJvcC1tYXJrZXJcIil9KSxrLnVwZGF0ZUhlbHBlci5jYWxsKGgudHJlZSxoLGQpKSxpJiZpIT09aiYmaS50cmVlLmV4dC5kbmQuX29uRHJhZ0V2ZW50KFwibGVhdmVcIixpLGgsYixjLGcpLHZvaWQoaiYmai50cmVlLm9wdGlvbnMuZG5kLmRyYWdEcm9wJiYoaj09PWk/ai50cmVlLmV4dC5kbmQuX29uRHJhZ0V2ZW50KFwib3ZlclwiLGosaCxiLGMsZyk6KGoudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcImVudGVyXCIsaixoLGIsYyxnKSxqLnRyZWUuZXh0LmRuZC5fb25EcmFnRXZlbnQoXCJvdmVyXCIsaixoLGIsYyxnKSkpKSl9LHN0b3A6ZnVuY3Rpb24oYixjKXt2YXIgZCxlPWEodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKXx8YSh0aGlzKS5kYXRhKFwiZHJhZ2dhYmxlXCIpLGY9Yy5oZWxwZXIuZGF0YShcImZ0U291cmNlTm9kZVwiKXx8bnVsbCxnPWMuaGVscGVyLmRhdGEoXCJmdFRhcmdldE5vZGVcIil8fG51bGwsaD1cIm1vdXNldXBcIj09PWIudHlwZSYmMT09PWIud2hpY2g7aHx8KGQ9Znx8Z3x8YS51aS5mYW5jeXRyZWUsZC5kZWJ1ZyhcIkRyYWcgd2FzIGNhbmNlbGxlZFwiKSksZyYmKGgmJmcudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcImRyb3BcIixnLGYsYixjLGUpLGcudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcImxlYXZlXCIsZyxmLGIsYyxlKSksZiYmZi50cmVlLmV4dC5kbmQuX29uRHJhZ0V2ZW50KFwic3RvcFwiLGYsbnVsbCxiLGMsZSl9fSksaD0hMCl9ZnVuY3Rpb24gZyhiKXt2YXIgYz1iLm9wdGlvbnMuZG5kfHxudWxsLGQ9Yi5vcHRpb25zLmdseXBofHxudWxsO2MmJmYoKSxjJiZjLmRyYWdTdGFydCYmYi53aWRnZXQuZWxlbWVudC5kcmFnZ2FibGUoYS5leHRlbmQoe2FkZENsYXNzZXM6ITEsYXBwZW5kVG86Yi4kY29udGFpbmVyLGNvbnRhaW5tZW50OiExLGRlbGF5OjAsZGlzdGFuY2U6NCxyZXZlcnQ6ITEsc2Nyb2xsOiEwLHNjcm9sbFNwZWVkOjcsc2Nyb2xsU2Vuc2l0aXZpdHk6MTAsY29ubmVjdFRvRmFuY3l0cmVlOiEwLGhlbHBlcjpmdW5jdGlvbihiKXt2YXIgYyxlLGYsZz1hLnVpLmZhbmN5dHJlZS5nZXROb2RlKGIudGFyZ2V0KTtyZXR1cm4gZz8oZj1nLnRyZWUub3B0aW9ucy5kbmQsZT1hKGcuc3BhbiksYz1hKFwiPGRpdiBjbGFzcz0nZmFuY3l0cmVlLWRyYWctaGVscGVyJz48c3BhbiBjbGFzcz0nZmFuY3l0cmVlLWRyYWctaGVscGVyLWltZycgLz48L2Rpdj5cIikuY3NzKHt6SW5kZXg6Myxwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KS5hcHBlbmQoZS5maW5kKFwic3Bhbi5mYW5jeXRyZWUtdGl0bGVcIikuY2xvbmUoKSksYy5kYXRhKFwiZnRTb3VyY2VOb2RlXCIsZyksZCYmYy5maW5kKFwiLmZhbmN5dHJlZS1kcmFnLWhlbHBlci1pbWdcIikuYWRkQ2xhc3MoZC5tYXAuZHJhZ0hlbHBlciksZi5pbml0SGVscGVyJiZmLmluaXRIZWxwZXIuY2FsbChnLnRyZWUsZyx7bm9kZTpnLHRyZWU6Zy50cmVlLG9yaWdpbmFsRXZlbnQ6Yix1aTp7aGVscGVyOmN9fSksYyk6XCI8ZGl2PkVSUk9SPzogaGVscGVyIHJlcXVlc3RlZCBidXQgc291cmNlTm9kZSBub3QgZm91bmQ8L2Rpdj5cIn0sc3RhcnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmhlbHBlci5kYXRhKFwiZnRTb3VyY2VOb2RlXCIpO3JldHVybiEhY319LGIub3B0aW9ucy5kbmQuZHJhZ2dhYmxlKSksYyYmYy5kcmFnRHJvcCYmYi53aWRnZXQuZWxlbWVudC5kcm9wcGFibGUoYS5leHRlbmQoe2FkZENsYXNzZXM6ITEsdG9sZXJhbmNlOlwiaW50ZXJzZWN0XCIsZ3JlZWR5OiExfSxiLm9wdGlvbnMuZG5kLmRyb3BwYWJsZSkpfXZhciBoPSExLGk9XCJmYW5jeXRyZWUtZHJvcC1hY2NlcHRcIixqPVwiZmFuY3l0cmVlLWRyb3AtYWZ0ZXJcIixrPVwiZmFuY3l0cmVlLWRyb3AtYmVmb3JlXCIsbD1cImZhbmN5dHJlZS1kcm9wLW92ZXJcIixtPVwiZmFuY3l0cmVlLWRyb3AtcmVqZWN0XCIsbj1cImZhbmN5dHJlZS1kcm9wLXRhcmdldFwiO2EudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwiZG5kXCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2F1dG9FeHBhbmRNUzoxZTMsZHJhZ2dhYmxlOm51bGwsZHJvcHBhYmxlOm51bGwsZm9jdXNPbkNsaWNrOiExLHByZXZlbnRWb2lkTW92ZXM6ITAscHJldmVudFJlY3Vyc2l2ZU1vdmVzOiEwLHNtYXJ0UmV2ZXJ0OiEwLGRyYWdTdGFydDpudWxsLGRyYWdTdG9wOm51bGwsaW5pdEhlbHBlcjpudWxsLHVwZGF0ZUhlbHBlcjpudWxsLGRyYWdFbnRlcjpudWxsLGRyYWdPdmVyOm51bGwsZHJhZ0V4cGFuZDpudWxsLGRyYWdEcm9wOm51bGwsZHJhZ0xlYXZlOm51bGx9LHRyZWVJbml0OmZ1bmN0aW9uKGIpe3ZhciBjPWIudHJlZTt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksYy5vcHRpb25zLmRuZC5kcmFnU3RhcnQmJmMuJGNvbnRhaW5lci5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGMpe2lmKGIub3B0aW9ucy5kbmQuZm9jdXNPbkNsaWNrKXt2YXIgZD1hLnVpLmZhbmN5dHJlZS5nZXROb2RlKGMpO2QmJmQuZGVidWcoXCJSZS1lbmFibGUgZm9jdXMgdGhhdCB3YXMgcHJldmVudGVkIGJ5IGpRdWVyeSBVSSBkcmFnZ2FibGUuXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXthKGMudGFyZ2V0KS5jbG9zZXN0KFwiOnRhYmJhYmxlXCIpLmZvY3VzKCl9LDEwKX19KSxnKGMpfSxfc2V0RG5kU3RhdHVzOmZ1bmN0aW9uKGIsYyxkLGYsZyl7dmFyIGgsbz1cImNlbnRlclwiLHA9dGhpcy5fbG9jYWwscT10aGlzLm9wdGlvbnMuZ2x5cGh8fG51bGwscj1iP2EoYi5zcGFuKTpudWxsLHM9YShjLnNwYW4pLHQ9cy5maW5kKFwiPnNwYW4uZmFuY3l0cmVlLXRpdGxlXCIpO2lmKHAuJGRyb3BNYXJrZXJ8fChwLiRkcm9wTWFya2VyPWEoXCI8ZGl2IGlkPSdmYW5jeXRyZWUtZHJvcC1tYXJrZXInPjwvZGl2PlwiKS5oaWRlKCkuY3NzKHtcInotaW5kZXhcIjoxZTN9KS5wcmVwZW5kVG8oYSh0aGlzLiRkaXYpLnBhcmVudCgpKSxxJiZwLiRkcm9wTWFya2VyLmFkZENsYXNzKHEubWFwLmRyb3BNYXJrZXIpKSxcImFmdGVyXCI9PT1mfHxcImJlZm9yZVwiPT09Znx8XCJvdmVyXCI9PT1mKXtzd2l0Y2goaD0tMjQsZil7Y2FzZVwiYmVmb3JlXCI6bz1cInRvcFwiLGgtPTE2O2JyZWFrO2Nhc2VcImFmdGVyXCI6bz1cImJvdHRvbVwiLGgtPTE2fXAuJGRyb3BNYXJrZXIudG9nZ2xlQ2xhc3MoaixcImFmdGVyXCI9PT1mKS50b2dnbGVDbGFzcyhsLFwib3ZlclwiPT09ZikudG9nZ2xlQ2xhc3MoayxcImJlZm9yZVwiPT09Zikuc2hvdygpLnBvc2l0aW9uKGEudWkuZmFuY3l0cmVlLmZpeFBvc2l0aW9uT3B0aW9ucyh7bXk6XCJsZWZ0XCIrZShoKStcIiBjZW50ZXJcIixhdDpcImxlZnQgXCIrbyxvZjp0fSkpfWVsc2UgcC4kZHJvcE1hcmtlci5oaWRlKCk7ciYmci50b2dnbGVDbGFzcyhpLGc9PT0hMCkudG9nZ2xlQ2xhc3MobSxnPT09ITEpLHMudG9nZ2xlQ2xhc3MobixcImFmdGVyXCI9PT1mfHxcImJlZm9yZVwiPT09Znx8XCJvdmVyXCI9PT1mKS50b2dnbGVDbGFzcyhqLFwiYWZ0ZXJcIj09PWYpLnRvZ2dsZUNsYXNzKGssXCJiZWZvcmVcIj09PWYpLnRvZ2dsZUNsYXNzKGksZz09PSEwKS50b2dnbGVDbGFzcyhtLGc9PT0hMSksZC50b2dnbGVDbGFzcyhpLGc9PT0hMCkudG9nZ2xlQ2xhc3MobSxnPT09ITEpfSxfb25EcmFnRXZlbnQ6ZnVuY3Rpb24oYixlLGYsZyxoLGkpe3ZhciBqLGssbCxtLG4sbyxwLHEscixzPXRoaXMub3B0aW9ucyx0PXMuZG5kLHU9dGhpcy5fbWFrZUhvb2tDb250ZXh0KGUsZyx7b3RoZXJOb2RlOmYsdWk6aCxkcmFnZ2FibGU6aX0pLHY9bnVsbCx3PXRoaXMseD1hKGUuc3Bhbik7c3dpdGNoKHQuc21hcnRSZXZlcnQmJihpLm9wdGlvbnMucmV2ZXJ0PVwiaW52YWxpZFwiKSxiKXtjYXNlXCJzdGFydFwiOmUuaXNTdGF0dXNOb2RlKCk/dj0hMTp0LmRyYWdTdGFydCYmKHY9dC5kcmFnU3RhcnQoZSx1KSksdj09PSExPyh0aGlzLmRlYnVnKFwidHJlZS5kcmFnU3RhcnQoKSBjYW5jZWxsZWRcIiksaC5oZWxwZXIudHJpZ2dlcihcIm1vdXNldXBcIikuaGlkZSgpKToodC5zbWFydFJldmVydCYmKG09ZVt1LnRyZWUubm9kZUNvbnRhaW5lckF0dHJOYW1lXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPWEoaS5vcHRpb25zLmFwcGVuZFRvKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpLm9yaWdpbmFsUG9zaXRpb24ubGVmdD1NYXRoLm1heCgwLG0ubGVmdC1sLmxlZnQpLGkub3JpZ2luYWxQb3NpdGlvbi50b3A9TWF0aC5tYXgoMCxtLnRvcC1sLnRvcCkpLHguYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZHJhZy1zb3VyY2VcIiksYShjKS5vbihcImtleWRvd24uZmFuY3l0cmVlLWRuZCxtb3VzZWRvd24uZmFuY3l0cmVlLWRuZFwiLGZ1bmN0aW9uKGIpe1wia2V5ZG93blwiPT09Yi50eXBlJiZiLndoaWNoPT09YS51aS5rZXlDb2RlLkVTQ0FQRT93LmV4dC5kbmQuX2NhbmNlbERyYWcoKTpcIm1vdXNlZG93blwiPT09Yi50eXBlJiZ3LmV4dC5kbmQuX2NhbmNlbERyYWcoKX0pKTticmVhaztjYXNlXCJlbnRlclwiOnI9KCF0LnByZXZlbnRSZWN1cnNpdmVNb3Zlc3x8IWUuaXNEZXNjZW5kYW50T2YoZikpJiYodC5kcmFnRW50ZXI/dC5kcmFnRW50ZXIoZSx1KTpudWxsKSx2PSEhciYmKGEuaXNBcnJheShyKT97b3ZlcjphLmluQXJyYXkoXCJvdmVyXCIscik+PTAsYmVmb3JlOmEuaW5BcnJheShcImJlZm9yZVwiLHIpPj0wLGFmdGVyOmEuaW5BcnJheShcImFmdGVyXCIscik+PTB9OntvdmVyOnI9PT0hMHx8XCJvdmVyXCI9PT1yLGJlZm9yZTpyPT09ITB8fFwiYmVmb3JlXCI9PT1yLGFmdGVyOnI9PT0hMHx8XCJhZnRlclwiPT09cn0pLGguaGVscGVyLmRhdGEoXCJlbnRlclJlc3BvbnNlXCIsdik7YnJlYWs7Y2FzZVwib3ZlclwiOnA9aC5oZWxwZXIuZGF0YShcImVudGVyUmVzcG9uc2VcIikscT1udWxsLHA9PT0hMXx8KFwic3RyaW5nXCI9PXR5cGVvZiBwP3E9cDooaz14Lm9mZnNldCgpLG49e3g6Zy5wYWdlWC1rLmxlZnQseTpnLnBhZ2VZLWsudG9wfSxvPXt4Om4ueC94LndpZHRoKCkseTpuLnkveC5oZWlnaHQoKX0scC5hZnRlciYmby55Pi43NT9xPVwiYWZ0ZXJcIjohcC5vdmVyJiZwLmFmdGVyJiZvLnk+LjU/cT1cImFmdGVyXCI6cC5iZWZvcmUmJm8ueTw9LjI1P3E9XCJiZWZvcmVcIjohcC5vdmVyJiZwLmJlZm9yZSYmby55PD0uNT9xPVwiYmVmb3JlXCI6cC5vdmVyJiYocT1cIm92ZXJcIiksdC5wcmV2ZW50Vm9pZE1vdmVzJiYoZT09PWY/KHRoaXMuZGVidWcoXCIgICAgZHJvcCBvdmVyIHNvdXJjZSBub2RlIHByZXZlbnRlZFwiKSxxPW51bGwpOlwiYmVmb3JlXCI9PT1xJiZmJiZlPT09Zi5nZXROZXh0U2libGluZygpPyh0aGlzLmRlYnVnKFwiICAgIGRyb3AgYWZ0ZXIgc291cmNlIG5vZGUgcHJldmVudGVkXCIpLHE9bnVsbCk6XCJhZnRlclwiPT09cSYmZiYmZT09PWYuZ2V0UHJldlNpYmxpbmcoKT8odGhpcy5kZWJ1ZyhcIiAgICBkcm9wIGJlZm9yZSBzb3VyY2Ugbm9kZSBwcmV2ZW50ZWRcIikscT1udWxsKTpcIm92ZXJcIj09PXEmJmYmJmYucGFyZW50PT09ZSYmZi5pc0xhc3RTaWJsaW5nKCkmJih0aGlzLmRlYnVnKFwiICAgIGRyb3AgbGFzdCBjaGlsZCBvdmVyIG93biBwYXJlbnQgcHJldmVudGVkXCIpLHE9bnVsbCkpLGguaGVscGVyLmRhdGEoXCJoaXRNb2RlXCIscSkpKSxcImJlZm9yZVwiPT09cXx8XCJhZnRlclwiPT09cXx8IXQuYXV0b0V4cGFuZE1TfHxlLmhhc0NoaWxkcmVuKCk9PT0hMXx8ZS5leHBhbmRlZHx8dC5kcmFnRXhwYW5kJiZ0LmRyYWdFeHBhbmQoZSx1KT09PSExfHxlLnNjaGVkdWxlQWN0aW9uKFwiZXhwYW5kXCIsdC5hdXRvRXhwYW5kTVMpLHEmJnQuZHJhZ092ZXImJih1LmhpdE1vZGU9cSx2PXQuZHJhZ092ZXIoZSx1KSksaj12IT09ITEmJm51bGwhPT1xLHQuc21hcnRSZXZlcnQmJihpLm9wdGlvbnMucmV2ZXJ0PSFqKSx0aGlzLl9sb2NhbC5fc2V0RG5kU3RhdHVzKGYsZSxoLmhlbHBlcixxLGopO2JyZWFrO2Nhc2VcImRyb3BcIjpxPWguaGVscGVyLmRhdGEoXCJoaXRNb2RlXCIpLHEmJnQuZHJhZ0Ryb3AmJih1LmhpdE1vZGU9cSx0LmRyYWdEcm9wKGUsdSkpO2JyZWFrO2Nhc2VcImxlYXZlXCI6ZS5zY2hlZHVsZUFjdGlvbihcImNhbmNlbFwiKSxoLmhlbHBlci5kYXRhKFwiZW50ZXJSZXNwb25zZVwiLG51bGwpLGguaGVscGVyLmRhdGEoXCJoaXRNb2RlXCIsbnVsbCksdGhpcy5fbG9jYWwuX3NldERuZFN0YXR1cyhmLGUsaC5oZWxwZXIsXCJvdXRcIixkKSx0LmRyYWdMZWF2ZSYmdC5kcmFnTGVhdmUoZSx1KTticmVhaztjYXNlXCJzdG9wXCI6eC5yZW1vdmVDbGFzcyhcImZhbmN5dHJlZS1kcmFnLXNvdXJjZVwiKSxhKGMpLm9mZihcIi5mYW5jeXRyZWUtZG5kXCIpLHQuZHJhZ1N0b3AmJnQuZHJhZ1N0b3AoZSx1KTticmVhaztkZWZhdWx0OmEuZXJyb3IoXCJVbnN1cHBvcnRlZCBkcmFnIGV2ZW50OiBcIitiKX1yZXR1cm4gdn0sX2NhbmNlbERyYWc6ZnVuY3Rpb24oKXt2YXIgYj1hLnVpLmRkbWFuYWdlci5jdXJyZW50O2ImJmIuY2FuY2VsKCl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLmVkaXQubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO3ZhciBlPS9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSxmPWEudWkuZmFuY3l0cmVlLmVzY2FwZUh0bWwsZz1hLnVpLmZhbmN5dHJlZS51bmVzY2FwZUh0bWw7YS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZU5vZGVDbGFzcy5wcm90b3R5cGUuZWRpdFN0YXJ0PWZ1bmN0aW9uKCl7dmFyIGIsZD10aGlzLGU9dGhpcy50cmVlLGY9ZS5leHQuZWRpdCxoPWUub3B0aW9ucy5lZGl0LGk9YShcIi5mYW5jeXRyZWUtdGl0bGVcIixkLnNwYW4pLGo9e25vZGU6ZCx0cmVlOmUsb3B0aW9uczplLm9wdGlvbnMsaXNOZXc6YShkW2Uuc3RhdHVzQ2xhc3NQcm9wTmFtZV0pLmhhc0NsYXNzKFwiZmFuY3l0cmVlLWVkaXQtbmV3XCIpLG9yZ1RpdGxlOmQudGl0bGUsaW5wdXQ6bnVsbCxkaXJ0eTohMX07cmV0dXJuIGguYmVmb3JlRWRpdC5jYWxsKGQse3R5cGU6XCJiZWZvcmVFZGl0XCJ9LGopIT09ITEmJihhLnVpLmZhbmN5dHJlZS5hc3NlcnQoIWYuY3VycmVudE5vZGUsXCJyZWN1cnNpdmUgZWRpdFwiKSxmLmN1cnJlbnROb2RlPXRoaXMsZi5ldmVudERhdGE9aixlLndpZGdldC5fdW5iaW5kKCksYShjKS5vbihcIm1vdXNlZG93bi5mYW5jeXRyZWUtZWRpdFwiLGZ1bmN0aW9uKGIpe2EoYi50YXJnZXQpLmhhc0NsYXNzKFwiZmFuY3l0cmVlLWVkaXQtaW5wdXRcIil8fGQuZWRpdEVuZCghMCxiKX0pLGI9YShcIjxpbnB1dCAvPlwiLHtcImNsYXNzXCI6XCJmYW5jeXRyZWUtZWRpdC1pbnB1dFwiLHR5cGU6XCJ0ZXh0XCIsdmFsdWU6ZS5vcHRpb25zLmVzY2FwZVRpdGxlcz9qLm9yZ1RpdGxlOmcoai5vcmdUaXRsZSl9KSxmLmV2ZW50RGF0YS5pbnB1dD1iLG51bGwhPWguYWRqdXN0V2lkdGhPZnMmJmIud2lkdGgoaS53aWR0aCgpK2guYWRqdXN0V2lkdGhPZnMpLG51bGwhPWguaW5wdXRDc3MmJmIuY3NzKGguaW5wdXRDc3MpLGkuaHRtbChiKSxiLmZvY3VzKCkuY2hhbmdlKGZ1bmN0aW9uKGEpe2IuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZWRpdC1kaXJ0eVwiKX0pLmtleWRvd24oZnVuY3Rpb24oYil7c3dpdGNoKGIud2hpY2gpe2Nhc2UgYS51aS5rZXlDb2RlLkVTQ0FQRTpkLmVkaXRFbmQoITEsYik7YnJlYWs7Y2FzZSBhLnVpLmtleUNvZGUuRU5URVI6cmV0dXJuIGQuZWRpdEVuZCghMCxiKSwhMX1iLnN0b3BQcm9wYWdhdGlvbigpfSkuYmx1cihmdW5jdGlvbihhKXtyZXR1cm4gZC5lZGl0RW5kKCEwLGEpfSksdm9pZCBoLmVkaXQuY2FsbChkLHt0eXBlOlwiZWRpdFwifSxqKSl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLmVkaXRFbmQ9ZnVuY3Rpb24oYixkKXt2YXIgZSxnPXRoaXMsaD10aGlzLnRyZWUsaT1oLmV4dC5lZGl0LGo9aS5ldmVudERhdGEsaz1oLm9wdGlvbnMuZWRpdCxsPWEoXCIuZmFuY3l0cmVlLXRpdGxlXCIsZy5zcGFuKSxtPWwuZmluZChcImlucHV0LmZhbmN5dHJlZS1lZGl0LWlucHV0XCIpO3JldHVybiBrLnRyaW0mJm0udmFsKGEudHJpbShtLnZhbCgpKSksZT1tLnZhbCgpLGouZGlydHk9ZSE9PWcudGl0bGUsai5vcmlnaW5hbEV2ZW50PWQsYj09PSExP2ouc2F2ZT0hMTpqLmlzTmV3P2ouc2F2ZT1cIlwiIT09ZTpqLnNhdmU9ai5kaXJ0eSYmXCJcIiE9PWUsay5iZWZvcmVDbG9zZS5jYWxsKGcse3R5cGU6XCJiZWZvcmVDbG9zZVwifSxqKSE9PSExJiYoKCFqLnNhdmV8fGsuc2F2ZS5jYWxsKGcse3R5cGU6XCJzYXZlXCJ9LGopIT09ITEpJiYobS5yZW1vdmVDbGFzcyhcImZhbmN5dHJlZS1lZGl0LWRpcnR5XCIpLnVuYmluZCgpLGEoYykub2ZmKFwiLmZhbmN5dHJlZS1lZGl0XCIpLGouc2F2ZT8oZy5zZXRUaXRsZShoLm9wdGlvbnMuZXNjYXBlVGl0bGVzP2U6ZihlKSksZy5zZXRGb2N1cygpKTpqLmlzTmV3PyhnLnJlbW92ZSgpLGc9ai5ub2RlPW51bGwsaS5yZWxhdGVkTm9kZS5zZXRGb2N1cygpKTooZy5yZW5kZXJUaXRsZSgpLGcuc2V0Rm9jdXMoKSksaS5ldmVudERhdGE9bnVsbCxpLmN1cnJlbnROb2RlPW51bGwsaS5yZWxhdGVkTm9kZT1udWxsLGgud2lkZ2V0Ll9iaW5kKCksYShoLiRjb250YWluZXIpLmZvY3VzKCksai5pbnB1dD1udWxsLGsuY2xvc2UuY2FsbChnLHt0eXBlOlwiY2xvc2VcIn0saiksITApKX0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZU5vZGVDbGFzcy5wcm90b3R5cGUuZWRpdENyZWF0ZU5vZGU9ZnVuY3Rpb24oYixjKXt2YXIgZCxlPXRoaXMudHJlZSxmPXRoaXM7cmV0dXJuIGI9Ynx8XCJjaGlsZFwiLG51bGw9PWM/Yz17dGl0bGU6XCJcIn06XCJzdHJpbmdcIj09dHlwZW9mIGM/Yz17dGl0bGU6Y306YS51aS5mYW5jeXRyZWUuYXNzZXJ0KGEuaXNQbGFpbk9iamVjdChjKSksXCJjaGlsZFwiIT09Ynx8dGhpcy5pc0V4cGFuZGVkKCl8fHRoaXMuaGFzQ2hpbGRyZW4oKT09PSExPyhkPXRoaXMuYWRkTm9kZShjLGIpLGQubWF0Y2g9ITAsYShkW2Uuc3RhdHVzQ2xhc3NQcm9wTmFtZV0pLnJlbW92ZUNsYXNzKFwiZmFuY3l0cmVlLWhpZGVcIikuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtbWF0Y2hcIiksdm9pZCBkLm1ha2VWaXNpYmxlKCkuZG9uZShmdW5jdGlvbigpe2EoZFtlLnN0YXR1c0NsYXNzUHJvcE5hbWVdKS5hZGRDbGFzcyhcImZhbmN5dHJlZS1lZGl0LW5ld1wiKSxmLnRyZWUuZXh0LmVkaXQucmVsYXRlZE5vZGU9ZixkLmVkaXRTdGFydCgpfSkpOnZvaWQgdGhpcy5zZXRFeHBhbmRlZCgpLmRvbmUoZnVuY3Rpb24oKXtmLmVkaXRDcmVhdGVOb2RlKGIsYyl9KX0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZUNsYXNzLnByb3RvdHlwZS5pc0VkaXRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHQuZWRpdD90aGlzLmV4dC5lZGl0LmN1cnJlbnROb2RlOm51bGx9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLmlzRWRpdGluZz1mdW5jdGlvbigpe3JldHVybiEhdGhpcy50cmVlLmV4dC5lZGl0JiZ0aGlzLnRyZWUuZXh0LmVkaXQuY3VycmVudE5vZGU9PT10aGlzfSxhLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcImVkaXRcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7YWRqdXN0V2lkdGhPZnM6NCxhbGxvd0VtcHR5OiExLGlucHV0Q3NzOnttaW5XaWR0aDpcIjNlbVwifSx0cmlnZ2VyU3RhcnQ6W1wiZjJcIixcInNoaWZ0K2NsaWNrXCIsXCJtYWMrZW50ZXJcIl0sdHJpbTohMCxiZWZvcmVDbG9zZTphLm5vb3AsYmVmb3JlRWRpdDphLm5vb3AsY2xvc2U6YS5ub29wLGVkaXQ6YS5ub29wLHNhdmU6YS5ub29wfSxjdXJyZW50Tm9kZTpudWxsLHRyZWVJbml0OmZ1bmN0aW9uKGEpe3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSx0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWVkaXRcIil9LG5vZGVDbGljazpmdW5jdGlvbihiKXtyZXR1cm4gYS5pbkFycmF5KFwic2hpZnQrY2xpY2tcIixiLm9wdGlvbnMuZWRpdC50cmlnZ2VyU3RhcnQpPj0wJiZiLm9yaWdpbmFsRXZlbnQuc2hpZnRLZXk/KGIubm9kZS5lZGl0U3RhcnQoKSwhMSk6dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSxub2RlRGJsY2xpY2s6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5BcnJheShcImRibGNsaWNrXCIsYi5vcHRpb25zLmVkaXQudHJpZ2dlclN0YXJ0KT49MD8oYi5ub2RlLmVkaXRTdGFydCgpLCExKTp0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LG5vZGVLZXlkb3duOmZ1bmN0aW9uKGIpe3N3aXRjaChiLm9yaWdpbmFsRXZlbnQud2hpY2gpe2Nhc2UgMTEzOmlmKGEuaW5BcnJheShcImYyXCIsYi5vcHRpb25zLmVkaXQudHJpZ2dlclN0YXJ0KT49MClyZXR1cm4gYi5ub2RlLmVkaXRTdGFydCgpLCExO2JyZWFrO2Nhc2UgYS51aS5rZXlDb2RlLkVOVEVSOmlmKGEuaW5BcnJheShcIm1hYytlbnRlclwiLGIub3B0aW9ucy5lZGl0LnRyaWdnZXJTdGFydCk+PTAmJmUpcmV0dXJuIGIubm9kZS5lZGl0U3RhcnQoKSwhMX1yZXR1cm4gdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfX0pfShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcblxuLyohIEV4dGVuc2lvbiAnanF1ZXJ5LmZhbmN5dHJlZS5maWx0ZXIubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYSl7cmV0dXJuKGErXCJcIikucmVwbGFjZSgvKFsuPyorXFxeXFwkXFxbXFxdXFxcXCgpe318LV0pL2csXCJcXFxcJDFcIil9ZnVuY3Rpb24gZihiKXtyZXR1cm4gYi5pbmRleE9mKFwiPlwiKT49MD9hKFwiPGRpdi8+XCIpLmh0bWwoYikudGV4dCgpOmJ9dmFyIGc9XCJfX25vdF9mb3VuZF9fXCIsaD1hLnVpLmZhbmN5dHJlZS5lc2NhcGVIdG1sO2EudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuX2FwcGx5RmlsdGVySW1wbD1mdW5jdGlvbihiLGMsZCl7dmFyIGksaixrLGwsbT0wLG49dGhpcy5vcHRpb25zLG89bi5lc2NhcGVUaXRsZXMscD1uLmF1dG9Db2xsYXBzZSxxPWEuZXh0ZW5kKHt9LG4uZmlsdGVyLGQpLHI9XCJoaWRlXCI9PT1xLm1vZGUscz0hIXEubGVhdmVzT25seSYmIWM7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihpPXEuZnV6enk/Yi5zcGxpdChcIlwiKS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStcIlteXCIrYitcIl0qXCIrYn0pOmUoYiksaz1uZXcgUmVnRXhwKFwiLipcIitpK1wiLipcIixcImlcIiksbD1uZXcgUmVnRXhwKGUoYiksXCJnaVwiKSxiPWZ1bmN0aW9uKGEpe3ZhciBiLGM9bz9hLnRpdGxlOmYoYS50aXRsZSksZD0hIWsudGVzdChjKTtyZXR1cm4gZCYmcS5oaWdobGlnaHQmJihiPW8/aChhLnRpdGxlKTpjLGEudGl0bGVXaXRoSGlnaGxpZ2h0PWIucmVwbGFjZShsLGZ1bmN0aW9uKGEpe3JldHVyblwiPG1hcms+XCIrYStcIjwvbWFyaz5cIn0pKSxkfSksdGhpcy5lbmFibGVGaWx0ZXI9ITAsdGhpcy5sYXN0RmlsdGVyQXJncz1hcmd1bWVudHMsdGhpcy4kZGl2LmFkZENsYXNzKFwiZmFuY3l0cmVlLWV4dC1maWx0ZXJcIikscj90aGlzLiRkaXYuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWZpbHRlci1oaWRlXCIpOnRoaXMuJGRpdi5hZGRDbGFzcyhcImZhbmN5dHJlZS1leHQtZmlsdGVyLWRpbW1cIiksdGhpcy4kZGl2LnRvZ2dsZUNsYXNzKFwiZmFuY3l0cmVlLWV4dC1maWx0ZXItaGlkZS1leHBhbmRlcnNcIiwhIXEuaGlkZUV4cGFuZGVycyksdGhpcy52aXNpdChmdW5jdGlvbihhKXtkZWxldGUgYS5tYXRjaCxkZWxldGUgYS50aXRsZVdpdGhIaWdobGlnaHQsYS5zdWJNYXRjaENvdW50PTB9KSxqPXRoaXMuZ2V0Um9vdE5vZGUoKS5fZmluZERpcmVjdENoaWxkKGcpLGomJmoucmVtb3ZlKCksbi5hdXRvQ29sbGFwc2U9ITEsdGhpcy52aXNpdChmdW5jdGlvbihhKXtpZighc3x8bnVsbD09YS5jaGlsZHJlbil7dmFyIGQ9YihhKSxlPSExO2lmKFwic2tpcFwiPT09ZClyZXR1cm4gYS52aXNpdChmdW5jdGlvbihhKXthLm1hdGNoPSExfSwhMCksXCJza2lwXCI7ZHx8IWMmJlwiYnJhbmNoXCIhPT1kfHwhYS5wYXJlbnQubWF0Y2h8fChkPSEwLGU9ITApLGQmJihtKyssYS5tYXRjaD0hMCxhLnZpc2l0UGFyZW50cyhmdW5jdGlvbihhKXthLnN1Yk1hdGNoQ291bnQrPTEsIXEuYXV0b0V4cGFuZHx8ZXx8YS5leHBhbmRlZHx8KGEuc2V0RXhwYW5kZWQoITAse25vQW5pbWF0aW9uOiEwLG5vRXZlbnRzOiEwLHNjcm9sbEludG9WaWV3OiExfSksYS5fZmlsdGVyQXV0b0V4cGFuZGVkPSEwKX0pKX19KSxuLmF1dG9Db2xsYXBzZT1wLDA9PT1tJiZxLm5vZGF0YSYmciYmKGo9cS5ub2RhdGEsYS5pc0Z1bmN0aW9uKGopJiYoaj1qKCkpLGo9PT0hMD9qPXt9Olwic3RyaW5nXCI9PXR5cGVvZiBqJiYoaj17dGl0bGU6an0pLGo9YS5leHRlbmQoe3N0YXR1c05vZGVUeXBlOlwibm9kYXRhXCIsa2V5OmcsdGl0bGU6dGhpcy5vcHRpb25zLnN0cmluZ3Mubm9EYXRhfSxqKSx0aGlzLmdldFJvb3ROb2RlKCkuYWRkTm9kZShqKS5tYXRjaD0hMCksdGhpcy5yZW5kZXIoKSxtfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmZpbHRlck5vZGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYj17bGVhdmVzT25seTpifSx0aGlzLndhcm4oXCJGYW5jeXRyZWUuZmlsdGVyTm9kZXMoKSBsZWF2ZXNPbmx5IG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIDIuOS4wIC8gMjAxNS0wNC0xOS4gVXNlIG9wdHMubGVhdmVzT25seSBpbnN0ZWFkLlwiKSksdGhpcy5fYXBwbHlGaWx0ZXJJbXBsKGEsITEsYil9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuYXBwbHlGaWx0ZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud2FybihcIkZhbmN5dHJlZS5hcHBseUZpbHRlcigpIGlzIGRlcHJlY2F0ZWQgc2luY2UgMi4xLjAgLyAyMDE0LTA1LTI5LiBVc2UgLmZpbHRlck5vZGVzKCkgaW5zdGVhZC5cIiksdGhpcy5maWx0ZXJOb2Rlcy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuZmlsdGVyQnJhbmNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fYXBwbHlGaWx0ZXJJbXBsKGEsITAsYil9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuY2xlYXJGaWx0ZXI9ZnVuY3Rpb24oKXt2YXIgYixjPXRoaXMuZ2V0Um9vdE5vZGUoKS5fZmluZERpcmVjdENoaWxkKGcpLGQ9dGhpcy5vcHRpb25zLmVzY2FwZVRpdGxlcyxlPXRoaXMub3B0aW9ucy5lbmhhbmNlVGl0bGU7YyYmYy5yZW1vdmUoKSx0aGlzLnZpc2l0KGZ1bmN0aW9uKGMpe2MubWF0Y2gmJihiPWEoXCI+c3Bhbi5mYW5jeXRyZWUtdGl0bGVcIixjLnNwYW4pLGQ/Yi50ZXh0KGMudGl0bGUpOmIuaHRtbChjLnRpdGxlKSxlJiZlKHt0eXBlOlwiZW5oYW5jZVRpdGxlXCJ9LHtub2RlOmMsJHRpdGxlOmJ9KSksZGVsZXRlIGMubWF0Y2gsZGVsZXRlIGMuc3ViTWF0Y2hDb3VudCxkZWxldGUgYy50aXRsZVdpdGhIaWdobGlnaHQsYy4kc3ViTWF0Y2hCYWRnZSYmKGMuJHN1Yk1hdGNoQmFkZ2UucmVtb3ZlKCksZGVsZXRlIGMuJHN1Yk1hdGNoQmFkZ2UpLGMuX2ZpbHRlckF1dG9FeHBhbmRlZCYmYy5leHBhbmRlZCYmYy5zZXRFeHBhbmRlZCghMSx7bm9BbmltYXRpb246ITAsbm9FdmVudHM6ITAsc2Nyb2xsSW50b1ZpZXc6ITF9KSxkZWxldGUgYy5fZmlsdGVyQXV0b0V4cGFuZGVkfSksdGhpcy5lbmFibGVGaWx0ZXI9ITEsdGhpcy5sYXN0RmlsdGVyQXJncz1udWxsLHRoaXMuJGRpdi5yZW1vdmVDbGFzcyhcImZhbmN5dHJlZS1leHQtZmlsdGVyIGZhbmN5dHJlZS1leHQtZmlsdGVyLWRpbW0gZmFuY3l0cmVlLWV4dC1maWx0ZXItaGlkZVwiKSx0aGlzLnJlbmRlcigpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmlzRmlsdGVyQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmVuYWJsZUZpbHRlcn0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZU5vZGVDbGFzcy5wcm90b3R5cGUuaXNNYXRjaGVkPWZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLnRyZWUuZW5hYmxlRmlsdGVyJiYhdGhpcy5tYXRjaCl9LGEudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwiZmlsdGVyXCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2F1dG9BcHBseTohMCxhdXRvRXhwYW5kOiExLGNvdW50ZXI6ITAsZnV6enk6ITEsaGlkZUV4cGFuZGVkQ291bnRlcjohMCxoaWRlRXhwYW5kZXJzOiExLGhpZ2hsaWdodDohMCxsZWF2ZXNPbmx5OiExLG5vZGF0YTohMCxtb2RlOlwiZGltbVwifSxub2RlTG9hZENoaWxkcmVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKS5kb25lKGZ1bmN0aW9uKCl7YS50cmVlLmVuYWJsZUZpbHRlciYmYS50cmVlLmxhc3RGaWx0ZXJBcmdzJiZhLm9wdGlvbnMuZmlsdGVyLmF1dG9BcHBseSYmYS50cmVlLl9hcHBseUZpbHRlckltcGwuYXBwbHkoYS50cmVlLGEudHJlZS5sYXN0RmlsdGVyQXJncyl9KX0sbm9kZVNldEV4cGFuZGVkOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZGVsZXRlIGEubm9kZS5fZmlsdGVyQXV0b0V4cGFuZGVkLCFiJiZhLm9wdGlvbnMuZmlsdGVyLmhpZGVFeHBhbmRlZENvdW50ZXImJmEubm9kZS4kc3ViTWF0Y2hCYWRnZSYmYS5ub2RlLiRzdWJNYXRjaEJhZGdlLnNob3coKSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGMsZD1iLm5vZGUsZT1iLnRyZWUsZj1iLm9wdGlvbnMuZmlsdGVyLGc9YShcInNwYW4uZmFuY3l0cmVlLXRpdGxlXCIsZC5zcGFuKSxoPWEoZFtlLnN0YXR1c0NsYXNzUHJvcE5hbWVdKSxpPWIub3B0aW9ucy5lbmhhbmNlVGl0bGUsaj1iLm9wdGlvbnMuZXNjYXBlVGl0bGVzO3JldHVybiBjPXRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxoLmxlbmd0aCYmZS5lbmFibGVGaWx0ZXI/KGgudG9nZ2xlQ2xhc3MoXCJmYW5jeXRyZWUtbWF0Y2hcIiwhIWQubWF0Y2gpLnRvZ2dsZUNsYXNzKFwiZmFuY3l0cmVlLXN1Ym1hdGNoXCIsISFkLnN1Yk1hdGNoQ291bnQpLnRvZ2dsZUNsYXNzKFwiZmFuY3l0cmVlLWhpZGVcIiwhKGQubWF0Y2h8fGQuc3ViTWF0Y2hDb3VudCkpLCFmLmNvdW50ZXJ8fCFkLnN1Yk1hdGNoQ291bnR8fGQuaXNFeHBhbmRlZCgpJiZmLmhpZGVFeHBhbmRlZENvdW50ZXI/ZC4kc3ViTWF0Y2hCYWRnZSYmZC4kc3ViTWF0Y2hCYWRnZS5oaWRlKCk6KGQuJHN1Yk1hdGNoQmFkZ2V8fChkLiRzdWJNYXRjaEJhZGdlPWEoXCI8c3BhbiBjbGFzcz0nZmFuY3l0cmVlLWNoaWxkY291bnRlcicvPlwiKSxhKFwic3Bhbi5mYW5jeXRyZWUtaWNvbiwgc3Bhbi5mYW5jeXRyZWUtY3VzdG9tLWljb25cIixkLnNwYW4pLmFwcGVuZChkLiRzdWJNYXRjaEJhZGdlKSksZC4kc3ViTWF0Y2hCYWRnZS5zaG93KCkudGV4dChkLnN1Yk1hdGNoQ291bnQpKSxkLmlzRWRpdGluZyYmZC5pc0VkaXRpbmcuY2FsbChkKXx8KGQudGl0bGVXaXRoSGlnaGxpZ2h0P2cuaHRtbChkLnRpdGxlV2l0aEhpZ2hsaWdodCk6aj9nLnRleHQoZC50aXRsZSk6Zy5odG1sKGQudGl0bGUpLGkmJmkoe3R5cGU6XCJlbmhhbmNlVGl0bGVcIn0se25vZGU6ZCwkdGl0bGU6Z30pKSxjKTpjfX0pfShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcblxuLyohIEV4dGVuc2lvbiAnanF1ZXJ5LmZhbmN5dHJlZS5nbHlwaC5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShhLGIpe3JldHVybiBhLm1hcFtiXX1hLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcImdseXBoXCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e21hcDp7Y2hlY2tib3g6XCJpY29uLWNoZWNrLWVtcHR5XCIsY2hlY2tib3hTZWxlY3RlZDpcImljb24tY2hlY2tcIixjaGVja2JveFVua25vd246XCJpY29uLWNoZWNrIGljb24tbXV0ZWRcIixlcnJvcjpcImljb24tZXhjbGFtYXRpb24tc2lnblwiLGV4cGFuZGVyQ2xvc2VkOlwiaWNvbi1jYXJldC1yaWdodFwiLGV4cGFuZGVyTGF6eTpcImljb24tYW5nbGUtcmlnaHRcIixleHBhbmRlck9wZW46XCJpY29uLWNhcmV0LWRvd25cIixub2RhdGE6XCJpY29uLW1laFwiLG5vRXhwYW5kZXI6XCJcIixkcmFnSGVscGVyOlwiaWNvbi1jYXJldC1yaWdodFwiLGRyb3BNYXJrZXI6XCJpY29uLWNhcmV0LXJpZ2h0XCIsZG9jOlwiaWNvbi1maWxlLWFsdFwiLGRvY09wZW46XCJpY29uLWZpbGUtYWx0XCIsbG9hZGluZzpcImljb24tcmVmcmVzaCBpY29uLXNwaW5cIixmb2xkZXI6XCJpY29uLWZvbGRlci1jbG9zZS1hbHRcIixmb2xkZXJPcGVuOlwiaWNvbi1mb2xkZXItb3Blbi1hbHRcIn19LHRyZWVJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEudHJlZTt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksYi4kY29udGFpbmVyLmFkZENsYXNzKFwiZmFuY3l0cmVlLWV4dC1nbHlwaFwiKX0sbm9kZVJlbmRlclN0YXR1czpmdW5jdGlvbihiKXt2YXIgYyxkLGYsZz1iLm5vZGUsaD1hKGcuc3BhbiksaT1iLm9wdGlvbnMuZ2x5cGgsaj1pLm1hcDtyZXR1cm4gZD10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksZy5pc1Jvb3QoKT9kOihmPWguY2hpbGRyZW4oXCJzcGFuLmZhbmN5dHJlZS1leHBhbmRlclwiKS5nZXQoMCksZiYmKGM9Zy5leHBhbmRlZCYmZy5oYXNDaGlsZHJlbigpP1wiZXhwYW5kZXJPcGVuXCI6Zy5pc1VuZGVmaW5lZCgpP1wiZXhwYW5kZXJMYXp5XCI6Zy5oYXNDaGlsZHJlbigpP1wiZXhwYW5kZXJDbG9zZWRcIjpcIm5vRXhwYW5kZXJcIixmLmNsYXNzTmFtZT1cImZhbmN5dHJlZS1leHBhbmRlciBcIitqW2NdKSxmPWcudHI/YShcInRkXCIsZy50cikuZmluZChcInNwYW4uZmFuY3l0cmVlLWNoZWNrYm94XCIpLmdldCgwKTpoLmNoaWxkcmVuKFwic3Bhbi5mYW5jeXRyZWUtY2hlY2tib3hcIikuZ2V0KDApLGYmJihjPWcuc2VsZWN0ZWQ/XCJjaGVja2JveFNlbGVjdGVkXCI6Zy5wYXJ0c2VsP1wiY2hlY2tib3hVbmtub3duXCI6XCJjaGVja2JveFwiLGYuY2xhc3NOYW1lPVwiZmFuY3l0cmVlLWNoZWNrYm94IFwiK2pbY10pLGY9aC5jaGlsZHJlbihcInNwYW4uZmFuY3l0cmVlLWljb25cIikuZ2V0KDApLGYmJihjPWcuc3RhdHVzTm9kZVR5cGU/ZShpLGcuc3RhdHVzTm9kZVR5cGUpOmcuZm9sZGVyP2cuZXhwYW5kZWQmJmcuaGFzQ2hpbGRyZW4oKT9lKGksXCJmb2xkZXJPcGVuXCIpOmUoaSxcImZvbGRlclwiKTpnLmV4cGFuZGVkP2UoaSxcImRvY09wZW5cIik6ZShpLFwiZG9jXCIpLGYuY2xhc3NOYW1lPVwiZmFuY3l0cmVlLWljb24gXCIrYyksZCl9LG5vZGVTZXRTdGF0dXM6ZnVuY3Rpb24oYixjLGQsZil7dmFyIGcsaCxpPWIub3B0aW9ucy5nbHlwaCxqPWIubm9kZTtyZXR1cm4gZz10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksXCJlcnJvclwiIT09YyYmXCJsb2FkaW5nXCIhPT1jJiZcIm5vZGF0YVwiIT09Y3x8KGoucGFyZW50PyhoPWEoXCJzcGFuLmZhbmN5dHJlZS1leHBhbmRlclwiLGouc3BhbikuZ2V0KDApLGgmJihoLmNsYXNzTmFtZT1cImZhbmN5dHJlZS1leHBhbmRlciBcIitlKGksYykpKTooaD1hKFwiLmZhbmN5dHJlZS1zdGF0dXNub2RlLVwiK2Msalt0aGlzLm5vZGVDb250YWluZXJBdHRyTmFtZV0pLmZpbmQoXCJzcGFuLmZhbmN5dHJlZS1pY29uXCIpLmdldCgwKSxoJiYoaC5jbGFzc05hbWU9XCJmYW5jeXRyZWUtaWNvbiBcIitlKGksYykpKSksZ319KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUuZ3JpZG5hdi5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGMpe3ZhciBkLGU9Yy5nZXQoMCksZj0wO3JldHVybiBiLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3JldHVybiB0aGlzIT09ZSYmKGQ9YSh0aGlzKS5wcm9wKFwiY29sc3BhblwiKSx2b2lkKGYrPWQ/ZDoxKSl9KSxmfWZ1bmN0aW9uIGYoYixjKXt2YXIgZCxlPW51bGwsZj0wO3JldHVybiBiLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3JldHVybiBmPj1jPyhlPWEodGhpcyksITEpOihkPWEodGhpcykucHJvcChcImNvbHNwYW5cIiksdm9pZChmKz1kP2Q6MSkpfSksZX1mdW5jdGlvbiBnKGEsYil7dmFyIGMsZCxnPWEuY2xvc2VzdChcInRkXCIpLGk9bnVsbDtzd2l0Y2goYil7Y2FzZSBoLkxFRlQ6aT1nLnByZXYoKTticmVhaztjYXNlIGguUklHSFQ6aT1nLm5leHQoKTticmVhaztjYXNlIGguVVA6Y2FzZSBoLkRPV046Zm9yKGM9Zy5wYXJlbnQoKSxkPWUoYyxnKTs7KXtpZihjPWI9PT1oLlVQP2MucHJldigpOmMubmV4dCgpLCFjLmxlbmd0aClicmVhaztpZighYy5pcyhcIjpoaWRkZW5cIikmJihpPWYoYyxkKSxpJiZpLmZpbmQoXCI6aW5wdXQsYVwiKS5sZW5ndGgpKWJyZWFrfX1yZXR1cm4gaX12YXIgaD1hLnVpLmtleUNvZGUsaT17dGV4dDpbaC5VUCxoLkRPV05dLGNoZWNrYm94OltoLlVQLGguRE9XTixoLkxFRlQsaC5SSUdIVF0sbGluazpbaC5VUCxoLkRPV04saC5MRUZULGguUklHSFRdLHJhZGlvYnV0dG9uOltoLlVQLGguRE9XTixoLkxFRlQsaC5SSUdIVF0sXCJzZWxlY3Qtb25lXCI6W2guTEVGVCxoLlJJR0hUXSxcInNlbGVjdC1tdWx0aXBsZVwiOltoLkxFRlQsaC5SSUdIVF19O2EudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwiZ3JpZG5hdlwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOnthdXRvZm9jdXNJbnB1dDohMSxoYW5kbGVDdXJzb3JLZXlzOiEwfSx0cmVlSW5pdDpmdW5jdGlvbihiKXt0aGlzLl9yZXF1aXJlRXh0ZW5zaW9uKFwidGFibGVcIiwhMCwhMCksdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcyhcImZhbmN5dHJlZS1leHQtZ3JpZG5hdlwiKSx0aGlzLiRjb250YWluZXIub24oXCJmb2N1c2luXCIsZnVuY3Rpb24oYyl7dmFyIGQsZT1hLnVpLmZhbmN5dHJlZS5nZXROb2RlKGMudGFyZ2V0KTtlJiYhZS5pc0FjdGl2ZSgpJiYoZD1iLnRyZWUuX21ha2VIb29rQ29udGV4dChlLGMpLGIudHJlZS5fY2FsbEhvb2soXCJub2RlU2V0QWN0aXZlXCIsZCwhMCkpfSl9LG5vZGVTZXRBY3RpdmU6ZnVuY3Rpb24oYixjKXt2YXIgZCxlPWIub3B0aW9ucy5ncmlkbmF2LGY9Yi5ub2RlLGc9Yi5vcmlnaW5hbEV2ZW50fHx7fSxoPWEoZy50YXJnZXQpLmlzKFwiOmlucHV0XCIpO2M9YyE9PSExLHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxjJiYoYi5vcHRpb25zLnRpdGxlc1RhYmJhYmxlPyhofHwoYShmLnNwYW4pLmZpbmQoXCJzcGFuLmZhbmN5dHJlZS10aXRsZVwiKS5mb2N1cygpLGYuc2V0Rm9jdXMoKSksYi50cmVlLiRjb250YWluZXIuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKSk6ZS5hdXRvZm9jdXNJbnB1dCYmIWgmJihkPWEoZi50cnx8Zi5zcGFuKSxkLmZpbmQoXCI6aW5wdXQ6ZW5hYmxlZDpmaXJzdFwiKS5mb2N1cygpKSl9LG5vZGVLZXlkb3duOmZ1bmN0aW9uKGIpe3ZhciBjLGQsZSxmPWIub3B0aW9ucy5ncmlkbmF2LGg9Yi5vcmlnaW5hbEV2ZW50LGo9YShoLnRhcmdldCk7cmV0dXJuIGouaXMoXCI6aW5wdXQ6ZW5hYmxlZFwiKT9jPWoucHJvcChcInR5cGVcIik6ai5pcyhcImFcIikmJihjPVwibGlua1wiKSxjJiZmLmhhbmRsZUN1cnNvcktleXM/KGQ9aVtjXSwhKGQmJmEuaW5BcnJheShoLndoaWNoLGQpPj0wJiYoZT1nKGosaC53aGljaCksZSYmZS5sZW5ndGgpKXx8KGUuZmluZChcIjppbnB1dDplbmFibGVkLGFcIikuZm9jdXMoKSwhMSkpOnRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKX19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUucGVyc2lzdC5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGMsZCxmLGcpe3ZhciBoLGksaixsLG09ITEsbj1bXSxvPVtdO2ZvcihkPWR8fFtdLGc9Z3x8YS5EZWZlcnJlZCgpLGg9MCxqPWQubGVuZ3RoO2g8ajtoKyspaT1kW2hdLGw9Yi5nZXROb2RlQnlLZXkoaSksbD9mJiZsLmlzVW5kZWZpbmVkKCk/KG09ITAsYi5kZWJ1ZyhcIl9sb2FkTGF6eU5vZGVzOiBcIitsK1wiIGlzIGxhenk6IGxvYWRpbmcuLi5cIiksXCJleHBhbmRcIj09PWY/bi5wdXNoKGwuc2V0RXhwYW5kZWQoKSk6bi5wdXNoKGwubG9hZCgpKSk6KGIuZGVidWcoXCJfbG9hZExhenlOb2RlczogXCIrbCtcIiBhbHJlYWR5IGxvYWRlZC5cIiksbC5zZXRFeHBhbmRlZCgpKTooby5wdXNoKGkpLGIuZGVidWcoXCJfbG9hZExhenlOb2RlczogXCIrbCtcIiB3YXMgbm90IHlldCBmb3VuZC5cIikpO3JldHVybiBhLndoZW4uYXBwbHkoYSxuKS5hbHdheXMoZnVuY3Rpb24oKXtpZihtJiZvLmxlbmd0aD4wKWUoYixjLG8sZixnKTtlbHNle2lmKG8ubGVuZ3RoKWZvcihiLndhcm4oXCJfbG9hZExhenlOb2RlczogY291bGQgbm90IGxvYWQgdGhvc2Uga2V5czogXCIsbyksaD0wLGo9by5sZW5ndGg7aDxqO2grKylpPWRbaF0sYy5fYXBwZW5kS2V5KGssZFtoXSwhMSk7Zy5yZXNvbHZlKCl9fSksZ312YXIgZixnLGgsaT1hLnVpLmZhbmN5dHJlZS5hc3NlcnQsaj1cImFjdGl2ZVwiLGs9XCJleHBhbmRlZFwiLGw9XCJmb2N1c1wiLG09XCJzZWxlY3RlZFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIENvb2tpZXM/KGg9Q29va2llcy5zZXQsZj1Db29raWVzLmdldCxnPUNvb2tpZXMucmVtb3ZlKTooaD1mPWEuY29va2llLGc9YS5yZW1vdmVDb29raWUpLGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuY2xlYXJDb29raWVzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZXh0LnBlcnNpc3QsYz1iLmNvb2tpZVByZWZpeDthPWF8fFwiYWN0aXZlIGV4cGFuZGVkIGZvY3VzIHNlbGVjdGVkXCIsYS5pbmRleE9mKGopPj0wJiZiLl9kYXRhKGMraixudWxsKSxhLmluZGV4T2Yoayk+PTAmJmIuX2RhdGEoYytrLG51bGwpLGEuaW5kZXhPZihsKT49MCYmYi5fZGF0YShjK2wsbnVsbCksYS5pbmRleE9mKG0pPj0wJiZiLl9kYXRhKGMrbSxudWxsKX0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZUNsYXNzLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0LnBlcnNpc3QsYj1hLmNvb2tpZVByZWZpeCxjPWEuY29va2llRGVsaW1pdGVyLGQ9e307cmV0dXJuIGRbal09YS5fZGF0YShiK2opLGRba109KGEuX2RhdGEoYitrKXx8XCJcIikuc3BsaXQoYyksZFttXT0oYS5fZGF0YShiK20pfHxcIlwiKS5zcGxpdChjKSxkW2xdPWEuX2RhdGEoYitsKSxkfSxhLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcInBlcnNpc3RcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7Y29va2llRGVsaW1pdGVyOlwiflwiLGNvb2tpZVByZWZpeDpkLGNvb2tpZTp7cmF3OiExLGV4cGlyZXM6XCJcIixwYXRoOlwiXCIsZG9tYWluOlwiXCIsc2VjdXJlOiExfSxleHBhbmRMYXp5OiExLGZpcmVBY3RpdmF0ZTohMCxvdmVycmlkZVNvdXJjZTohMCxzdG9yZTpcImF1dG9cIix0eXBlczpcImFjdGl2ZSBleHBhbmRlZCBmb2N1cyBzZWxlY3RlZFwifSxfZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2xvY2FsLmxvY2FsU3RvcmFnZTtyZXR1cm4gYj09PWQ/Yz9jLmdldEl0ZW0oYSk6ZihhKTp2b2lkKG51bGw9PT1iP2M/Yy5yZW1vdmVJdGVtKGEpOmcoYSk6Yz9jLnNldEl0ZW0oYSxiKTpoKGEsYix0aGlzLm9wdGlvbnMucGVyc2lzdC5jb29raWUpKX0sX2FwcGVuZEtleTpmdW5jdGlvbihiLGMsZCl7Yz1cIlwiK2M7dmFyIGU9dGhpcy5fbG9jYWwsZj10aGlzLm9wdGlvbnMucGVyc2lzdCxnPWYuY29va2llRGVsaW1pdGVyLGg9ZS5jb29raWVQcmVmaXgrYixpPWUuX2RhdGEoaCksaj1pP2kuc3BsaXQoZyk6W10saz1hLmluQXJyYXkoYyxqKTtrPj0wJiZqLnNwbGljZShrLDEpLGQmJmoucHVzaChjKSxlLl9kYXRhKGgsai5qb2luKGcpKX0sdHJlZUluaXQ6ZnVuY3Rpb24oYyl7dmFyIGc9Yy50cmVlLGg9Yy5vcHRpb25zLG49dGhpcy5fbG9jYWwsbz10aGlzLm9wdGlvbnMucGVyc2lzdDtyZXR1cm4gaShcImF1dG9cIiE9PW8uc3RvcmUmJlwiY29va2llXCIhPT1vLnN0b3JlfHxmLFwiTWlzc2luZyByZXF1aXJlZCBwbHVnaW4gZm9yICdwZXJzaXN0JyBleHRlbnNpb246IGpzLmNvb2tpZS5qcyBvciBqcXVlcnkuY29va2llLmpzXCIpLG4uY29va2llUHJlZml4PW8uY29va2llUHJlZml4fHxcImZhbmN5dHJlZS1cIitnLl9pZCtcIi1cIixuLnN0b3JlQWN0aXZlPW8udHlwZXMuaW5kZXhPZihqKT49MCxuLnN0b3JlRXhwYW5kZWQ9by50eXBlcy5pbmRleE9mKGspPj0wLG4uc3RvcmVTZWxlY3RlZD1vLnR5cGVzLmluZGV4T2YobSk+PTAsbi5zdG9yZUZvY3VzPW8udHlwZXMuaW5kZXhPZihsKT49MCxcImNvb2tpZVwiIT09by5zdG9yZSYmYi5sb2NhbFN0b3JhZ2U/bi5sb2NhbFN0b3JhZ2U9XCJsb2NhbFwiPT09by5zdG9yZT9iLmxvY2FsU3RvcmFnZTpiLnNlc3Npb25TdG9yYWdlOm4ubG9jYWxTdG9yYWdlPW51bGwsZy4kZGl2LmJpbmQoXCJmYW5jeXRyZWVpbml0XCIsZnVuY3Rpb24oYil7aWYoZy5fdHJpZ2dlclRyZWVFdmVudChcImJlZm9yZVJlc3RvcmVcIixudWxsLHt9KSE9PSExKXt2YXIgYyxmLGkscCxxLHI9bi5fZGF0YShuLmNvb2tpZVByZWZpeCtsKSxzPW8uZmlyZUFjdGl2YXRlPT09ITE7Yz1uLl9kYXRhKG4uY29va2llUHJlZml4K2spLHA9YyYmYy5zcGxpdChvLmNvb2tpZURlbGltaXRlciksZj1uLnN0b3JlRXhwYW5kZWQ/ZShnLG4scCwhIW8uZXhwYW5kTGF6eSYmXCJleHBhbmRcIixudWxsKToobmV3IGEuRGVmZXJyZWQpLnJlc29sdmUoKSxmLmRvbmUoZnVuY3Rpb24oKXtpZihuLnN0b3JlU2VsZWN0ZWQpe2lmKGM9bi5fZGF0YShuLmNvb2tpZVByZWZpeCttKSlmb3IocD1jLnNwbGl0KG8uY29va2llRGVsaW1pdGVyKSxpPTA7aTxwLmxlbmd0aDtpKyspcT1nLmdldE5vZGVCeUtleShwW2ldKSxxPyhxLnNlbGVjdGVkPT09ZHx8by5vdmVycmlkZVNvdXJjZSYmcS5zZWxlY3RlZD09PSExKSYmKHEuc2VsZWN0ZWQ9ITAscS5yZW5kZXJTdGF0dXMoKSk6bi5fYXBwZW5kS2V5KG0scFtpXSwhMSk7Mz09PWcub3B0aW9ucy5zZWxlY3RNb2RlJiZnLnZpc2l0KGZ1bmN0aW9uKGEpe2lmKGEuc2VsZWN0ZWQpcmV0dXJuIGEuZml4U2VsZWN0aW9uM0FmdGVyQ2xpY2soKSxcInNraXBcIn0pfW4uc3RvcmVBY3RpdmUmJihjPW4uX2RhdGEobi5jb29raWVQcmVmaXgraiksIWN8fCFoLnBlcnNpc3Qub3ZlcnJpZGVTb3VyY2UmJmcuYWN0aXZlTm9kZXx8KHE9Zy5nZXROb2RlQnlLZXkoYykscSYmKHEuZGVidWcoXCJwZXJzaXN0OiBzZXQgYWN0aXZlXCIsYykscS5zZXRBY3RpdmUoITAse25vRm9jdXM6ITAsbm9FdmVudHM6c30pKSkpLG4uc3RvcmVGb2N1cyYmciYmKHE9Zy5nZXROb2RlQnlLZXkocikscSYmKGcub3B0aW9ucy50aXRsZXNUYWJiYWJsZT9hKHEuc3BhbikuZmluZChcIi5mYW5jeXRyZWUtdGl0bGVcIikuZm9jdXMoKTphKGcuJGNvbnRhaW5lcikuZm9jdXMoKSkpLGcuX3RyaWdnZXJUcmVlRXZlbnQoXCJyZXN0b3JlXCIsbnVsbCx7fSl9KX19KSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LG5vZGVTZXRBY3RpdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9dGhpcy5fbG9jYWw7cmV0dXJuIGI9YiE9PSExLGQ9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGUuc3RvcmVBY3RpdmUmJmUuX2RhdGEoZS5jb29raWVQcmVmaXgraix0aGlzLmFjdGl2ZU5vZGU/dGhpcy5hY3RpdmVOb2RlLmtleTpudWxsKSxkfSxub2RlU2V0RXhwYW5kZWQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9YS5ub2RlLGY9dGhpcy5fbG9jYWw7cmV0dXJuIGI9YiE9PSExLGQ9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGYuc3RvcmVFeHBhbmRlZCYmZi5fYXBwZW5kS2V5KGssZS5rZXksYiksZH0sbm9kZVNldEZvY3VzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLl9sb2NhbDtyZXR1cm4gYj1iIT09ITEsYz10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksZC5zdG9yZUZvY3VzJiZkLl9kYXRhKGQuY29va2llUHJlZml4K2wsdGhpcy5mb2N1c05vZGU/dGhpcy5mb2N1c05vZGUua2V5Om51bGwpLGN9LG5vZGVTZXRTZWxlY3RlZDpmdW5jdGlvbihiLGMpe3ZhciBkLGUsZj1iLnRyZWUsZz1iLm5vZGUsaD10aGlzLl9sb2NhbDtyZXR1cm4gYz1jIT09ITEsZD10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksaC5zdG9yZVNlbGVjdGVkJiYoMz09PWYub3B0aW9ucy5zZWxlY3RNb2RlPyhlPWEubWFwKGYuZ2V0U2VsZWN0ZWROb2RlcyghMCksZnVuY3Rpb24oYSl7cmV0dXJuIGEua2V5fSksZT1lLmpvaW4oYi5vcHRpb25zLnBlcnNpc3QuY29va2llRGVsaW1pdGVyKSxoLl9kYXRhKGguY29va2llUHJlZml4K20sZSkpOmguX2FwcGVuZEtleShtLGcua2V5LGcuc2VsZWN0ZWQpKSxkfX0pfShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcblxuLyohIEV4dGVuc2lvbiAnanF1ZXJ5LmZhbmN5dHJlZS50YWJsZS5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGMpe2M9Y3x8XCJcIixifHxhLmVycm9yKFwiQXNzZXJ0aW9uIGZhaWxlZCBcIitjKX1mdW5jdGlvbiBmKGEsYil7YS5pbnNlcnRCZWZvcmUoYixhLmZpcnN0Q2hpbGQpfWZ1bmN0aW9uIGcoYSxiKXthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYS5uZXh0U2libGluZyl9ZnVuY3Rpb24gaChhLGIpe2EudmlzaXQoZnVuY3Rpb24oYSl7dmFyIGM9YS50cjtpZihjJiYoYy5zdHlsZS5kaXNwbGF5PWEuaGlkZXx8IWI/XCJub25lXCI6XCJcIiksIWEuZXhwYW5kZWQpcmV0dXJuXCJza2lwXCJ9KX1mdW5jdGlvbiBpKGIpe3ZhciBjLGQsZixnPWIucGFyZW50LGg9Zz9nLmNoaWxkcmVuOm51bGw7aWYoaCYmaC5sZW5ndGg+MSYmaFswXSE9PWIpZm9yKGM9YS5pbkFycmF5KGIsaCksZj1oW2MtMV0sZShmLnRyKTtmLmNoaWxkcmVuJiYoZD1mLmNoaWxkcmVuW2YuY2hpbGRyZW4ubGVuZ3RoLTFdLGQudHIpOylmPWQ7ZWxzZSBmPWc7cmV0dXJuIGZ9YS51aS5mYW5jeXRyZWUucmVnaXN0ZXJFeHRlbnNpb24oe25hbWU6XCJ0YWJsZVwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOntjaGVja2JveENvbHVtbklkeDpudWxsLGluZGVudGF0aW9uOjE2LG5vZGVDb2x1bW5JZHg6MH0sdHJlZUluaXQ6ZnVuY3Rpb24oYil7dmFyIGQsZixnLGgsaSxqPWIudHJlZSxrPWIub3B0aW9ucyxsPWsudGFibGUsbT1qLndpZGdldC5lbGVtZW50O2lmKG51bGwhPWwuY3VzdG9tU3RhdHVzJiYobnVsbCE9ay5yZW5kZXJTdGF0dXNDb2x1bW5zP2EuZXJyb3IoXCJUaGUgJ2N1c3RvbVN0YXR1cycgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTUuMC4gVXNlICdyZW5kZXJTdGF0dXNDb2x1bW5zJyBvbmx5IGluc3RlYWQuXCIpOihqLndhcm4oXCJUaGUgJ2N1c3RvbVN0YXR1cycgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTUuMC4gVXNlICdyZW5kZXJTdGF0dXNDb2x1bW5zJyBpbnN0ZWFkLlwiKSxrLnJlbmRlclN0YXR1c0NvbHVtbnM9bC5jdXN0b21TdGF0dXMpKSxrLnJlbmRlclN0YXR1c0NvbHVtbnMmJmsucmVuZGVyU3RhdHVzQ29sdW1ucz09PSEwJiYoay5yZW5kZXJTdGF0dXNDb2x1bW5zPWsucmVuZGVyQ29sdW1ucyksbS5hZGRDbGFzcyhcImZhbmN5dHJlZS1jb250YWluZXIgZmFuY3l0cmVlLWV4dC10YWJsZVwiKSxqLnRib2R5PW0uZmluZChcIj50Ym9keVwiKVswXSxpPWEoai50Ym9keSksZj1hKFwidGhlYWQgPnRyOmxhc3QgPnRoXCIsbSkubGVuZ3RoLGg9aS5jaGlsZHJlbihcInRyOmZpcnN0XCIpLGgubGVuZ3RoKWc9aC5jaGlsZHJlbihcInRkXCIpLmxlbmd0aCxmJiZnIT09ZiYmKGoud2FybihcIkNvbHVtbiBjb3VudCBtaXNtYXRjaCBiZXR3ZWVuIHRoZWFkIChcIitmK1wiKSBhbmQgdGJvZHkgKFwiK2crXCIpOiB1c2luZyB0Ym9keS5cIiksZj1nKSxoPWguY2xvbmUoKTtlbHNlIGZvcihlKGY+PTEsXCJOZWVkIGVpdGhlciA8dGhlYWQ+IG9yIDx0Ym9keT4gd2l0aCA8dGQ+IGVsZW1lbnRzIHRvIGRldGVybWluZSBjb2x1bW4gY291bnQuXCIpLGg9YShcIjx0ciAvPlwiKSxkPTA7ZDxmO2QrKyloLmFwcGVuZChcIjx0ZCAvPlwiKTtoLmZpbmQoXCI+dGRcIikuZXEobC5ub2RlQ29sdW1uSWR4KS5odG1sKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1ub2RlJyAvPlwiKSxrLmFyaWEmJihoLmF0dHIoXCJyb2xlXCIsXCJyb3dcIiksaC5maW5kKFwidGRcIikuYXR0cihcInJvbGVcIixcImdyaWRjZWxsXCIpKSxqLnJvd0ZyYWdtZW50PWMuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGoucm93RnJhZ21lbnQuYXBwZW5kQ2hpbGQoaC5nZXQoMCkpLGkuZW1wdHkoKSxqLnN0YXR1c0NsYXNzUHJvcE5hbWU9XCJ0clwiLGouYXJpYVByb3BOYW1lPVwidHJcIix0aGlzLm5vZGVDb250YWluZXJBdHRyTmFtZT1cInRyXCIsai4kY29udGFpbmVyPW0sdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGEoai5yb290Tm9kZS51bCkucmVtb3ZlKCksai5yb290Tm9kZS51bD1udWxsLHRoaXMuJGNvbnRhaW5lci5hdHRyKFwidGFiaW5kZXhcIixrLnRhYmluZGV4KSxrLmFyaWEmJmouJGNvbnRhaW5lci5hdHRyKFwicm9sZVwiLFwidHJlZWdyaWRcIikuYXR0cihcImFyaWEtcmVhZG9ubHlcIiwhMCl9LG5vZGVSZW1vdmVDaGlsZE1hcmt1cDpmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGU7Yy52aXNpdChmdW5jdGlvbihiKXtiLnRyJiYoYShiLnRyKS5yZW1vdmUoKSxiLnRyPW51bGwpfSl9LG5vZGVSZW1vdmVNYXJrdXA6ZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlO2MudHImJihhKGMudHIpLnJlbW92ZSgpLGMudHI9bnVsbCksdGhpcy5ub2RlUmVtb3ZlQ2hpbGRNYXJrdXAoYil9LG5vZGVSZW5kZXI6ZnVuY3Rpb24oYixjLGQsaixrKXt2YXIgbCxtLG4sbyxwLHEscixzLHQ9Yi50cmVlLHU9Yi5ub2RlLHY9Yi5vcHRpb25zLHc9IXUucGFyZW50O2lmKHQuX2VuYWJsZVVwZGF0ZSE9PSExKXtpZihrfHwoYi5oYXNDb2xsYXBzZWRQYXJlbnRzPXUucGFyZW50JiYhdS5wYXJlbnQuZXhwYW5kZWQpLCF3KWlmKHUudHImJmMmJnRoaXMubm9kZVJlbW92ZU1hcmt1cChiKSx1LnRyKWM/dGhpcy5ub2RlUmVuZGVyVGl0bGUoYik6dGhpcy5ub2RlUmVuZGVyU3RhdHVzKGIpO2Vsc2V7aWYoYi5oYXNDb2xsYXBzZWRQYXJlbnRzJiYhZClyZXR1cm4gdm9pZCB1LmRlYnVnKFwibm9kZVJlbmRlciBpZ25vcmVkIGR1ZSB0byB1bnJlbmRlcmVkIHBhcmVudFwiKTtwPXQucm93RnJhZ21lbnQuZmlyc3RDaGlsZC5jbG9uZU5vZGUoITApLHE9aSh1KSxlKHEpLGo9PT0hMCYmaz9wLnN0eWxlLmRpc3BsYXk9XCJub25lXCI6ZCYmYi5oYXNDb2xsYXBzZWRQYXJlbnRzJiYocC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSxxLnRyP2cocS50cixwKTooZSghcS5wYXJlbnQsXCJwcmV2LiByb3cgbXVzdCBoYXZlIGEgdHIsIG9yIGJlIHN5c3RlbSByb290XCIpLGYodC50Ym9keSxwKSksdS50cj1wLHUua2V5JiZ2LmdlbmVyYXRlSWRzJiYodS50ci5pZD12LmlkUHJlZml4K3Uua2V5KSx1LnRyLmZ0bm9kZT11LHYuYXJpYSYmYSh1LnRyKS5hdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIsXCJmdGFsX1wiK3Uua2V5KSx1LnNwYW49YShcInNwYW4uZmFuY3l0cmVlLW5vZGVcIix1LnRyKS5nZXQoMCksdGhpcy5ub2RlUmVuZGVyVGl0bGUoYiksdi5jcmVhdGVOb2RlJiZ2LmNyZWF0ZU5vZGUuY2FsbCh0LHt0eXBlOlwiY3JlYXRlTm9kZVwifSxiKX1pZih2LnJlbmRlck5vZGUmJnYucmVuZGVyTm9kZS5jYWxsKHQse3R5cGU6XCJyZW5kZXJOb2RlXCJ9LGIpLGw9dS5jaGlsZHJlbixsJiYod3x8ZHx8dS5leHBhbmRlZCkpZm9yKG49MCxvPWwubGVuZ3RoO248bztuKyspcz1hLmV4dGVuZCh7fSxiLHtub2RlOmxbbl19KSxzLmhhc0NvbGxhcHNlZFBhcmVudHM9cy5oYXNDb2xsYXBzZWRQYXJlbnRzfHwhdS5leHBhbmRlZCx0aGlzLm5vZGVSZW5kZXIocyxjLGQsaiwhMCk7bCYmIWsmJihyPXUudHJ8fG51bGwsbT10LnRib2R5LmZpcnN0Q2hpbGQsdS52aXNpdChmdW5jdGlvbihhKXtpZihhLnRyKXtpZihhLnBhcmVudC5leHBhbmRlZHx8XCJub25lXCI9PT1hLnRyLnN0eWxlLmRpc3BsYXl8fChhLnRyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsaChhLCExKSksYS50ci5wcmV2aW91c1NpYmxpbmchPT1yKXt1LmRlYnVnKFwiX2ZpeE9yZGVyOiBtaXNtYXRjaCBhdCBub2RlOiBcIithKTt2YXIgYj1yP3IubmV4dFNpYmxpbmc6bTt0LnRib2R5Lmluc2VydEJlZm9yZShhLnRyLGIpfXI9YS50cn19KSl9fSxub2RlUmVuZGVyVGl0bGU6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGY9Yi5ub2RlLGc9Yi5vcHRpb25zLGg9Zi5pc1N0YXR1c05vZGUoKTtyZXR1cm4gZT10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksZi5pc1Jvb3ROb2RlKCk/ZTooZy5jaGVja2JveCYmIWgmJm51bGwhPWcudGFibGUuY2hlY2tib3hDb2x1bW5JZHgmJihkPWEoXCJzcGFuLmZhbmN5dHJlZS1jaGVja2JveFwiLGYuc3BhbiksYShmLnRyKS5maW5kKFwidGRcIikuZXEoK2cudGFibGUuY2hlY2tib3hDb2x1bW5JZHgpLmh0bWwoZCkpLHRoaXMubm9kZVJlbmRlclN0YXR1cyhiKSxoP2cucmVuZGVyU3RhdHVzQ29sdW1ucyYmZy5yZW5kZXJTdGF0dXNDb2x1bW5zLmNhbGwoYi50cmVlLHt0eXBlOlwicmVuZGVyU3RhdHVzQ29sdW1uc1wifSxiKTpnLnJlbmRlckNvbHVtbnMmJmcucmVuZGVyQ29sdW1ucy5jYWxsKGIudHJlZSx7dHlwZTpcInJlbmRlckNvbHVtbnNcIn0sYiksZSl9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGMsZD1iLm5vZGUsZT1iLm9wdGlvbnM7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGEoZC50cikucmVtb3ZlQ2xhc3MoXCJmYW5jeXRyZWUtbm9kZVwiKSxjPShkLmdldExldmVsKCktMSkqZS50YWJsZS5pbmRlbnRhdGlvbixhKGQuc3BhbikuY3NzKHtwYWRkaW5nTGVmdDpjK1wicHhcIn0pfSxub2RlU2V0RXhwYW5kZWQ6ZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoYSl7aChiLm5vZGUsYyksYT9jJiZiLm9wdGlvbnMuYXV0b1Njcm9sbCYmIWQubm9BbmltYXRpb24mJmIubm9kZS5oYXNDaGlsZHJlbigpP2Iubm9kZS5nZXRMYXN0Q2hpbGQoKS5zY3JvbGxJbnRvVmlldyghMCx7dG9wTm9kZTpiLm5vZGV9KS5hbHdheXMoZnVuY3Rpb24oKXtkLm5vRXZlbnRzfHxiLnRyZWUuX3RyaWdnZXJOb2RlRXZlbnQoYz9cImV4cGFuZFwiOlwiY29sbGFwc2VcIixiKSxmLnJlc29sdmVXaXRoKGIubm9kZSl9KTooZC5ub0V2ZW50c3x8Yi50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KGM/XCJleHBhbmRcIjpcImNvbGxhcHNlXCIsYiksZi5yZXNvbHZlV2l0aChiLm5vZGUpKTooZC5ub0V2ZW50c3x8Yi50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KGM/XCJleHBhbmRcIjpcImNvbGxhcHNlXCIsYiksZi5yZWplY3RXaXRoKGIubm9kZSkpfWlmKGM9YyE9PSExLGIubm9kZS5leHBhbmRlZCYmY3x8IWIubm9kZS5leHBhbmRlZCYmIWMpcmV0dXJuIHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKTt2YXIgZj1uZXcgYS5EZWZlcnJlZCxnPWEuZXh0ZW5kKHt9LGQse25vRXZlbnRzOiEwLG5vQW5pbWF0aW9uOiEwfSk7cmV0dXJuIGQ9ZHx8e30sdGhpcy5fc3VwZXIoYixjLGcpLmRvbmUoZnVuY3Rpb24oKXtlKCEwKX0pLmZhaWwoZnVuY3Rpb24oKXtlKCExKX0pLGYucHJvbWlzZSgpfSxub2RlU2V0U3RhdHVzOmZ1bmN0aW9uKGIsYyxkLGUpe2lmKFwib2tcIj09PWMpe3ZhciBmPWIubm9kZSxnPWYuY2hpbGRyZW4/Zi5jaGlsZHJlblswXTpudWxsO2cmJmcuaXNTdGF0dXNOb2RlKCkmJmEoZy50cikucmVtb3ZlKCl9cmV0dXJuIHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKX0sdHJlZUNsZWFyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVSZW1vdmVDaGlsZE1hcmt1cCh0aGlzLl9tYWtlSG9va0NvbnRleHQodGhpcy5yb290Tm9kZSkpLHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKX0sdHJlZURlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy4kY29udGFpbmVyLmZpbmQoXCJ0Ym9keVwiKS5lbXB0eSgpLHRoaXMuJHNvdXJjZSYmdGhpcy4kc291cmNlLnJlbW92ZUNsYXNzKFwidWktaGVscGVyLWhpZGRlblwiKX19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUudGhlbWVyb2xsZXIubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2EudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwidGhlbWVyb2xsZXJcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7YWN0aXZlQ2xhc3M6XCJ1aS1zdGF0ZS1hY3RpdmVcIixhZGRDbGFzczpcInVpLWNvcm5lci1hbGxcIixmb2N1c0NsYXNzOlwidWktc3RhdGUtZm9jdXNcIixob3ZlckNsYXNzOlwidWktc3RhdGUtaG92ZXJcIixzZWxlY3RlZENsYXNzOlwidWktc3RhdGUtaGlnaGxpZ2h0XCJ9LHRyZWVJbml0OmZ1bmN0aW9uKGIpe3ZhciBjPWIud2lkZ2V0LmVsZW1lbnQsZD1iLm9wdGlvbnMudGhlbWVyb2xsZXI7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLFwiVEFCTEVcIj09PWNbMF0ubm9kZU5hbWU/KGMuYWRkQ2xhc3MoXCJ1aS13aWRnZXQgdWktY29ybmVyLWFsbFwiKSxjLmZpbmQoXCI+dGhlYWQgdHJcIikuYWRkQ2xhc3MoXCJ1aS13aWRnZXQtaGVhZGVyXCIpLGMuZmluZChcIj50Ym9keVwiKS5hZGRDbGFzcyhcInVpLXdpZGdldC1jb25lbnRcIikpOmMuYWRkQ2xhc3MoXCJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKSxjLmRlbGVnYXRlKFwiLmZhbmN5dHJlZS1ub2RlXCIsXCJtb3VzZWVudGVyIG1vdXNlbGVhdmVcIixmdW5jdGlvbihiKXt2YXIgYz1hLnVpLmZhbmN5dHJlZS5nZXROb2RlKGIudGFyZ2V0KSxlPVwibW91c2VlbnRlclwiPT09Yi50eXBlO2EoYy50cj9jLnRyOmMuc3BhbikudG9nZ2xlQ2xhc3MoZC5ob3ZlckNsYXNzK1wiIFwiK2QuYWRkQ2xhc3MsZSl9KX0sdHJlZURlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGEud2lkZ2V0LmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKX0sbm9kZVJlbmRlclN0YXR1czpmdW5jdGlvbihiKXt2YXIgYz17fSxkPWIubm9kZSxlPWEoZC50cj9kLnRyOmQuc3BhbiksZj1iLm9wdGlvbnMudGhlbWVyb2xsZXI7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGNbZi5hY3RpdmVDbGFzc109ITEsY1tmLmZvY3VzQ2xhc3NdPSExLGNbZi5zZWxlY3RlZENsYXNzXT0hMSxkLmlzQWN0aXZlKCkmJihjW2YuYWN0aXZlQ2xhc3NdPSEwKSxkLmhhc0ZvY3VzKCkmJihjW2YuZm9jdXNDbGFzc109ITApLGQuaXNTZWxlY3RlZCgpJiYhZC5pc0FjdGl2ZSgpJiYoY1tmLnNlbGVjdGVkQ2xhc3NdPSEwKSxlLnRvZ2dsZUNsYXNzKGYuYWN0aXZlQ2xhc3MsY1tmLmFjdGl2ZUNsYXNzXSksZS50b2dnbGVDbGFzcyhmLmZvY3VzQ2xhc3MsY1tmLmZvY3VzQ2xhc3NdKSxlLnRvZ2dsZUNsYXNzKGYuc2VsZWN0ZWRDbGFzcyxjW2Yuc2VsZWN0ZWRDbGFzc10pLGUuYWRkQ2xhc3MoZi5hZGRDbGFzcyl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLndpZGUubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYixjKXtiPVwiZmFuY3l0cmVlLXN0eWxlLVwiK2I7dmFyIGQ9YShcIiNcIitiKTtpZighYylyZXR1cm4gZC5yZW1vdmUoKSxudWxsO2QubGVuZ3RofHwoZD1hKFwiPHN0eWxlIC8+XCIpLmF0dHIoXCJpZFwiLGIpLmFkZENsYXNzKFwiZmFuY3l0cmVlLXN0eWxlXCIpLnByb3AoXCJ0eXBlXCIsXCJ0ZXh0L2Nzc1wiKS5hcHBlbmRUbyhcImhlYWRcIikpO3RyeXtkLmh0bWwoYyl9Y2F0Y2goZSl7ZFswXS5zdHlsZVNoZWV0LmNzc1RleHQ9Y31yZXR1cm4gZH1mdW5jdGlvbiBmKGEsYixjLGQsZSl7dmFyIGYsZz1cIiNcIithK1wiIHNwYW4uZmFuY3l0cmVlLWxldmVsLVwiLGg9W107Zm9yKGY9MDtmPGI7ZisrKWgucHVzaChnKyhmKzEpK1wiIHNwYW4uZmFuY3l0cmVlLXRpdGxlIHsgcGFkZGluZy1sZWZ0OiBcIisoZipjK2QpK2UrXCI7IH1cIik7cmV0dXJuIGgucHVzaChcIiNcIithK1wiIGRpdi51aS1lZmZlY3RzLXdyYXBwZXIgdWwgbGkgc3Bhbi5mYW5jeXRyZWUtdGl0bGUgeyBwYWRkaW5nLWxlZnQ6IDNweDsgcG9zaXRpb246IHN0YXRpYzsgd2lkdGg6IGF1dG87IH1cIiksaC5qb2luKFwiXFxuXCIpfXZhciBnPS9eKFsrLV0/KD86XFxkK3xcXGQqXFwuXFxkKykpKFthLXpdKnwlKSQvO2EudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwid2lkZVwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOntpY29uV2lkdGg6bnVsbCxpY29uU3BhY2luZzpudWxsLGxldmVsT2ZzOm51bGx9LHRyZWVDcmVhdGU6ZnVuY3Rpb24oYil7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcyhcImZhbmN5dHJlZS1leHQtd2lkZVwiKTt2YXIgYyxkLGgsaSxqLGs9Yi5vcHRpb25zLndpZGUsbD1hKFwiPGxpIGlkPSdmYW5jeXRyZWVUZW1wJz48c3BhbiBjbGFzcz0nZmFuY3l0cmVlLW5vZGUnPjxzcGFuIGNsYXNzPSdmYW5jeXRyZWUtaWNvbicgLz48c3BhbiBjbGFzcz0nZmFuY3l0cmVlLXRpdGxlJyAvPjwvc3Bhbj48dWwgLz5cIikuYXBwZW5kVG8oYi50cmVlLiRjb250YWluZXIpLG09bC5maW5kKFwiLmZhbmN5dHJlZS1pY29uXCIpLG49bC5maW5kKFwidWxcIiksbz1rLmljb25TcGFjaW5nfHxtLmNzcyhcIm1hcmdpbi1sZWZ0XCIpLHA9ay5pY29uV2lkdGh8fG0uY3NzKFwid2lkdGhcIikscT1rLmxldmVsT2ZzfHxuLmNzcyhcInBhZGRpbmctbGVmdFwiKTtsLnJlbW92ZSgpLGg9by5tYXRjaChnKVsyXSxvPXBhcnNlRmxvYXQobywxMCksaT1wLm1hdGNoKGcpWzJdLHA9cGFyc2VGbG9hdChwLDEwKSxqPXEubWF0Y2goZylbMl0saD09PWkmJmo9PT1pfHxhLmVycm9yKFwiaWNvbldpZHRoLCBpY29uU3BhY2luZywgYW5kIGxldmVsT2ZzIG11c3QgaGF2ZSB0aGUgc2FtZSBjc3MgbWVhc3VyZSB1bml0XCIpLHRoaXMuX2xvY2FsLm1lYXN1cmVVbml0PWksdGhpcy5fbG9jYWwubGV2ZWxPZnM9cGFyc2VGbG9hdChxKSx0aGlzLl9sb2NhbC5saW5lT2ZzPSgxKyhiLm9wdGlvbnMuY2hlY2tib3g/MTowKSsoYi5vcHRpb25zLmljb249PT0hMT8wOjEpKSoocCtvKStvLHRoaXMuX2xvY2FsLm1heERlcHRoPTEwLGM9dGhpcy4kY29udGFpbmVyLnVuaXF1ZUlkKCkuYXR0cihcImlkXCIpLGQ9ZihjLHRoaXMuX2xvY2FsLm1heERlcHRoLHRoaXMuX2xvY2FsLmxldmVsT2ZzLHRoaXMuX2xvY2FsLmxpbmVPZnMsdGhpcy5fbG9jYWwubWVhc3VyZVVuaXQpLGUoYyxkKX0sdHJlZURlc3Ryb3k6ZnVuY3Rpb24oYSl7cmV0dXJuIGUodGhpcy4kY29udGFpbmVyLmF0dHIoXCJpZFwiKSxudWxsKSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGMsZCxnLGg9Yi5ub2RlLGk9aC5nZXRMZXZlbCgpO3JldHVybiBnPXRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxpPnRoaXMuX2xvY2FsLm1heERlcHRoJiYoYz10aGlzLiRjb250YWluZXIuYXR0cihcImlkXCIpLHRoaXMuX2xvY2FsLm1heERlcHRoKj0yLGguZGVidWcoXCJEZWZpbmUgZ2xvYmFsIGV4dC13aWRlIGNzcyB1cCB0byBsZXZlbCBcIit0aGlzLl9sb2NhbC5tYXhEZXB0aCksZD1mKGMsdGhpcy5fbG9jYWwubWF4RGVwdGgsdGhpcy5fbG9jYWwubGV2ZWxPZnMsdGhpcy5fbG9jYWwubGluZU9mcyx0aGlzLl9sb2NhbC5tZWFzdXJlVW5pdCksZShjLGQpKSxhKGguc3BhbikuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtbGV2ZWwtXCIraSksZ319KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG59KSk7XG4iLCIvKiohXG4gKiBqcXVlcnkuZmFuY3l0cmVlLmNvbnRleHRtZW51LmpzXG4gKiAzcmQgcGFydHkgalF1ZXJ5IENvbnRleHQgbWVudSBleHRlbnNpb24gZm9yIGpRdWVyeSBGYW5jeXRyZWVcbiAqXG4gKiBBdXRob3JzOiBSb2RuZXkgUmVobSwgQWRkeSBPc21hbmkgKHBhdGNoZXMgZm9yIEZGKVxuICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5jb20valF1ZXJ5LWNvbnRleHRNZW51L1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMiwgTWFydGluIFdlbmR0IChodHRwOi8vd3dXZW5kdC5kZSlcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLlxuICogaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ZhbmN5dHJlZS93aWtpL0xpY2Vuc2VJbmZlXG4gKi9cbihmdW5jdGlvbigkLCBkb2N1bWVudCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgaW5pdENvbnRleHRNZW51ID0gZnVuY3Rpb24odHJlZSwgc2VsZWN0b3IsIG1lbnUsIGFjdGlvbnMpIHtcblx0XHR0cmVlLiRjb250YWluZXIub24oXCJtb3VzZWRvd24uY29udGV4dE1lbnVcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdHZhciBub2RlID0gJC51aS5mYW5jeXRyZWUuZ2V0Tm9kZShldmVudCk7XG5cblx0XHRcdGlmKG5vZGUpIHtcbiAgICAgICAgJC5jb250ZXh0TWVudShcImRlc3Ryb3lcIiwgXCIuXCIgKyBzZWxlY3Rvcik7XG5cblx0XHRcdFx0bm9kZS5zZXRGb2N1cyh0cnVlKTtcblx0XHRcdFx0bm9kZS5zZXRBY3RpdmUodHJ1ZSk7XG5cblx0XHRcdFx0JC5jb250ZXh0TWVudSh7XG5cdFx0XHRcdFx0c2VsZWN0b3I6IFwiLlwiICsgc2VsZWN0b3IsXG5cdFx0XHRcdFx0YnVpbGQ6IGZ1bmN0aW9uKCR0cmlnZ2VyLCBlKSB7XG5cdFx0XHRcdFx0XHRub2RlID0gJC51aS5mYW5jeXRyZWUuZ2V0Tm9kZSgkdHJpZ2dlcik7XG5cblx0XHRcdFx0XHRcdHZhciBtZW51SXRlbXMgPSB7IH07XG5cdFx0XHRcdFx0XHRpZigkLmlzRnVuY3Rpb24obWVudSkpIHtcblx0XHRcdFx0XHRcdFx0bWVudUl0ZW1zID0gbWVudShub2RlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZigkLmlzUGxhaW5PYmplY3QobWVudSkpIHtcblx0XHRcdFx0XHRcdFx0bWVudUl0ZW1zID0gbWVudTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2s6IGZ1bmN0aW9uKGFjdGlvbiwgb3B0aW9ucykge1xuXHRcdFx0XHRcdFx0XHRcdGlmKCQuaXNGdW5jdGlvbihhY3Rpb25zKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0YWN0aW9ucyhub2RlLCBhY3Rpb24sIG9wdGlvbnMpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZigkLmlzUGxhaW5PYmplY3QoYWN0aW9ucykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmKGFjdGlvbnMuaGFzT3duUHJvcGVydHkoYWN0aW9uKSAmJiAkLmlzRnVuY3Rpb24oYWN0aW9uc1thY3Rpb25dKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhY3Rpb25zW2FjdGlvbl0obm9kZSwgb3B0aW9ucyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRpdGVtczogbWVudUl0ZW1zXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0JC51aS5mYW5jeXRyZWUucmVnaXN0ZXJFeHRlbnNpb24oe1xuXHRcdG5hbWU6IFwiY29udGV4dE1lbnVcIixcblx0XHR2ZXJzaW9uOiBcIjEuMFwiLFxuXHRcdGNvbnRleHRNZW51OiB7XG4gICAgICBzZWxlY3RvcjogXCJmYW5jeXRyZWUtdGl0bGVcIixcblx0XHRcdG1lbnU6IHt9LFxuXHRcdFx0YWN0aW9uczoge31cblx0XHR9LFxuXHRcdHRyZWVJbml0OiBmdW5jdGlvbihjdHgpIHtcblx0XHRcdHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKTtcblx0XHRcdGluaXRDb250ZXh0TWVudShjdHgudHJlZSxcbiAgICAgICAgICAgICAgICAgICAgICBjdHgub3B0aW9ucy5jb250ZXh0TWVudS5zZWxlY3RvciB8fCBcImZhbmN5dHJlZS10aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGN0eC5vcHRpb25zLmNvbnRleHRNZW51Lm1lbnUsXG4gICAgICAgICAgICAgICAgICAgICAgY3R4Lm9wdGlvbnMuY29udGV4dE1lbnUuYWN0aW9ucyk7XG5cdFx0fVxuXHR9KTtcbn0oalF1ZXJ5LCBkb2N1bWVudCkpO1xuIl19
